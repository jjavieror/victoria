!function(e){function t(t){for(var i,o,s=t[0],l=t[1],u=t[2],h=0,d=[];h<s.length;h++)o=s[h],r[o]&&d.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(c&&c(t);d.length;)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+"version/1571836555246/js/"+e+".js"}(e),a=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+a+")");o.type=i,o.request=a,n[1](o)}r[e]=void 0}};var l=setTimeout(function(){a({type:"timeout",target:s})},12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var s=this.webpackJsonp=this.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;a.push([509,"vendors"]),n()}([,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return o});var i={PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging",LOCAL:"local"},r={LOCALE:"locale",API:"api",MOCK_API:"mock-api"},a={LOCALE_ENABLED:"locale-enabled",LOCALE_ROUTING_ENABLED:"locale-routing-enabled",STATIC_ROOT:"static-root",PUBLIC_PATH:"public-path",VERSIONED_STATIC_ROOT:"versioned-static-root",MOCK_API_ENABLED:"mock-api-enabled"},o={DEFAULT_LOCALE:"default-locale",AVAILABLE_LOCALES:"available-locales",PERSIST_QUERY_PARAMS:"persist-query-params",GTM:"gtm"}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i={},r=function(e,t){i[e]=t},a=function(e){return i[e]}},function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"h",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"f",function(){return c}),n.d(t,"e",function(){return h});var i="gateway",r="configManager",a="twitterSharer",o="facebookSharer",s="trackingManager",l="appPreloader",u="webGLApplication",c="soundManager",h="orientationManager"},,,,,,,,,,,function(e,t,n){"use strict";t.a={AMBIENT:"ambient",UI:"ui",EFFECTS:"effects"}},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={AMBIENT:"ambient",CLICK_1:"click_01",CLICK_2:"click_02",CLICK_3:"click_03",TRANSITION_1:"transition_01",TRANSITION_2:"transition_02",TRANSITION_3:"transition_03"}},function(e,t,n){"use strict";var i;!function(e){e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE"}(i||(i={})),t.a=i},,,,,,,function(e,t,n){"use strict";var i=n(463).a,r=n(466),a=n(223),o=n(40),s=function(e,t,n){var i=Object(a.a)(),r=e.query.uuid,s=e.query.UUID;r||(r=s),t.name||i.getters[o.c]?!t.name&&e.name!==f.OFRENDA&&r?n({name:f.OFRENDA,query:e.query}):n():n({name:f.AGE_GATE,query:e.query})},l=n(468),u=n(471),c=n(472),h=n(478),d=n(480);n.d(t,"a",function(){return f});var f={HOME:"home",AGE_GATE:"ageGate",THANKYOU:"thankyou",TEASER:"teaser",UPLOAD_PHOTO:"upload-photo",OFRENDA:"ofrenda",WEBGL:"webgl"};t.b=[{path:"/age-gate",component:r.a,name:f.AGE_GATE},{path:"/",component:i,name:f.HOME,beforeEnter:s},{path:"/thankyou",component:l.a,name:f.THANKYOU,beforeEnter:s},{path:"/upload-photo",component:c.a,name:f.UPLOAD_PHOTO,beforeEnter:s},{path:"/ofrenda",component:d.a,name:f.OFRENDA,beforeEnter:s},{path:"/teaser",component:h.a,name:f.TEASER,beforeEnter:s},{path:"/webgl",component:u.a,name:f.WEBGL}]},,,,function(e,t,n){"use strict";n.d(t,"g",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var i,r,a=n(17),o=n.n(a),s="".concat("user","/setRememberMe"),l="".concat("user","/setBirthYear"),u="".concat("user","/setBirthMonth"),c="".concat("user","/setBirthDay"),h="".concat("user","/isAgeAllowed"),d="".concat("user","/clearUser"),f="".concat("user","/getDateOfBirth"),p=function(e){return"number"===typeof e};t.h={state:{rememberMe:!1,birthYear:null,birthMonth:null,birthDay:null},getters:(i={},o()(i,f,function(e){return"".concat(e.birthYear,"-").concat(e.birthMonth.toString().padStart(2,"0"),"-").concat(e.birthDay.toString().padStart(2,"0"))}),o()(i,h,function(e){var t=new Date;return t.setFullYear(t.getFullYear()-18),t>=new Date(e.birthYear,e.birthMonth-1,e.birthDay)&&p(e.birthYear)&&p(e.birthMonth)&&e.birthMonth<=12&&p(e.birthDay)&&e.birthDay<=31}),i),mutations:(r={},o()(r,l,function(e,t){e.birthYear=t}),o()(r,u,function(e,t){e.birthMonth=t}),o()(r,c,function(e,t){e.birthDay=t}),o()(r,s,function(e,t){e.rememberMe=t}),o()(r,d,function(e){e.birthYear=null,e.birthMonth=null,e.birthDay=null}),r),actions:{}}},function(e,t,n){"use strict";(function(e){var i=n(333),r=n(192),a=n(276),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/PrimaryButton/PrimaryButton.vue",t.a=u.exports}).call(this,n(18)(e))},,,,,function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return h}),n.d(t,"b",function(){return d});var i,r=n(17),a=n.n(r),o=n(217),s="".concat("ofrenda","/setUUID"),l="".concat("ofrenda","/setOfrendas"),u="".concat("ofrenda","/setPagination"),c="".concat("ofrenda","/setCurrentOffset"),h="".concat("ofrenda","/fetchOfrendas"),d=50;t.e={state:{uuid:null,currentOffset:0,items:{},pagination:{limit:null,offset:null,total:null}},mutations:(i={},a()(i,c,function(e,t){e.currentOffset=t}),a()(i,s,function(e,t){e.uuid=t}),a()(i,u,function(e,t){e.pagination=t}),a()(i,l,function(e,t){var n=t.offset,i=t.items;e.items[n]=i}),i),actions:a()({},h,function(e,t){var n=e.commit,i=e.state;return new Promise(function(e){return i.items[t.offset]?e():o.a.getAll({uuid:t.uuid,offset:t.offset,limit:d}).then(function(i){n(u,i.pagination);var r=i.data;r.length>0&&(r=function e(t){return t.length<d&&0===i.pagination.offset?e(t=t.concat(t.slice(0,d-t.length))):t}(r)),n(l,{offset:t.offset,items:r}),e()}).catch(function(e){return Promise.reject(e)})})})}},,function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i="".concat("infiniteLoader","/showLoader"),r="".concat("infiniteLoader","/hideLoader")},,,,,function(e,t,n){"use strict";(function(e){var i=n(339),r=n(187),a=n(275),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/layout/LogoXibalba/LogoXibalba.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";var i=n(9),r=n(5),a=n(80),o=n(29),s=n(90),l=n(36);t.a={name:"AbstractButtonComponent",extends:r.AbstractTransitionComponent,props:{active:i.a.bool.def(!0),disabled:i.a.bool,invalid:i.a.bool,size:i.a.oneOf([o.a.SMALL,o.a.MEDIUM,o.a.LARGE]).def(o.a.MEDIUM),icon:i.a.string,label:i.a.string,title:i.a.string,type:i.a.oneOf(Object.values(s.a)).isRequired,link:i.a.shape({type:i.a.oneOf(Object.values(a.a)).isRequired,target:i.a.any.isRequired})},computed:{buttonSize:function(){return o.a[this.size].toLowerCase()},target:function(){var e=this,t=this.link.target;this.link.type===a.a.INTERNAL&&(t=l.b.find(function(t){return t.name===e.link.target.name}).path);return t}},methods:{onClick:function(){},handleClick:function(e){switch(this.onClick(),this.$emit("click"),this.type){case s.a.LINK:switch(e.preventDefault(),this.link.type){case a.a.EXTERNAL:this.openExternalLink();break;case a.a.EXTERNAL_BLANK:this.openExternalLink(!0);break;case a.a.INTERNAL:default:this.openInternalLink()}break;case s.a.ACTION:e&&e.preventDefault();break;case s.a.SUBMIT:}},openInternalLink:function(){this.$router.push(this.link.target)},openExternalLink:function(e){e?window.open(this.link.target):window.location.href=this.link.target}}}},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(0),r=n.n(i),a=n(1),o=n.n(a),s=n(104),l=n.n(s),u=n(88),c=n.n(u),h=function(){function e(){r()(this,e),this.targetX=-1,this.targetY=0,this.currentY=0,this.currentX=0,this.initMouseMove()}return o()(e,[{key:"initMouseMove",value:function(){this.startFollowing()}},{key:"handleMouseMove",value:function(e){this.targetX=e.pageX/window.innerWidth*-2+1,this.targetY=e.pageY/window.innerHeight*-2+1}},{key:"startFollowing",value:function(){this.mouseMoveListener=new c.a(document,"mousemove",this.handleMouseMove.bind(this))}},{key:"stopFollowing",value:function(){this.mouseMoveListener&&(this.mouseMoveListener.dispose(),this.mouseMoveListener=null)}},{key:"tick",value:function(){this.currentX=l()(this.currentX,this.targetX,.075),this.currentY=l()(this.currentY,this.targetY,.075)}},{key:"dispose",value:function(){this.stopFollowing()}}]),e}()},function(e,t,n){"use strict";(function(e){var i=n(338),r=n(190),a=n(286),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/PrimaryLink/PrimaryLink.vue",t.a=u.exports}).call(this,n(18)(e))},,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var i=n(331),r=n(195),a=n(277),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/TextReveal/TextReveal.vue",t.a=u.exports}).call(this,n(18)(e))},,function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u});var i,r=n(17),a=n.n(r),o="".concat("app","/setDeviceState"),s="".concat("app","/setMenuIsOpen"),l="".concat("app","/setLogoIsVisible"),u="".concat("app","/toggleSound");t.d={state:{deviceState:null,menuIsOpen:!1,logoIsVisible:!0,muted:!1},getters:{},mutations:(i={},a()(i,u,function(e){e.muted=!e.muted}),a()(i,o,function(e,t){e.deviceState=t}),a()(i,s,function(e,t){e.menuIsOpen=t}),a()(i,l,function(e,t){e.logoIsVisible=t}),i),actions:{}}},function(e,t,n){"use strict";t.a={INTERNAL:"link-type-internal",EXTERNAL:"link-type-external",EXTERNAL_BLANK:"link-type-external-blank"}},,,,,,,,,,function(e,t,n){"use strict";t.a={ACTION:"button-type-action",LINK:"button-type-link",SUBMIT:"button-type-submit"}},,,,,,,,,,,function(e,t,n){var i={"./background.jpg":762,"./candle_flame.png":442,"./height.jpg":763,"./ofrenda_a_albedo.jpg":764,"./ofrenda_a_albedo.png":443,"./ofrenda_a_albedo_transparency.png":444,"./ofrenda_b_albedo.jpg":765,"./ofrenda_b_albedo.png":445,"./ofrenda_b_albedo_transparency.png":446,"./ofrenda_c_albedo.jpg":766,"./ofrenda_c_albedo.png":447,"./ofrenda_c_albedo_transparency.png":448,"./perlin_doNotCompress.png":449,"./petals.png":450,"./portrait_default.png":451,"./ramp.png":452};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=101},,function(e,t,n){"use strict";(function(e){var i=n(334),r=n(211),a=n(281),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/layout/LogoVictoria/LogoVictoria.vue",t.a=u.exports}).call(this,n(18)(e))},,function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(0),o=n.n(a),s=n(3),l=n.n(s),u=n(2),c=n.n(u),h=n(4),d=n.n(h),f=n(10),p=n.n(f),v=function(){function e(){o()(this,e),this.isDestructed=!1}return r()(e,[{key:"destruct",value:function(){this.isDestructed?console.error("Cannot destruct twice"):this.isDestructed=!0}}]),e}(),m=function(e){function t(){var e;return o()(this,t),(e=l()(this,c()(t).call(this)))._loadsRequested=[],e._loadsCompleted=0,e._progress=0,e._isLoading=!1,e._callbackPerPreloadable=[],e}return d()(t,e),r()(t,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._loadsRequested.push(e)-1;return this._callbackPerPreloadable.push(t),this.isLoading()&&this.startLoader(n),e}},{key:"load",value:function(e,t){this._callback=e,this._progressCallBack=t,this.loadAll()}},{key:"isLoading",value:function(){return this._isLoading}},{key:"loadAll",value:function(){if(0!==this._loadsRequested.length){this._isLoading=!0;for(var e=0;e<this._loadsRequested.length;e++)this.startLoader(e)}else this.loadDoneCallback()}},{key:"setCallbackForPreloadable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._callbackPerPreloadable[this.getIndexOfPreloadable(e)]=t}},{key:"getIndexOfPreloadable",value:function(e){return this._loadsRequested.indexOf(e)}},{key:"startLoader",value:function(e){var t=this;this._loadsRequested[e].load(function(){var n=t._callbackPerPreloadable[e];n&&n(),t.loadDoneCallback()})}},{key:"loadDoneCallback",value:function(){this._loadsCompleted++,this._progress+=(1-this._progress)/(1+this._loadsRequested.length-this._loadsCompleted),this._progressCallBack&&(this._loadsRequested.length?this._progressCallBack.call(this,this._progress):this._progressCallBack.call(this,1)),this._loadsCompleted>=this._loadsRequested.length&&(this._isLoading=!1,this._callback&&(this._callback.call(this),this._callback=null))}},{key:"destruct",value:function(){this._callback=null,p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v),_=n(27),g=n.n(_),y=function e(){o()(this,e)};y.ACTIVE_ATTRIBUTES=35721,y.ACTIVE_ATTRIBUTE_MAX_LENGTH=35722,y.ACTIVE_TEXTURE=34016,y.ACTIVE_UNIFORMS=35718,y.ACTIVE_UNIFORM_MAX_LENGTH=35719,y.ALIASED_LINE_WIDTH_RANGE=33902,y.ALIASED_POINT_SIZE_RANGE=33901,y.ALPHA=6406,y.ALPHA_BITS=3413,y.ALWAYS=519,y.ARRAY_BUFFER=34962,y.ARRAY_BUFFER_BINDING=34964,y.ATTACHED_SHADERS=35717,y.BACK=1029,y.BLEND=3042,y.BLEND_COLOR=32773,y.BLEND_DST_ALPHA=32970,y.BLEND_DST_RGB=32968,y.BLEND_EQUATION=32777,y.BLEND_EQUATION_ALPHA=34877,y.BLEND_EQUATION_RGB=32777,y.BLEND_SRC_ALPHA=32971,y.BLEND_SRC_RGB=32969,y.BLUE_BITS=3412,y.BOOL=35670,y.BOOL_VEC2=35671,y.BOOL_VEC3=35672,y.BOOL_VEC4=35673,y.BROWSER_DEFAULT_WEBGL=37444,y.BUFFER_SIZE=34660,y.BUFFER_USAGE=34661,y.BYTE=5120,y.CCW=2305,y.CLAMP_TO_EDGE=33071,y.COLOR_ATTACHMENT0=36064,y.COLOR_BUFFER_BIT=16384,y.COLOR_CLEAR_VALUE=3106,y.COLOR_WRITEMASK=3107,y.COMPILE_STATUS=35713,y.COMPRESSED_TEXTURE_FORMATS=34467,y.CONSTANT_ALPHA=32771,y.CONSTANT_COLOR=32769,y.CONTEXT_LOST_WEBGL=37442,y.CULL_FACE=2884,y.CULL_FACE_MODE=2885,y.CURRENT_PROGRAM=35725,y.CURRENT_VERTEX_ATTRIB=34342,y.CW=2304,y.DECR=7683,y.DECR_WRAP=34056,y.DELETE_STATUS=35712,y.DEPTH_ATTACHMENT=36096,y.DEPTH_BITS=3414,y.DEPTH_BUFFER_BIT=256,y.DEPTH_CLEAR_VALUE=2931,y.DEPTH_COMPONENT=6402,y.DEPTH_COMPONENT16=33189,y.DEPTH_FUNC=2932,y.DEPTH_RANGE=2928,y.DEPTH_STENCIL=34041,y.DEPTH_STENCIL_ATTACHMENT=33306,y.DEPTH_TEST=2929,y.DEPTH_WRITEMASK=2930,y.DITHER=3024,y.DONT_CARE=4352,y.DST_ALPHA=772,y.DST_COLOR=774,y.DYNAMIC_DRAW=35048,y.ELEMENT_ARRAY_BUFFER=34963,y.ELEMENT_ARRAY_BUFFER_BINDING=34965,y.EQUAL=514,y.FASTEST=4353,y.FLOAT=5126,y.FLOAT_MAT2=35674,y.FLOAT_MAT3=35675,y.FLOAT_MAT4=35676,y.FLOAT_VEC2=35664,y.FLOAT_VEC3=35665,y.FLOAT_VEC4=35666,y.FRAGMENT_SHADER=35632,y.FRAMEBUFFER=36160,y.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,y.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,y.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,y.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,y.FRAMEBUFFER_BINDING=36006,y.FRAMEBUFFER_COMPLETE=36053,y.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,y.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,y.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,y.FRAMEBUFFER_UNSUPPORTED=36061,y.FRONT=1028,y.FRONT_AND_BACK=1032,y.FRONT_FACE=2886,y.FUNC_ADD=32774,y.FUNC_REVERSE_SUBTRACT=32779,y.FUNC_SUBTRACT=32778,y.GENERATE_MIPMAP_HINT=33170,y.GEQUAL=518,y.GREATER=516,y.GREEN_BITS=3411,y.HIGH_FLOAT=36338,y.HIGH_INT=36341,y.INCR=7682,y.INCR_WRAP=34055,y.INFO_LOG_LENGTH=35716,y.INT=5124,y.INT_VEC2=35667,y.INT_VEC3=35668,y.INT_VEC4=35669,y.INVALID_ENUM=1280,y.INVALID_FRAMEBUFFER_OPERATION=1286,y.INVALID_OPERATION=1282,y.INVALID_VALUE=1281,y.INVERT=5386,y.KEEP=7680,y.LEQUAL=515,y.LESS=513,y.LINEAR=9729,y.LINEAR_MIPMAP_LINEAR=9987,y.LINEAR_MIPMAP_NEAREST=9985,y.LINES=1,y.LINE_LOOP=2,y.LINE_STRIP=3,y.LINE_WIDTH=2849,y.LINK_STATUS=35714,y.LOW_FLOAT=36336,y.LOW_INT=36339,y.LUMINANCE=6409,y.LUMINANCE_ALPHA=6410,y.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,y.MAX_CUBE_MAP_TEXTURE_SIZE=34076,y.MAX_FRAGMENT_UNIFORM_VECTORS=36349,y.MAX_RENDERBUFFER_SIZE=34024,y.MAX_TEXTURE_IMAGE_UNITS=34930,y.MAX_TEXTURE_SIZE=3379,y.MAX_VARYING_VECTORS=36348,y.MAX_VERTEX_ATTRIBS=34921,y.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,y.MAX_VERTEX_UNIFORM_VECTORS=36347,y.MAX_VIEWPORT_DIMS=3386,y.MEDIUM_FLOAT=36337,y.MEDIUM_INT=36340,y.MIRRORED_REPEAT=33648,y.NEAREST=9728,y.NEAREST_MIPMAP_LINEAR=9986,y.NEAREST_MIPMAP_NEAREST=9984,y.NEVER=512,y.NICEST=4354,y.NONE=0,y.NOTEQUAL=517,y.NO_ERROR=0,y.NUM_COMPRESSED_TEXTURE_FORMATS=34466,y.ONE=1,y.ONE_MINUS_CONSTANT_ALPHA=32772,y.ONE_MINUS_CONSTANT_COLOR=32770,y.ONE_MINUS_DST_ALPHA=773,y.ONE_MINUS_DST_COLOR=775,y.ONE_MINUS_SRC_ALPHA=771,y.ONE_MINUS_SRC_COLOR=769,y.OUT_OF_MEMORY=1285,y.PACK_ALIGNMENT=3333,y.POINTS=0,y.POLYGON_OFFSET_FACTOR=32824,y.POLYGON_OFFSET_FILL=32823,y.POLYGON_OFFSET_UNITS=10752,y.RED_BITS=3410,y.RENDERBUFFER=36161,y.RENDERBUFFER_ALPHA_SIZE=36179,y.RENDERBUFFER_BINDING=36007,y.RENDERBUFFER_BLUE_SIZE=36178,y.RENDERBUFFER_DEPTH_SIZE=36180,y.RENDERBUFFER_GREEN_SIZE=36177,y.RENDERBUFFER_HEIGHT=36163,y.RENDERBUFFER_INTERNAL_FORMAT=36164,y.RENDERBUFFER_RED_SIZE=36176,y.RENDERBUFFER_STENCIL_SIZE=36181,y.RENDERBUFFER_WIDTH=36162,y.RENDERER=7937,y.REPEAT=10497,y.REPLACE=7681,y.RGB=6407,y.RGB5_A1=32855,y.RGB565=36194,y.RGBA=6408,y.RGBA4=32854,y.SAMPLER_2D=35678,y.SAMPLER_CUBE=35680,y.SAMPLES=32937,y.SAMPLE_ALPHA_TO_COVERAGE=32926,y.SAMPLE_BUFFERS=32936,y.SAMPLE_COVERAGE=32928,y.SAMPLE_COVERAGE_INVERT=32939,y.SAMPLE_COVERAGE_VALUE=32938,y.SCISSOR_BOX=3088,y.SCISSOR_TEST=3089,y.SHADER_COMPILER=36346,y.SHADER_SOURCE_LENGTH=35720,y.SHADER_TYPE=35663,y.SHADING_LANGUAGE_VERSION=35724,y.SHORT=5122,y.SRC_ALPHA=770,y.SRC_ALPHA_SATURATE=776,y.SRC_COLOR=768,y.STATIC_DRAW=35044,y.STENCIL_ATTACHMENT=36128,y.STENCIL_BACK_FAIL=34817,y.STENCIL_BACK_FUNC=34816,y.STENCIL_BACK_PASS_DEPTH_FAIL=34818,y.STENCIL_BACK_PASS_DEPTH_PASS=34819,y.STENCIL_BACK_REF=36003,y.STENCIL_BACK_VALUE_MASK=36004,y.STENCIL_BACK_WRITEMASK=36005,y.STENCIL_BITS=3415,y.STENCIL_BUFFER_BIT=1024,y.STENCIL_CLEAR_VALUE=2961,y.STENCIL_FAIL=2964,y.STENCIL_FUNC=2962,y.STENCIL_INDEX=6401,y.STENCIL_INDEX8=36168,y.STENCIL_PASS_DEPTH_FAIL=2965,y.STENCIL_PASS_DEPTH_PASS=2966,y.STENCIL_REF=2967,y.STENCIL_TEST=2960,y.STENCIL_VALUE_MASK=2963,y.STENCIL_WRITEMASK=2968,y.STREAM_DRAW=35040,y.SUBPIXEL_BITS=3408,y.TEXTURE=5890,y.TEXTURE0=33984,y.TEXTURE1=33985,y.TEXTURE2=33986,y.TEXTURE3=33987,y.TEXTURE4=33988,y.TEXTURE5=33989,y.TEXTURE6=33990,y.TEXTURE7=33991,y.TEXTURE8=33992,y.TEXTURE9=33993,y.TEXTURE10=33994,y.TEXTURE11=33995,y.TEXTURE12=33996,y.TEXTURE13=33997,y.TEXTURE14=33998,y.TEXTURE15=33999,y.TEXTURE16=34e3,y.TEXTURE17=34001,y.TEXTURE18=34002,y.TEXTURE19=34003,y.TEXTURE20=34004,y.TEXTURE21=34005,y.TEXTURE22=34006,y.TEXTURE23=34007,y.TEXTURE24=34008,y.TEXTURE25=34009,y.TEXTURE26=34010,y.TEXTURE27=34011,y.TEXTURE28=34012,y.TEXTURE29=34013,y.TEXTURE30=34014,y.TEXTURE31=34015,y.TEXTURE_2D=3553,y.TEXTURE_BINDING_2D=32873,y.TEXTURE_BINDING_CUBE_MAP=34068,y.TEXTURE_CUBE_MAP=34067,y.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,y.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,y.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,y.TEXTURE_CUBE_MAP_POSITIVE_X=34069,y.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,y.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,y.TEXTURE_MAG_FILTER=10240,y.TEXTURE_MIN_FILTER=10241,y.TEXTURE_WRAP_S=10242,y.TEXTURE_WRAP_T=10243,y.TRIANGLES=4,y.TRIANGLE_FAN=6,y.TRIANGLE_STRIP=5,y.UNPACK_ALIGNMENT=3317,y.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,y.UNPACK_FLIP_Y_WEBGL=37440,y.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,y.UNSIGNED_BYTE=5121,y.UNSIGNED_INT=5125,y.UNSIGNED_SHORT=5123,y.UNSIGNED_SHORT_4_4_4_4=32819,y.UNSIGNED_SHORT_5_5_5_1=32820,y.UNSIGNED_SHORT_5_6_5=33635,y.VALIDATE_STATUS=35715,y.VENDOR=7936,y.VERSION=7938,y.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,y.VERTEX_ATTRIB_ARRAY_ENABLED=34338,y.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,y.VERTEX_ATTRIB_ARRAY_POINTER=34373,y.VERTEX_ATTRIB_ARRAY_SIZE=34339,y.VERTEX_ATTRIB_ARRAY_STRIDE=34340,y.VERTEX_ATTRIB_ARRAY_TYPE=34341,y.VERTEX_SHADER=35633,y.VIEWPORT=2978,y.ZERO=0;var E=y,A=function(){function e(){o()(this,e)}return r()(e,null,[{key:"log",value:function(){if(e.ENABLED){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];console.log(n)}}},{key:"error",value:function(){if(e.ENABLED){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];console.error(n)}}},{key:"getScreenLogDiv",value:function(){return e._screenLogDiv||(e._screenLogDiv=e.createDebugDiv()),e._screenLogDiv}},{key:"logToScreen",value:function(t){e.ENABLED&&(e._screenLogDiv||(e._screenLogDiv=e.createDebugDiv()),e._screenLogDiv.innerHTML=t)}},{key:"logAppendToScreen",value:function(t){e.ENABLED&&(e._screenLogDiv||(e._screenLogDiv=e.createDebugDiv()),e._screenLogDiv.innerHTML+=t)}},{key:"logArray",value:function(t){if(e.ENABLED){for(var n=t.length,i="",r=0;r<n;r++)i+=t[r],i+=",";i=i.substring(0,i.length-1),console.log(i)}}},{key:"log2dArray",value:function(t){if(e.ENABLED){for(var n=t.length,i="",r=0;r<n;r++)for(var a=0;a<t[r].length;a++)i+=t[r][a],i+=",";i=i.substring(0,i.length-1),console.log(i)}}},{key:"createDebugDiv",value:function(){var e=document.createElement("div");return document.body.appendChild(e),e.style.position="absolute",e.style.left="160px",e.style.top="0px",e.style.color="#fff",e.style.backgroundColor="#000",e.style.display="block",e.style.width="158px",e.style.height="94px",e.style.padding="1px",e.style.font="10px Helvetica,Arial,sans-serif",e.style.lineHeight="14px",e.style.zIndex="1000",e}}]),e}();A.ENABLED=!0;var T=A,b=n(8),R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o()(this,e),this.v=b.e.fromValues(t,n,i)}return r()(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"copy",value:function(e){return b.e.copy(this.v,e.v),this}},{key:"setValues",value:function(e,t,n){return b.e.set(this.v,e,t,n),this}},{key:"length",value:function(){return b.e.length(this.v)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+")"}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"normalize",value:function(){return b.e.normalize(this.v,this.v),this}},{key:"negate",value:function(){return b.e.negate(this.v,this.v),this}},{key:"multiplyScalar",value:function(e){return b.e.scale(this.v,this.v,e),this}},{key:"multiply",value:function(e){return b.e.multiply(this.v,this.v,e.v),this}},{key:"divide",value:function(e){return b.e.divide(this.v,this.v,e.v),this}},{key:"add",value:function(e){return b.e.add(this.v,this.v,e.v),this}},{key:"subtract",value:function(e){return b.e.subtract(this.v,this.v,e.v),this}},{key:"subtractScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"rotateX",value:function(e,t){return b.e.rotateX(this.v,this.v,e.v,t),this}},{key:"rotateY",value:function(e,t){return b.e.rotateY(this.v,this.v,e.v,t),this}},{key:"transform",value:function(e){return b.e.transformMat4(this.v,this.v,e),this}},{key:"transformMat3",value:function(e){return b.e.transformMat3(this.v,this.v,e),this}},{key:"randomize",value:function(){return this.x=2*Math.random()-1,this.y=2*Math.random()-1,this.z=2*Math.random()-1,this}},{key:"randomize01",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomizeSphere",value:function(){do{this.randomize()}while(this.length()>1);return this}},{key:"smoothstep",value:function(){return this.x=e.smoothstep1(this.x),this.y=e.smoothstep1(this.y),this.z=e.smoothstep1(this.z),this}},{key:"min",value:function(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z)}},{key:"max",value:function(e){this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z)}},{key:"x",get:function(){return this.v[0]},set:function(e){this.v[0]=e}},{key:"y",get:function(){return this.v[1]},set:function(e){this.v[1]=e}},{key:"z",get:function(){return this.v[2]},set:function(e){this.v[2]=e}}],[{key:"smoothstep1",value:function(e){return e*e*(3-2*e)}},{key:"dot",value:function(e,t){return b.e.dot(e.v,t.v)}},{key:"distance",value:function(e,t){return b.e.distance(e.v,t.v)}},{key:"multiplyScalar",value:function(e,t,n){return e.x=t.x*n,e.y=t.y*n,e.z=t.z*n,e}},{key:"cross",value:function(e,t,n){return b.e.cross(e.v,t.v,n.v),e}},{key:"add",value:function(e,t,n){return b.e.add(e.v,t.v,n.v),e}},{key:"subtract",value:function(e,t,n){return b.e.subtract(e.v,t.v,n.v),e}},{key:"lerp",value:function(e,t,n,i){return b.e.lerp(e.v,t.v,n.v,i),e}},{key:"fract",value:function(e,t){return e.x=t.x-Math.floor(t.x),e.y=t.y-Math.floor(t.y),e.x=t.z-Math.floor(t.z),e}},{key:"floor",value:function(e,t){return b.e.floor(e.v,t.v),e}},{key:"bezier",value:function(e,t,n,i,r,a){b.e.bezier(e.v,t.v,n.v,i.v,r.v,a)}}]),e}();R.ZERO=new R,R.RIGHT=new R(1,0,0),R.UP=new R(0,1,0),R.FORWARD=new R(0,0,1),R.ONE=new R(1,1,1);var x=R,k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o()(this,e),this.v=b.d.fromValues(t,n)}return r()(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"copy",value:function(e){return b.d.copy(this.v,e.v),this}},{key:"setValues",value:function(e,t){return b.d.set(this.v,e,t),this}},{key:"length",value:function(){return b.d.length(this.v)}},{key:"toString",value:function(){return this.x+","+this.y}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"normalize",value:function(){return b.d.normalize(this.v,this.v),this}},{key:"negate",value:function(){return b.d.negate(this.v,this.v),this}},{key:"multiplyScalar",value:function(e){return b.d.scale(this.v,this.v,e),this}},{key:"multiply",value:function(e){return b.d.multiply(this.v,this.v,e.v),this}},{key:"add",value:function(e){return b.d.add(this.v,this.v,e.v),this}},{key:"subtract",value:function(e){return b.d.subtract(this.v,this.v,e.v),this}},{key:"subtractScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"rotate",value:function(e,t){var n=Math.sin(t),i=Math.cos(t);this.x-=e.x,this.y-=e.y;var r=this.x*i-this.y*n,a=this.x*n+this.y*i;return this.x=r+e.x,this.y=a+e.y,this}},{key:"x",get:function(){return this.v[0]},set:function(e){this.v[0]=e}},{key:"y",get:function(){return this.v[1]},set:function(e){this.v[1]=e}}],[{key:"dot",value:function(e,t){return b.d.dot(e.v,t.v)}},{key:"distance",value:function(e,t){return b.d.distance(e.v,t.v)}},{key:"multiplyScalar",value:function(e,t,n){return e.x=t.x*n,e.y=t.y*n,e}},{key:"cross",value:function(e,t,n){return b.d.cross(e.v,t.v,n.v),e}},{key:"add",value:function(e,t,n){return b.d.add(e.v,t.v,n.v),e}},{key:"subtract",value:function(e,t,n){return b.d.subtract(e.v,t.v,n.v),e}},{key:"lerp",value:function(e,t,n,i){return b.d.lerp(e.v,t.v,n.v,i),e}},{key:"fract",value:function(t,n){return e.subtract(n,e.floor(t,n),t),t}},{key:"floor",value:function(e,t){return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e}}]),e}();k.ZERO=new k(0,0);var P=k,w=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(o()(this,t),(i=l()(this,c()(t).call(this)))._loc=e.shader.uniformLocations[n],i._loc||T.log("FloatUniform: uniform does not exist on shader: ",e.name,n),!e.shader.program)throw new ReferenceError("Cannot construct FloatUniform from material: material shader is not yet initialized.");return i._renderer=e.renderer,i._program=e.shader.program,i.set(r),i}return d()(t,e),r()(t,[{key:"set",value:function(e){e!=this._value&&(this._value=e,this._renderer.renderState.setProgram(this._program),this._renderer.context.uniform1f(this._loc,this._value))}},{key:"getValue",value:function(){return this._value}},{key:"destruct",value:function(){p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v),S=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new P;if(o()(this,e),this._value=i,this._loc=t.shader.uniformLocations[n],this._loc||T.log("FloatUniform: uniform does not exist on shader: ",n),!t.shader.program)throw new ReferenceError("Cannot construct Vector2Uniform from material: material shader is not yet initialized.");this._renderer=t.renderer,this._program=t.shader.program}return r()(e,[{key:"set",value:function(e){e.x==this._value.x&&e.y==this._value.y||(this._value=e,this._renderer.renderState.setProgram(this._program),this._renderer.context.uniform2fv(this._loc,this._value.v))}},{key:"getValue",value:function(){return this._value}}]),e}(),M=function(){function e(t,n){arguments.length>2&&void 0!==arguments[2]?arguments[2]:new x;if(o()(this,e),this._value=new x,this._loc=t.shader.uniformLocations[n],this._loc||T.log("FloatUniform: uniform does not exist on shader: ",n),!t.shader.program)throw new ReferenceError("Cannot construct Vector3Uniform from material: material shader is not yet initialized.");this._renderer=t.renderer,this._program=t.shader.program}return r()(e,[{key:"set",value:function(e){e.x==this._value.x&&e.y==this._value.y&&e.z==this._value.z||(this._value.copy(e),this._renderer.renderState.setProgram(this._program),this._renderer.context.uniform3fv(this._loc,this._value.v))}},{key:"getValue",value:function(){return this._value}}]),e}(),C=function(e){function t(e,n,i){var r;return o()(this,t),(r=l()(this,c()(t).call(this)))._shaderDefines={},r.drawType=E.TRIANGLES,r.depthTest=!0,r.depthWrite=!0,r.blend=!1,r.culling=E.BACK,r.blendFuncSeparate=!1,r.renderer=e,r.name=n,r.shader=i,r.id=t.staticId++,r.setDefaultBlending(),r}return d()(t,e),r()(t,[{key:"setActive",value:function(){if(void 0===this.shader.program||void 0===this.shader.textureUniforms)throw new Error("Trying to activate material but the associated shader is not yet initialized");this.renderer.renderState.setProgram(this.shader.program);for(var e=0;e<this.shader.textureUniforms.length;e++)this.shader.textureUniforms[e].bind();if(this.renderer.renderState.material!=this&&(this.renderer.renderState.material=this,this.renderer.renderState.setDepthTest(this.depthTest),this.renderer.renderState.setDepthMask(this.depthWrite),this.depthFunc&&this.renderer.renderState.setDepthFunc(this.depthFunc),this.renderer.renderState.setCulling(this.culling),this.renderer.renderState.setBlendEnabled(this.blend),this.blend))if(this.renderer.renderState.setBlendEquation(this.blendEquation),this.blendFuncSeparate){if(void 0===this.sourceBlendRGB||void 0===this.destinationBlendRGB||void 0===this.sourceBlendAlpha||void 0===this.destinationBlendAlpha)throw new ReferenceError("expected blend properties to be set");this.renderer.renderState.setBlendFuncSeparate(this.sourceBlendRGB,this.destinationBlendRGB,this.sourceBlendAlpha,this.destinationBlendAlpha)}else this.renderer.renderState.setBlendFunc(this.sourceBlend,this.destinationBlend)}},{key:"setDefaultBlending",value:function(){this.depthTest=!0,this.depthWrite=!0,this.blend=!1,this.blendEquation=E.FUNC_ADD,this.sourceBlend=E.ZERO,this.destinationBlend=E.ONE}},{key:"setAlphaBlending",value:function(){this.depthWrite=!1,this.depthTest=!0,this.blend=!0,this.blendEquation=E.FUNC_ADD,this.setBlendUnified(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA)}},{key:"setPreMultipliedAlphaBlending",value:function(){this.depthWrite=!1,this.depthTest=!0,this.blend=!0,this.blendEquation=E.FUNC_ADD,this.setBlendUnified(E.ONE,E.ONE_MINUS_SRC_ALPHA)}},{key:"setMaxBlending",value:function(){this.depthWrite=!1,this.depthTest=!1,this.blend=!0,this.blendEquation=32776,this.sourceBlend=E.ONE,this.destinationBlend=E.ONE,this.setBlendUnified(E.ONE,E.ONE)}},{key:"setAdditiveBlending",value:function(){this.depthWrite=!1,this.depthTest=!0,this.blend=!0,this.blendEquation=E.FUNC_ADD,this.setBlendUnified(E.ONE,E.ONE)}},{key:"setMultiplyBlending",value:function(){this.depthWrite=!1,this.depthTest=!0,this.blend=!0,this.blendEquation=E.FUNC_ADD,this.setBlendUnified(E.ZERO,E.SRC_COLOR)}},{key:"setSubtractiveBlending",value:function(){this.depthWrite=!1,this.depthTest=!1,this.blend=!0,this.blendEquation=E.FUNC_SUBTRACT,this.setBlendUnified(E.ONE,E.ONE_MINUS_SRC_ALPHA)}},{key:"setBlendUnified",value:function(e,t){this.blendFuncSeparate=!1,this.sourceBlend=e,this.destinationBlend=t}},{key:"setBlendSeparate",value:function(e,t,n,i){this.blendFuncSeparate=!0,this.sourceBlendRGB=e,this.sourceBlendAlpha=n,this.destinationBlendRGB=t,this.destinationBlendAlpha=i}},{key:"setCullingBackFace",value:function(){this.culling=E.BACK}},{key:"setCullingFrontFace",value:function(){this.culling=E.FRONT}},{key:"setCullingDisabled",value:function(){this.culling=E.NONE}},{key:"setDrawTypePoints",value:function(){this.drawType=E.POINTS}},{key:"setDrawTypeLines",value:function(){this.drawType=E.LINES}},{key:"setDrawTypeLineStrip",value:function(){this.drawType=E.LINE_STRIP}},{key:"setDrawTypeTriangles",value:function(){this.drawType=E.TRIANGLES}},{key:"setDrawTypeTriangleFan",value:function(){this.drawType=E.TRIANGLE_FAN}},{key:"setDrawTypeTriangleStrip",value:function(){this.drawType=E.TRIANGLE_STRIP}},{key:"setFloat",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform1f(n,t))}},{key:"setInt",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform1i(n,t))}},{key:"setFloats",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.getLoc(e);a&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform4f(a,t,n,i,r))}},{key:"setShaderVector",value:function(e,t){var n=this.renderer.context,i=this.getLoc(e);if(i)switch(this.renderer.renderState.setProgram(this.shader.program),t.length){case 1:n.uniform1f(i,t[0]);break;case 2:n.uniform2f(i,t[0],t[1]);break;case 3:n.uniform3f(i,t[0],t[1],t[2]);break;case 4:n.uniform4f(i,t[0],t[1],t[2],t[3])}}},{key:"setMatrix",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniformMatrix4fv(n,!1,t))}},{key:"setMatrix3x3",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniformMatrix3fv(n,!1,t))}},{key:"setMatrix2x2",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniformMatrix2fv(n,!1,t))}},{key:"setMatrixArray",value:function(e,t){for(var n=0;n<t.length;n++){var i=e+"["+n+"]";this.setMatrix(i,t[n])}}},{key:"setMatrixArray2",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniformMatrix4fv(n,!1,t))}},{key:"setMatrixFloatArray",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniformMatrix4fv(n,!1,t))}},{key:"setTexture",value:function(e,t){if(!this.shader)throw new ReferenceError("Material has no Shader");var n=this.shader.getTextureUniformByName(e);n&&n.set(t)}},{key:"setFloat32Array",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform1fv(n,t))}},{key:"setInt32Array",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform1iv(n,t))}},{key:"setColor",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform4f(n,t.r,t.g,t.b,t.a))}},{key:"setVector3",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform3fv(n,t.v))}},{key:"setVector3Array",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform3fv(n,t))}},{key:"setVector2",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform2fv(n,t.v))}},{key:"setVector2Array",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform2fv(n,t))}},{key:"setVector4",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform4fv(n,t.v))}},{key:"setVector4Array",value:function(e,t){var n=this.getLoc(e);n&&(this.renderer.renderState.setProgram(this.shader.program),this.renderer.context.uniform4fv(n,t))}},{key:"getLoc",value:function(e){var t=this.shader.uniformLocations[e];if(!1!==t&&!t){if(!this.shader)throw new ReferenceError("Material has no Shader");if(!this.shader.program)throw new ReferenceError("Material shader has not yet been initialized");if(this.renderer.renderState.setProgram(this.shader.program),t=this.renderer.context.getUniformLocation(this.shader.program,e))return this.shader.uniformLocations[e]=t,t;this.shader.uniformLocations[e]=!1,T.log("uniform not present in shader: ",this.name,e)}return t}},{key:"hasUniform",value:function(e){if(!this.shader)throw new ReferenceError("Material has no Shader");return!!this.shader.uniformLocations[e]}},{key:"addFloatUniform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new w(this,e,t)}},{key:"addVector2Uniform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new P;return new S(this,e,t)}},{key:"addVector3Uniform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new x;return new M(this,e,t)}},{key:"addShaderDefines",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++){var r=t[i]instanceof Array?t[i][0]:t[i],a=t[i]instanceof Array?t[i][1]:1;void 0==this._shaderDefines[r]&&(this._shaderDefines[r]=a)}}},{key:"getShaderDefines",value:function(){return this._shaderDefines}},{key:"clearShaderDefines",value:function(){this._shaderDefines=[]}},{key:"destruct",value:function(){this.isDestructed||this.shader.destruct(),p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v);C.staticId=0;var F=C,N=function e(t,n,i){o()(this,e),this.name=t,this.stride=n,this.loc=i},L=function(){function e(t,n,i,r){if(o()(this,e),this.name=n,this._samplerIndex=r,!t.program)throw new ReferenceError("Cannot construct TextureUniform from shader: shader is not yet initialized.");t.renderer.renderState.setProgram(t.program),t.renderer.context.uniform1i(i,r)}return r()(e,[{key:"set",value:function(e){this._texture=e}},{key:"bind",value:function(){this._texture&&this._texture.bindToSlot(this._samplerIndex)}}]),e}(),I=function e(){o()(this,e)};I.READ_BUFFER=3074,I.UNPACK_ROW_LENGTH=3314,I.UNPACK_SKIP_ROWS=3315,I.UNPACK_SKIP_PIXELS=3316,I.PACK_ROW_LENGTH=3330,I.PACK_SKIP_ROWS=3331,I.PACK_SKIP_PIXELS=3332,I.COLOR=6144,I.DEPTH=6145,I.STENCIL=6146,I.RED=6403,I.RGB8=32849,I.RGBA8=32856,I.RGB10_A2=32857,I.TEXTURE_BINDING_3D=32874,I.UNPACK_SKIP_IMAGES=32877,I.UNPACK_IMAGE_HEIGHT=32878,I.TEXTURE_3D=32879,I.TEXTURE_WRAP_R=32882,I.MAX_3D_TEXTURE_SIZE=32883,I.UNSIGNED_INT_2_10_10_10_REV=33640,I.MAX_ELEMENTS_VERTICES=33e3,I.MAX_ELEMENTS_INDICES=33001,I.TEXTURE_MIN_LOD=33082,I.TEXTURE_MAX_LOD=33083,I.TEXTURE_BASE_LEVEL=33084,I.TEXTURE_MAX_LEVEL=33085,I.MIN=32775,I.MAX=32776,I.DEPTH_COMPONENT24=33190,I.MAX_TEXTURE_LOD_BIAS=34045,I.TEXTURE_COMPARE_MODE=34892,I.TEXTURE_COMPARE_FUNC=34893,I.CURRENT_QUERY=34917,I.QUERY_RESULT=34918,I.QUERY_RESULT_AVAILABLE=34919,I.STREAM_READ=35041,I.STREAM_COPY=35042,I.STATIC_READ=35045,I.STATIC_COPY=35046,I.DYNAMIC_READ=35049,I.DYNAMIC_COPY=35050,I.MAX_DRAW_BUFFERS=34852,I.DRAW_BUFFER0=34853,I.DRAW_BUFFER1=34854,I.DRAW_BUFFER2=34855,I.DRAW_BUFFER3=34856,I.DRAW_BUFFER4=34857,I.DRAW_BUFFER5=34858,I.DRAW_BUFFER6=34859,I.DRAW_BUFFER7=34860,I.DRAW_BUFFER8=34861,I.DRAW_BUFFER9=34862,I.DRAW_BUFFER10=34863,I.DRAW_BUFFER11=34864,I.DRAW_BUFFER12=34865,I.DRAW_BUFFER13=34866,I.DRAW_BUFFER14=34867,I.DRAW_BUFFER15=34868,I.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657,I.MAX_VERTEX_UNIFORM_COMPONENTS=35658,I.SAMPLER_3D=35679,I.SAMPLER_2D_SHADOW=35682,I.FRAGMENT_SHADER_DERIVATIVE_HINT=35723,I.PIXEL_PACK_BUFFER=35051,I.PIXEL_UNPACK_BUFFER=35052,I.PIXEL_PACK_BUFFER_BINDING=35053,I.PIXEL_UNPACK_BUFFER_BINDING=35055,I.FLOAT_MAT2x3=35685,I.FLOAT_MAT2x4=35686,I.FLOAT_MAT3x2=35687,I.FLOAT_MAT3x4=35688,I.FLOAT_MAT4x2=35689,I.FLOAT_MAT4x3=35690,I.SRGB=35904,I.SRGB8=35905,I.SRGB8_ALPHA8=35907,I.COMPARE_REF_TO_TEXTURE=34894,I.RGBA32F=34836,I.RGB32F=34837,I.RGBA16F=34842,I.RGB16F=34843,I.VERTEX_ATTRIB_ARRAY_INTEGER=35069,I.MAX_ARRAY_TEXTURE_LAYERS=35071,I.MIN_PROGRAM_TEXEL_OFFSET=35076,I.MAX_PROGRAM_TEXEL_OFFSET=35077,I.MAX_VARYING_COMPONENTS=35659,I.TEXTURE_2D_ARRAY=35866,I.TEXTURE_BINDING_2D_ARRAY=35869,I.R11F_G11F_B10F=35898,I.UNSIGNED_INT_10F_11F_11F_REV=35899,I.RGB9_E5=35901,I.UNSIGNED_INT_5_9_9_9_REV=35902,I.TRANSFORM_FEEDBACK_BUFFER_MODE=35967,I.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968,I.TRANSFORM_FEEDBACK_VARYINGS=35971,I.TRANSFORM_FEEDBACK_BUFFER_START=35972,I.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973,I.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976,I.RASTERIZER_DISCARD=35977,I.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978,I.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979,I.INTERLEAVED_ATTRIBS=35980,I.SEPARATE_ATTRIBS=35981,I.TRANSFORM_FEEDBACK_BUFFER=35982,I.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983,I.RGBA32UI=36208,I.RGB32UI=36209,I.RGBA16UI=36214,I.RGB16UI=36215,I.RGBA8UI=36220,I.RGB8UI=36221,I.RGBA32I=36226,I.RGB32I=36227,I.RGBA16I=36232,I.RGB16I=36233,I.RGBA8I=36238,I.RGB8I=36239,I.RED_INTEGER=36244,I.RGB_INTEGER=36248,I.RGBA_INTEGER=36249,I.SAMPLER_2D_ARRAY=36289,I.SAMPLER_2D_ARRAY_SHADOW=36292,I.SAMPLER_CUBE_SHADOW=36293,I.UNSIGNED_INT_VEC2=36294,I.UNSIGNED_INT_VEC3=36295,I.UNSIGNED_INT_VEC4=36296,I.INT_SAMPLER_2D=36298,I.INT_SAMPLER_3D=36299,I.INT_SAMPLER_CUBE=36300,I.INT_SAMPLER_2D_ARRAY=36303,I.UNSIGNED_INT_SAMPLER_2D=36306,I.UNSIGNED_INT_SAMPLER_3D=36307,I.UNSIGNED_INT_SAMPLER_CUBE=36308,I.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311,I.DEPTH_COMPONENT32F=36012,I.DEPTH32F_STENCIL8=36013,I.FLOAT_32_UNSIGNED_INT_24_8_REV=36269,I.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296,I.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297,I.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298,I.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299,I.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300,I.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301,I.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302,I.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303,I.FRAMEBUFFER_DEFAULT=33304,I.DEPTH_STENCIL_ATTACHMENT=33306,I.DEPTH_STENCIL=34041,I.UNSIGNED_INT_24_8=34042,I.DEPTH24_STENCIL8=35056,I.UNSIGNED_NORMALIZED=35863,I.DRAW_FRAMEBUFFER_BINDING=36006,I.READ_FRAMEBUFFER=36008,I.DRAW_FRAMEBUFFER=36009,I.READ_FRAMEBUFFER_BINDING=36010,I.RENDERBUFFER_SAMPLES=36011,I.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052,I.MAX_COLOR_ATTACHMENTS=36063,I.COLOR_ATTACHMENT1=36065,I.COLOR_ATTACHMENT2=36066,I.COLOR_ATTACHMENT3=36067,I.COLOR_ATTACHMENT4=36068,I.COLOR_ATTACHMENT5=36069,I.COLOR_ATTACHMENT6=36070,I.COLOR_ATTACHMENT7=36071,I.COLOR_ATTACHMENT8=36072,I.COLOR_ATTACHMENT9=36073,I.COLOR_ATTACHMENT10=36074,I.COLOR_ATTACHMENT11=36075,I.COLOR_ATTACHMENT12=36076,I.COLOR_ATTACHMENT13=36077,I.COLOR_ATTACHMENT14=36078,I.COLOR_ATTACHMENT15=36079,I.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182,I.MAX_SAMPLES=36183,I.HALF_FLOAT=5131,I.RG=33319,I.RG_INTEGER=33320,I.R8=33321,I.RG8=33323,I.R16F=33325,I.R32F=33326,I.RG16F=33327,I.RG32F=33328,I.R8I=33329,I.R8UI=33330,I.R16I=33331,I.R16UI=33332,I.R32I=33333,I.R32UI=33334,I.RG8I=33335,I.RG8UI=33336,I.RG16I=33337,I.RG16UI=33338,I.RG32I=33339,I.RG32UI=33340,I.VERTEX_ARRAY_BINDING=34229,I.R8_SNORM=36756,I.RG8_SNORM=36757,I.RGB8_SNORM=36758,I.RGBA8_SNORM=36759,I.SIGNED_NORMALIZED=36764,I.COPY_READ_BUFFER=36662,I.COPY_WRITE_BUFFER=36663,I.COPY_READ_BUFFER_BINDING=36662,I.COPY_WRITE_BUFFER_BINDING=36663,I.UNIFORM_BUFFER=35345,I.UNIFORM_BUFFER_BINDING=35368,I.UNIFORM_BUFFER_START=35369,I.UNIFORM_BUFFER_SIZE=35370,I.MAX_VERTEX_UNIFORM_BLOCKS=35371,I.MAX_FRAGMENT_UNIFORM_BLOCKS=35373,I.MAX_COMBINED_UNIFORM_BLOCKS=35374,I.MAX_UNIFORM_BUFFER_BINDINGS=35375,I.MAX_UNIFORM_BLOCK_SIZE=35376,I.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377,I.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379,I.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380,I.ACTIVE_UNIFORM_BLOCKS=35382,I.UNIFORM_TYPE=35383,I.UNIFORM_SIZE=35384,I.UNIFORM_BLOCK_INDEX=35386,I.UNIFORM_OFFSET=35387,I.UNIFORM_ARRAY_STRIDE=35388,I.UNIFORM_MATRIX_STRIDE=35389,I.UNIFORM_IS_ROW_MAJOR=35390,I.UNIFORM_BLOCK_BINDING=35391,I.UNIFORM_BLOCK_DATA_SIZE=35392,I.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394,I.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395,I.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396,I.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398,I.INVALID_INDEX=4294967295,I.MAX_VERTEX_OUTPUT_COMPONENTS=37154,I.MAX_FRAGMENT_INPUT_COMPONENTS=37157,I.MAX_SERVER_WAIT_TIMEOUT=37137,I.OBJECT_TYPE=37138,I.SYNC_CONDITION=37139,I.SYNC_STATUS=37140,I.SYNC_FLAGS=37141,I.SYNC_FENCE=37142,I.SYNC_GPU_COMMANDS_COMPLETE=37143,I.UNSIGNALED=37144,I.SIGNALED=37145,I.ALREADY_SIGNALED=37146,I.TIMEOUT_EXPIRED=37147,I.CONDITION_SATISFIED=37148,I.WAIT_FAILED=37149,I.SYNC_FLUSH_COMMANDS_BIT=1,I.VERTEX_ATTRIB_ARRAY_DIVISOR=35070,I.ANY_SAMPLES_PASSED=35887,I.ANY_SAMPLES_PASSED_CONSERVATIVE=36202,I.SAMPLER_BINDING=35097,I.RGB10_A2UI=36975,I.INT_2_10_10_10_REV=36255,I.TRANSFORM_FEEDBACK=36386,I.TRANSFORM_FEEDBACK_PAUSED=36387,I.TRANSFORM_FEEDBACK_ACTIVE=36388,I.TRANSFORM_FEEDBACK_BINDING=36389,I.TEXTURE_IMMUTABLE_FORMAT=37167,I.MAX_ELEMENT_INDEX=36203,I.TEXTURE_IMMUTABLE_LEVELS=33503;var O=I,B=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,t),(n=l()(this,c()(t).call(this))).uniformLocations={},n.id=t.staticId,t.staticId++,n.renderer=e,n.shaderDefines=i,n}return d()(t,e),r()(t,[{key:"load",value:function(e,t,n){var i=this;Promise.all([t.loadAssetByName("".concat(e,".vs.glsl")),t.loadAssetByName("".concat(e,".fs.glsl"))]).then(function(r){i.loadIncludes(r,t,function(t){i.init(e,t[0],t[1],n)})})}},{key:"loadIncludes",value:function(e,t,n){for(var i=this,r=/^#include\s+(\S+)/,a=[],o=0;o<e.length;o++)for(var s=e[o].split("\n"),l=0;l<s.length;l++){var u=s[l];u=u.trim();var c;null!==(c=r.exec(u))&&a.push([c[1],c])}if(a.length){for(var h=[],d=0;d<a.length;d++)h[d]=a[d][0];Promise.all(h.map(function(e){return t.loadAssetByPath(e)})).then(function(r){for(var o=0;o<e.length;o++)for(var s=0;s<a.length;s++)e[o]=e[o].replace(a[s][1][0],"\n\n///// Start "+h[s]+"\n\n"+r[s]+"\n\n///// End "+h[s]+"\n\n");i.loadIncludes(e,t,n)})}else n.call(this,e)}},{key:"init",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.name=e,this.shaderDefines){var a="";for(var o in this.shaderDefines)a+="#define "+o+" "+this.shaderDefines[o]+"\n";T.log("adding defines: ",this.name,a),n=a+n,i=a+i}n=t.stripUniformDuplicates(n),i=t.stripUniformDuplicates(i),n=this.renderer.preprocessShaderString(n),i=this.renderer.preprocessShaderString(i);var s=this.renderer.context,l=this.compileShader(s,n,s.VERTEX_SHADER),u=this.compileShader(s,i,s.FRAGMENT_SHADER);return this.program=this.LinkProgram(s,l,u),this.getUniforms(s,this.program),this.getAttributes(s,this.program),r&&r.call(this),this}},{key:"compileShader",value:function(e,t,n){var i=e.createShader(n);if(e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))return i;var r=e.getShaderInfoLog(i);if(r){T.error("compileShader: error: "+this.name,(n===E.VERTEX_SHADER?"vs":"fs")+" \n"+r),console.log("%c compileShader: "+this.name+(n===E.VERTEX_SHADER?" vs":" fs"),"background: #fff0f0; color: red"),console.log(r);for(var a=/ERROR: (\d+):(\d+):/,o=r.split("\n"),s=[],l=0;l<o.length;l++){var u,c=o[l];null!==(u=a.exec(c))&&(s[parseInt(u[2],10)-1]=c)}o=t.split("\n");var h=[];h[0]="";for(var d=0;d<o.length;d++)h[0]+="%c"+o[d]+"\n",h[d+1]=s[d]?"background: #fff0f0; color: red":"background: white; color: black",s[d]&&(h[0]+=" --\x3e "+s[d]+"\n");console.log.apply(console,h),console.log("%c compileShader: "+this.name+(n===E.VERTEX_SHADER?" vs":" fs"),"background: #fff0f0; color: red")}throw new Error("unable to compile shader")}},{key:"LinkProgram",value:function(e,t,n){var i=e.createProgram();if(e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;throw console.log("LinkProgram",this.name),new Error("Program link error:\n"+e.getProgramInfoLog(i))}},{key:"getUniforms",value:function(e,t){var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);this.textureUniforms=[],this.uniformLocations={};for(var i=0,r=0;r<n;r++){var a=e.getActiveUniform(t,r),o=e.getUniformLocation(this.program,a.name);this.uniformLocations[a.name]=o,a.type!==E.SAMPLER_2D&&a.type!==E.SAMPLER_CUBE&&a.type!==O.SAMPLER_3D||(this.textureUniforms.push(new L(this,a.name,o,i)),i++)}}},{key:"getAttributes",value:function(e,n){var i=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);this.attributes=[];for(var r=0;r<i;r++){var a=e.getActiveAttrib(n,r),o=e.getAttribLocation(this.program,a.name),s=t.getStride(a.type);this.attributes.push(new N(a.name,s,o))}}},{key:"getAttributeByName",value:function(e){if(this.attributes)for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].name===e)return this.attributes[t];return null}},{key:"getTextureUniformByName",value:function(e){if(this.textureUniforms)for(var t=0;t<this.textureUniforms.length;t++)if(this.textureUniforms[t].name===e)return this.textureUniforms[t];return null}},{key:"destruct",value:function(){p()(c()(t.prototype),"destruct",this).call(this)}}],[{key:"stripUniformDuplicates",value:function(e){for(var t="",n={},i=/^uniform\s+(\S*)\s+(\S*);/,r=e.split("\n"),a=0;a<r.length;a++){var o=r[a];o=o.trim();var s;if(null!==(s=i.exec(o))){var l=s[2];n[l]&&(o="// "+o),n[l]=!0}t+=o+"\n"}return t}},{key:"getStride",value:function(e){switch(e){case E.FLOAT:return 1;case E.FLOAT_VEC2:return 2;case E.FLOAT_VEC3:return 3;case E.FLOAT_VEC4:return 4;default:return T.error("attribute type not handled: "+e),-1}}}]),t}(v);B.staticId=0;var D=B,U=function(e){function t(e,n,i){var r;return o()(this,t),(r=l()(this,c()(t).call(this,e,i,new D(e)))).shaderIndex=e.shaderIndex,n.add(g()(r)),r}return d()(t,e),r()(t,[{key:"load",value:function(e){var t=this;this.shader.shaderDefines=this.getShaderDefines(),this.shader.load(this.name,this.shaderIndex,function(){e.call(t)})}}]),t}(F),V=function(e){function t(e,n,i,r,a,s){var u;return o()(this,t),(u=l()(this,c()(t).call(this))).data=null,u.vertexCount=-1,u._renderer=e,u.stride=r,u.name=n,u.storeData=a,u.vertexCount=i.length/r,s?(u.buffer=u._renderer.context.createBuffer(),u.setData(i,a)):u.data=i,u}return d()(t,e),r()(t,[{key:"setData",value:function(e,t){if(t||!this.buffer?this.data=e:this.data=null,0===e.length)throw"VertexAttribute: no data: probably a mesh file could not be loaded";if(this.buffer){var n=this._renderer.context;n.bindBuffer(E.ARRAY_BUFFER,this.buffer),n.bufferData(E.ARRAY_BUFFER,e.byteLength,E.STATIC_DRAW),n.bufferSubData(E.ARRAY_BUFFER,0,e)}}},{key:"getBufferLength",value:function(){if(this.data)return this.data.length;if(!this.buffer)throw new ReferenceError("Cannot get buffer length: no buffer set on VertextAttribute");var e=this._renderer.context;return e.bindBuffer(E.ARRAY_BUFFER,this.buffer),e.getBufferParameter(E.ARRAY_BUFFER,E.BUFFER_SIZE)/4}},{key:"destruct",value:function(){if(!this.isDestructed){var e=this._renderer.context;this.buffer&&e.deleteBuffer(this.buffer),this.data=null,p()(c()(t.prototype),"destruct",this).call(this)}}}],[{key:"serialize",value:function(e){return null===e.data?(console.error("Trying to serialize vertex attribute "+e.name+" without saved data"),{}):{name:e.name,data:e.data,stride:e.stride,storeData:e.storeData}}},{key:"deserialize",value:function(e){return{name:e.name,data:e.data,stride:e.stride,storeData:e.storeData}}}]),t}(v),G=function e(t,n){o()(this,e),this.name=t,this.stride=n};G.POSITION=new G("aPos",3),G.TEXCOORD0=new G("aUV0",2),G.TEXCOORD1=new G("aUV1",2),G.NORMAL=new G("aNormal",3),G.COLOR0=new G("aColor0",3),G.COLOR1=new G("aColor1",3),G.TANGENT=new G("aTangent",4);var $=G,H=function(e){function t(e){var n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o()(this,t),(n=l()(this,c()(t).call(this)))._vertexCount=0,n._isInterleavedBufferDirty=!0,n._attributeNames={},n.renderer=e,n.attributes=[],n._vertexCount=0,n.id=t.id++,n.interleaved=i,n.isDynamic=r,n}return d()(t,e),r()(t,[{key:"setJSONData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.animatorId=e.animatorId,this.isDynamic=e.isDynamic||!1,e.indices&&e.indices.length>0&&(e.use32BitIndices?this.setIndices32(new Uint32Array(e.indices)):this.setIndices(new Uint16Array(e.indices)));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n];this.setAttribute(i.name,i.stride,new Float32Array(i.data),t)}}},{key:"clone",value:function(){for(var e=new t(this.renderer,this.interleaved,this.isDynamic),n=0;n<this.attributes.length;n++)e.attributes.push(this.attributes[n]);return e._vertexCount=this._vertexCount,e}},{key:"interleaveData",value:function(){if(this._isInterleavedBufferDirty&&this.interleaved){this.interleavedStrideSum=0;for(var e=0;e<this.attributes.length;e++)this.interleavedStrideSum+=this.attributes[e].stride;for(var t=new Float32Array(this.interleavedStrideSum*this._vertexCount),n=0,i=0;i<this._vertexCount;i++)for(var r=0;r<this.attributes.length;r++)for(var a=this.attributes[r],o=0;o<a.stride;o++)t[n++]=a.data[i*a.stride+o];for(var s=0;s<this.attributes.length;s++)this.attributes[s].storeData||(this.attributes[s].data=null);this.interleavedBuffer=this.renderer.context.createBuffer();var l=this.renderer.context;l.bindBuffer(E.ARRAY_BUFFER,this.interleavedBuffer),l.bufferData(E.ARRAY_BUFFER,t,l.STATIC_DRAW),this._isInterleavedBufferDirty=!1,T.log("Mesh: finalize",this.attributes.length)}}},{key:"isInterleaved",value:function(){return this.interleaved}},{key:"hasIndices",value:function(){return!!this.indices}},{key:"setAttribute",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.setData(n,e,t,i)}},{key:"setPositions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$.POSITION;this.setData(e,n.name,n.stride,t)}},{key:"getPositions",value:function(){return this.getData($.POSITION.name)}},{key:"setNormals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$.NORMAL;this.setData(e,n.name,n.stride,t)}},{key:"getNormals",value:function(){return this.getData($.NORMAL.name)}},{key:"setColors",value:function(e){var t=$.COLOR0;this.setData(e,t.name,t.stride)}},{key:"getColors",value:function(){return this.getData($.COLOR0.name)}},{key:"setColors1",value:function(e){var t=$.COLOR1;this.setData(e,t.name,t.stride)}},{key:"getColors1",value:function(){return this.getData($.COLOR1.name)}},{key:"setUV0",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$.TEXCOORD0;this.setData(e,n.name,n.stride,t)}},{key:"getUV0",value:function(){return this.getData($.TEXCOORD0.name)}},{key:"setUV1",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$.TEXCOORD1;this.setData(e,n.name,n.stride,t)}},{key:"getUV1",value:function(){return this.getData($.TEXCOORD1.name)}},{key:"setTangents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$.TANGENT;this.setData(e,n.name,n.stride,t)}},{key:"getTangents",value:function(){return this.getData($.TANGENT.name)}},{key:"setData",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._attributeNames={};var r=this.getAttributeIndex(t),a=e.length/n;r<0?this.attributes.push(new V(this.renderer,t,e,n,i,!this.interleaved)):this.attributes[r].vertexCount==a?this.attributes[r].setData(e,i):(this.attributes[r].destruct(),this.attributes[r]=new V(this.renderer,t,e,n,i,!this.interleaved)),this._vertexCount=a,this.interleaved&&(this._isInterleavedBufferDirty=!0)}},{key:"deleteAttribute",value:function(e){var t=this.getAttributeIndex(e);t>=0&&this.attributes.splice(t,1),this._isInterleavedBufferDirty=!0,this._attributeNames={}}},{key:"hasAttribute",value:function(e){var t=this._attributeNames[e];if(!0===t||!1===t)return t;var n=this.getAttributeIndex(e);return this._attributeNames[e]=n>=0,this._attributeNames[e]}},{key:"getAttribute",value:function(e){var t=this.getAttributeIndex(e);return t>=0?this.attributes[t]:null}},{key:"getAttributeIndex",value:function(e){for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].name===e)return t;return-1}},{key:"getData",value:function(e){var t=this.getAttribute(e);return t&&t.data?t.data:(T.log("Mesh: getData",e,"no data"),null)}},{key:"setIndices",value:function(e){if(!(e instanceof Uint16Array))throw"Indices need to be of type Uint16Array";this.indexType=E.UNSIGNED_SHORT,this.indices=e;var t=this.renderer.context;this.indexBuffer||(this.indexBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)}},{key:"setIndices32",value:function(e){if(!(e instanceof Uint32Array))throw"Indices need to be of type Uint32Array";if(this.renderer.extensionManager.element_index_uint||this.renderer.context instanceof WebGL2RenderingContext){this.indexType=E.UNSIGNED_INT,this.indices=e;var t=this.renderer.context;this.indexBuffer||(this.indexBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)}else T.log("mesh: setIndices32: extension not supported: element_index_uint: using 16 bits indices"),this.setIndices(new Uint16Array(e))}},{key:"getNumVertices",value:function(){return this._vertexCount}},{key:"isSkinned",value:function(){return this.hasAttribute("aSkinIndex")}},{key:"destruct",value:function(){if(!this.isDestructed){this.renderer.destructVAO(this);var e=this.renderer.context;if(this.interleavedBuffer&&e.deleteBuffer(this.interleavedBuffer),this.indexBuffer&&e.deleteBuffer(this.indexBuffer),this.attributes)for(var n=0;n<this.attributes.length;n++)this.attributes[n].destruct();p()(c()(t.prototype),"destruct",this).call(this)}}}]),t}(v);H.id=0;var X=H,z=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return o()(this,t),(n=l()(this,c()(t).call(this,e))).createPlane(i,r,a,s,u),n}return d()(t,e),r()(t,[{key:"createPlane",value:function(e,t,n,i,r){for(var a=(e+1)*(t+1),o=new Float32Array(3*a),s=new Float32Array(2*a),l=new Float32Array(3*a),u=0,c=0,h=0,d=0;d<t+1;d++)for(var f=0;f<e+1;f++)o[u++]=f/e*2-1,n?(o[u++]=0,o[u++]=d/t*2-1):(o[u++]=d/t*2-1,o[u++]=0),s[c++]=f/e,s[c++]=d/t,n?(l[h++]=0,l[h++]=1,l[h++]=0):(l[h++]=0,l[h++]=0,l[h++]=1);this.setPositions(o,i),this.setUV0(s,i),this.setNormals(l,i);var p=new Uint32Array(3*(e*t*2)),v=e+1;u=0;for(d=0;d<t;d++)for(f=0;f<e;f++)p[u++]=d*v+f,p[u++]=(d+1)*v+f,p[u++]=d*v+f+1,p[u++]=(d+1)*v+f,p[u++]=(d+1)*v+f+1,p[u++]=d*v+f+1;r?this.setIndices32(p):this.setIndices(Uint16Array.from(p))}}]),t}(X),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o()(this,e),this.q=b.c.create(),b.c.set(this.q,t,n,i,r)}return r()(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return b.c.set(this.q,e.x,e.y,e.z,e.w),this}},{key:"setValues",value:function(e,t,n,i){return b.c.set(this.q,e,t,n,i),this}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"}},{key:"dot",value:function(e){return b.c.dot(this.q,e.q)}},{key:"identity",value:function(){return b.c.identity(this.q),this}},{key:"multiply",value:function(e){return b.c.multiply(this.q,this.q,e.q),this}},{key:"invert",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=this.w,this}},{key:"rotateX",value:function(e){return b.c.rotateX(this.q,this.q,e),this}},{key:"rotateY",value:function(e){return b.c.rotateY(this.q,this.q,e),this}},{key:"rotateZ",value:function(e){return b.c.rotateZ(this.q,this.q,e),this}},{key:"setAxisAngleRadians",value:function(e,t){return b.c.setAxisAngle(this.q,e.v,t),this}},{key:"rotateAxisAngleRadians",value:function(t,n){return b.c.setAxisAngle(e._tempQuat,t.v,n),b.c.multiply(this.q,e._tempQuat,this.q),this}},{key:"x",get:function(){return this.q[0]},set:function(e){this.q[0]=e}},{key:"y",get:function(){return this.q[1]},set:function(e){this.q[1]=e}},{key:"z",get:function(){return this.q[2]},set:function(e){this.q[2]=e}},{key:"w",get:function(){return this.q[3]},set:function(e){this.q[3]=e}}],[{key:"dot",value:function(e,t){return b.c.dot(e.q,t.q)}},{key:"multiply",value:function(e,t,n){return b.c.multiply(e.q,t.q,n.q),e}},{key:"invert",value:function(e,t){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e}},{key:"lerp",value:function(e,t,n,i){return b.c.lerp(e.q,t.q,n.q,i),e}},{key:"slerp",value:function(e,t,n,i){return b.c.slerp(e.q,t.q,n.q,i),e}},{key:"closestSlerp",value:function(t,n,i,r){return n.dot(i)<0?(e.invert(this.tInvB,i),e.slerp(t,n,this.tInvB,r)):e.slerp(t,n,i,r),t}},{key:"fromMat3",value:function(e,t){return b.c.fromMat3(e.q,t),e}},{key:"lookAt",value:function(t,n,i,r){e._tempForward.copy(n),e._tempForward.subtract(i),e._tempForward.normalize(),x.cross(e._tempRight,r,e._tempForward),e._tempRight.normalize(),x.cross(e._tempUp,e._tempForward,e._tempRight),e._tempUp.normalize();var a=b.a.fromValues(e._tempRight.x,e._tempRight.y,e._tempRight.z,e._tempUp.x,e._tempUp.y,e._tempUp.z,e._tempForward.x,e._tempForward.y,e._tempForward.z);return e.fromMat3(t,a),t}},{key:"CreateFromAxisAngle",value:function(e,t,n){var i=.5*n,r=Math.sin(i);e.setValues(t.x*r,t.y*r,t.z*r,Math.cos(i))}},{key:"fromEuler",value:function(e,t,n,i){return b.c.fromEuler(e.q,t,n,i),e}}]),e}();j.IDENTITY=new j,j._tempQuat=b.c.create(),j.tInvB=new j,j._tempForward=new x,j._tempRight=new x,j._tempUp=new x;var q=function(e){function t(){var e;return o()(this,t),(e=l()(this,c()(t).call(this))).autoUpdate=!0,e._rotation=new j,e._pos=new x,e._scale=new x(1,1,1),e._parent=null,e._matrix=b.b.create(),e._localMatrix=b.b.create(),e._changeCallback=[],e._children=[],e._tempMat4=b.b.create(),e._tempMat3=b.a.create(),e._tempV3a=new x,e._dirty=!0,e._signalDirtyDown=!1,e}return d()(t,e),r()(t,[{key:"identity",value:function(){this._pos.setValues(0,0,0),this._rotation.identity(),this._scale.setValues(1,1,1)}},{key:"setParent",value:function(e){this._parent!==e&&(this._parent&&this._parent.removeChild(this),this._parent=e,e&&e.addChild(this),this.setDirty())}},{key:"getParent",value:function(){return this._parent}},{key:"addChild",value:function(e){this._children.indexOf(e)<0&&(this._children.push(e),e.setParent(this))}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);t>-1&&(this._children.splice(t,1),e.setParent(null))}},{key:"getChildren",value:function(){return this._children}},{key:"addChangeCallBack",value:function(e){this._changeCallback.push(e)}},{key:"setDirty",value:function(){this._dirty||(this._dirty=!0,this.signalDirtyDown())}},{key:"setParentDirty",value:function(){this.signalDirtyDown()}},{key:"signalDirtyDown",value:function(){if(!this._signalDirtyDown){this._signalDirtyDown=!0;for(var e=this._changeCallback.length-1;e>=0;e--)this._changeCallback[e].call(this);for(var t=this._children.length-1;t>=0;t--)this._children[t].setParentDirty()}}},{key:"clone",value:function(){var e=new t;return e.setScale(this._scale),e.setRotation(this._rotation),e.setPosition(this._pos),e}},{key:"copy",value:function(e){return this.setScale(e._scale),this.setRotation(e._rotation),this.setPosition(e._pos),this}},{key:"updateMatrix",value:function(){(this._dirty||this._signalDirtyDown)&&(this.autoUpdate&&(this._dirty&&b.b.fromRotationTranslationScale(this._localMatrix,this._rotation.q,this._pos.v,this._scale.v),this._parent?b.b.multiply(this._matrix,this._parent.getWorldMatrix(),this._localMatrix):this._dirty&&b.b.copy(this._matrix,this._localMatrix)),this._dirty=!1,this._signalDirtyDown=!1)}},{key:"lookAt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.UP;this.setPosition(e),this.lookAtFromCurrentPos(t,n)}},{key:"lookAtFromCurrentPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.UP;j.lookAt(this._rotation,this._pos,e,t),this.setDirty()}},{key:"setPositionRotationScale",value:function(e,t,n){this._pos.copy(e),this._rotation.copy(t),this._scale.copy(n),this.setDirty()}},{key:"getWorldMatrix",value:function(){return this.updateMatrix(),this._matrix}},{key:"getLocalMatrix",value:function(){return this.updateMatrix(),this._localMatrix}},{key:"getPosition",value:function(){return this._pos}},{key:"setPosition",value:function(e){this._pos.copy(e),this.setDirty()}},{key:"setPositionValues",value:function(e,t,n){this._pos.setValues(e,t,n),this.setDirty()}},{key:"getWorldPosition",value:function(){this.updateMatrix();var e=this._tempV3a;return e.copy(x.ZERO),e.transform(this._matrix),e}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(e){this._scale.copy(e),this.setDirty()}},{key:"setScaleScalar",value:function(e){this._scale.setValues(e,e,e),this.setDirty()}},{key:"setScaleValues",value:function(e,t,n){this._scale.setValues(e,t,n),this.setDirty()}},{key:"translateX",value:function(e){this._pos.x+=e,this.setDirty()}},{key:"translateY",value:function(e){this._pos.y+=e,this.setDirty()}},{key:"translateZ",value:function(e){this._pos.z+=e,this.setDirty()}},{key:"translate",value:function(e){this._pos.add(e),this.setDirty()}},{key:"translateValues",value:function(e,t,n){this._pos.x+=e,this._pos.y+=t,this._pos.z+=n,this.setDirty()}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(e){this._rotation.copy(e),this.setDirty()}},{key:"getRotationMatrix",value:function(){return b.b.fromQuat(this._tempMat4,this._rotation.q),this._tempMat4}},{key:"getRotationMatrixMat3",value:function(){return b.a.fromQuat(this._tempMat3,this._rotation.q),this._tempMat3}},{key:"getWorldRotationMatrixMat3",value:function(){var e=this.getRotationMatrixMat3();return this._parent&&b.a.multiply(e,this._parent.getWorldRotationMatrixMat3(),e),e}},{key:"getWorldRotationMatrix",value:function(){var e=this.getRotationMatrix();return this._parent&&b.b.multiply(e,this._parent.getRotationMatrix(),e),e}},{key:"setRotationFromMatrix",value:function(e){j.fromMat3(this._rotation,e),this.setDirty()}},{key:"rotateRadiansValues",value:function(e,t,n){return this._rotation.rotateY(t),this._rotation.rotateX(e),this._rotation.rotateZ(n),this.setDirty(),this._rotation}},{key:"rotateRadians",value:function(e){return this.rotateRadiansValues(e.x,e.y,e.z)}},{key:"rotateDegreesValues",value:function(e,n,i){return this.rotateRadiansValues(e*t._degToRad,n*t._degToRad,i*t._degToRad)}},{key:"rotateDegrees",value:function(e){return this.rotateDegreesValues(e.x,e.y,e.z)}},{key:"rotateAxisAngleRadians",value:function(e,t){return this._rotation.rotateAxisAngleRadians(e,t),this.setDirty(),this._rotation}},{key:"rotateDegreesY",value:function(e){this._rotation.rotateY(e*t._degToRad),this.setDirty()}},{key:"rotateRadiansX",value:function(e){this._rotation.rotateX(e),this.setDirty()}},{key:"rotateRadiansY",value:function(e){this._rotation.rotateY(e),this.setDirty()}},{key:"rotateRadiansZ",value:function(e){this._rotation.rotateZ(e),this.setDirty()}},{key:"setEulerDegreesValues",value:function(e,t,n){this._rotation.identity(),this.rotateDegreesValues(e,t,n)}},{key:"setEulerDegrees",value:function(e){this.setEulerDegreesValues(e.x,e.y,e.z)}},{key:"setEulerDegreesXY",value:function(e){this.setEulerDegreesValues(e.x,e.y,0)}},{key:"setEulerRadians",value:function(e){this._rotation.identity(),this.rotateRadiansValues(e.x,e.y,e.z)}},{key:"setRadiansX",value:function(e){this._rotation.identity(),this.rotateRadiansX(e)}},{key:"setRadiansY",value:function(e){this._rotation.identity(),this.rotateRadiansY(e)}},{key:"setRadiansZ",value:function(e){this._rotation.identity(),this.rotateRadiansZ(e)}},{key:"getEulerDegrees",value:function(){b.a.fromQuat(this._tempMat3,this._rotation.q);var e=t.getEulerRadiansYXZ(this._tempMat3);return e.x*=t._radToDeg,e.y*=t._radToDeg,e.z*=t._radToDeg,e}},{key:"getForward",value:function(){var e=this.getRotationMatrixMat3();return this._tempV3a.setValues(e[6],e[7],e[8]),this._tempV3a}},{key:"getWorldForward",value:function(){var e=this.getWorldRotationMatrixMat3();return this._tempV3a.setValues(e[6],e[7],e[8]),this._tempV3a}},{key:"getRight",value:function(){var e=this.getRotationMatrixMat3();return this._tempV3a.setValues(e[0],e[1],e[2]),this._tempV3a}},{key:"getWorldRight",value:function(){var e=this.getWorldRotationMatrixMat3();return this._tempV3a.setValues(e[0],e[1],e[2]),this._tempV3a}},{key:"getUp",value:function(){var e=this.getRotationMatrixMat3();return this._tempV3a.setValues(e[3],e[4],e[5]),this._tempV3a}},{key:"getWorldUp",value:function(){var e=this.getWorldRotationMatrixMat3();return this._tempV3a.setValues(e[3],e[4],e[5]),this._tempV3a}},{key:"setDirection",value:function(e,n){var i=this._tempV3a;x.cross(i,n,e),i.normalize();var r=t._tempV3aS;x.cross(r,e,i),r.normalize(),b.a.set(this._tempMat3,i.x,i.y,i.z,r.x,r.y,r.z,e.x,e.y,e.z),this.setRotationFromMatrix(this._tempMat3)}},{key:"getDirection",value:function(){var e=this._tempV3a;return e.copy(x.FORWARD),e.transformMat3(this.getWorldRotationMatrixMat3()),e}},{key:"destruct",value:function(){p()(c()(t.prototype),"destruct",this).call(this)}}],[{key:"getEulerRadiansYXZ",value:function(e){var n,i,r;return e[7]<-1+this.singularityRange?(n=Math.PI/2,i=Math.atan2(e[3],e[0]),r=0):e[7]>1-this.singularityRange?(n=-Math.PI/2,i=-Math.atan2(e[3],e[0]),r=0):(n=Math.asin(-e[7]),i=Math.atan2(e[6],e[8]),r=Math.atan2(e[1],e[4])),t._tempV3aS.setValues(n,i,r),t._tempV3aS}}]),t}(v);q._degToRad=Math.PI/180,q._radToDeg=180/Math.PI,q._tempV3aS=new x,q.singularityRange=1e-4;var W=q,Y=function e(t){o()(this,e),this.MAX_VERTEX_ATTRIBS=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.MAX_VARYING_VECTORS=t.getParameter(t.MAX_VARYING_VECTORS),this.MAX_VERTEX_UNIFORM_VECTORS=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this.MAX_FRAGMENT_UNIFORM_VECTORS=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this.MAX_TEXTURE_IMAGE_UNITS=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.MAX_TEXTURE_SIZE=t.getParameter(t.MAX_TEXTURE_SIZE),this.MAX_CUBE_MAP_TEXTURE_SIZE=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.MAX_VIEWPORT_DIMS=t.getParameter(t.MAX_VIEWPORT_DIMS),this.MAX_RENDERBUFFER_SIZE=t.getParameter(t.MAX_RENDERBUFFER_SIZE),this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);var n=t.getExtension("WEBGL_debug_renderer_info");for(var i in this.UNMASKED_RENDERER=n&&t.getParameter(n.UNMASKED_RENDERER_WEBGL),this.UNMASKED_VENDOR=n&&t.getParameter(n.UNMASKED_VENDOR_WEBGL),this)this.hasOwnProperty(i)&&T.log(i,this[i])},K=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o()(this,e),this.v=b.f.fromValues(t,n,i,r)}return r()(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return b.f.set(this.v,e.x,e.y,e.z,e.w),this}},{key:"setValues",value:function(e,t,n,i){return b.f.set(this.v,e,t,n,i),this}},{key:"dot",value:function(e){return b.f.dot(this.v,e.v)}},{key:"transform",value:function(e){return b.f.transformMat4(this.v,this.v,e),this}},{key:"x",get:function(){return this.v[0]},set:function(e){this.v[0]=e}},{key:"y",get:function(){return this.v[1]},set:function(e){this.v[1]=e}},{key:"z",get:function(){return this.v[2]},set:function(e){this.v[2]=e}},{key:"w",get:function(){return this.v[3]},set:function(e){this.v[3]=e}}],[{key:"dot",value:function(e,t){return b.f.dot(e.v,t.v)}},{key:"transform",value:function(e,t,n){return b.f.transformMat4(e.v,t.v,n),e}}]),e}();K.ZERO=new K;var Q=K,Z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o()(this,t),l()(this,c()(t).call(this,e,n,i,r))}return d()(t,e),r()(t,[{key:"r",get:function(){return this.v[0]},set:function(e){this.v[0]=e}},{key:"g",get:function(){return this.v[1]},set:function(e){this.v[1]=e}},{key:"b",get:function(){return this.v[2]},set:function(e){this.v[2]=e}},{key:"a",get:function(){return this.v[3]},set:function(e){this.v[3]=e}}]),r()(t,[{key:"isEqualTo",value:function(e){return this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a}},{key:"clampCeil",value:function(e){this.r>e&&(this.r=e),this.g>e&&(this.g=e),this.b>e&&(this.b=e),this.a>e&&(this.a=e)}},{key:"toRGBString",value:function(){return"rgb("+Math.round(255*this.r)+","+Math.round(255*this.g)+","+Math.round(255*this.b)+")"}},{key:"getHex",value:function(){return"#"+t.componentToHex(this.r)+t.componentToHex(this.g)+t.componentToHex(this.b)}},{key:"setRGBA255",value:function(e){this.r=e[0]/255,this.g=e[1]/255,this.b=e[2]/255,this.a=e[3],console.log("setRGBA255: ",e,this.r,this.g,this.b,this.a)}},{key:"getRGBA255",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a]}},{key:"setFromHex",value:function(e){e=e.replace(/[^0-9A-F]/gi,"");var t=parseInt(e,16);this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this.a=1}},{key:"setFromHSV",value:function(e,t,n){var i=0,r=0,a=0,o=Math.floor(6*e),s=6*e-o,l=n*(1-t),u=n*(1-s*t),c=n*(1-(1-s)*t);switch(o%6){case 0:i=n,r=c,a=l;break;case 1:i=u,r=n,a=l;break;case 2:i=l,r=n,a=c;break;case 3:i=l,r=u,a=n;break;case 4:i=c,r=l,a=n;break;case 5:i=n,r=l,a=u}this.r=i,this.g=r,this.b=a}},{key:"getRgbaString",value:function(){return"rgba("+Math.round(255*this.r)+", "+Math.round(255*this.g)+", "+Math.round(255*this.b)+", "+this.a+")"}}],[{key:"componentToHex",value:function(e){var t=(e*=255).toString(16);return 1===t.length?"0"+t:t}},{key:"fromHex",value:function(e){var n=new t;return n.setFromHex(e),n}},{key:"fromRGB255",value:function(e){var n=new t;return n.setRGBA255(e),n}},{key:"getRandom",value:function(){return new t(Math.random(),Math.random(),Math.random())}},{key:"colorFromString",value:function(e){var n=[],i=[];i[0]=e.substr(0,Math.floor(e.length/3)),i[1]=e.substr(Math.floor(e.length/3),Math.floor(2*e.length/3)),i[2]=e.substr(Math.floor(2*e.length/3),e.length);for(var r=0;r<i.length;r++)for(var a=0;a<i[r].length;a++)r in n||(n[r]=0),n[r]+=i[r].charCodeAt(a);return new t(n[0]/128%1,n[1]/128%1,n[2]/128%1,1)}},{key:"fromHSV",value:function(e,n,i){var r=new t;return r.setFromHSV(e,n,i),r}}]),t}(Q),J=function(e){function t(e){var n;return o()(this,t),(n=l()(this,c()(t).call(this)))._depthMask=!0,n._depthTest=!0,n._depthFunc=-1,n._culling=-1,n._cullingEnabled=!0,n._blendEquation=-1,n._blendEnabled=!0,n._sourceBlend=-1,n._destinationBlend=-1,n._renderer=e,n.setBlendEnabled(!n._blendEnabled),n.setCullingEnabled(!n._cullingEnabled),n.setDepthMask(!n._depthMask),n.setDepthTest(!n._depthTest),n.enabledAttribArrays=[],n._textureSlots=[],n}return d()(t,e),r()(t,[{key:"bindTextureToSlot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._textureSlots[t]!=e&&(this._renderer.context.activeTexture(E.TEXTURE0+t),this._renderer.context.bindTexture(E.TEXTURE_2D,e),this._textureSlots[t]=e)}},{key:"bindTexture3DToSlot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._textureSlots[t]!=e&&(this._renderer.context.activeTexture(E.TEXTURE0+t),this._renderer.context.bindTexture(O.TEXTURE_3D,e),this._textureSlots[t]=e)}},{key:"bindCubeTextureToSlot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._textureSlots[t]!=e&&(this._renderer.context.activeTexture(E.TEXTURE0+t),this._renderer.context.bindTexture(E.TEXTURE_CUBE_MAP,e),this._textureSlots[t]=e)}},{key:"setProgram",value:function(e){return e!=this._program&&(this._program=e,this._renderer.context.useProgram(this._program),!0)}},{key:"setDepthMask",value:function(e){e!=this._depthMask&&(this._renderer.context.depthMask(e),this._depthMask=e)}},{key:"getDepthMask",value:function(){return this._depthMask}},{key:"setDepthTest",value:function(e){e!=this._depthTest&&(e?this._renderer.context.enable(E.DEPTH_TEST):this._renderer.context.disable(E.DEPTH_TEST),this._depthTest=e)}},{key:"setDepthFunc",value:function(e){e!=this._depthFunc&&(e?this._renderer.context.depthFunc(e):this._renderer.context.depthFunc(this._renderer.context.LESS),this._depthFunc=e)}},{key:"setCullingEnabled",value:function(e){e!=this._cullingEnabled&&(e?this._renderer.context.enable(E.CULL_FACE):this._renderer.context.disable(E.CULL_FACE),this._cullingEnabled=e)}},{key:"setCulling",value:function(e){e!=this._culling&&(e==E.NONE?this.setCullingEnabled(!1):(this.setCullingEnabled(!0),this._renderer.context.cullFace(e)),this._culling=e)}},{key:"setBlendEquation",value:function(e){e!=this._blendEquation&&(this._renderer.context.blendEquation(e),this._blendEquation=e)}},{key:"setBlendEnabled",value:function(e){e!=this._blendEnabled&&(e?this._renderer.context.enable(E.BLEND):this._renderer.context.disable(E.BLEND),this._blendEnabled=e)}},{key:"setBlendFunc",value:function(e,t){e==this._sourceBlend&&t==this._destinationBlend||(this._renderer.context.blendFunc(e,t),this._sourceBlend=e,this._destinationBlend=t)}},{key:"setBlendFuncSeparate",value:function(e,t,n,i){this._renderer.context.blendFuncSeparate(e,t,n,i),this._sourceBlend=-1}}]),t}(v),ee=function(){function e(){o()(this,e),this.maxAnisotropy=0}return r()(e,[{key:"enableExtensions",value:function(t){this.color_buffer_float=e.enableExtension(t,"WEBGL_color_buffer_float")||e.enableExtension(t,"EXT_color_buffer_float"),this.color_buffer_half_float=e.enableExtension(t,"EXT_color_buffer_half_float"),this.texture_float=e.enableExtension(t,"OES_texture_float"),this.texture_float_linear=e.enableExtension(t,"OES_texture_float_linear"),this.texture_half_float=e.enableExtension(t,"OES_texture_half_float"),this.texture_half_float_linear=e.enableExtension(t,"OES_texture_half_float_linear"),this.shader_texture_lod=e.enableExtension(t,"EXT_shader_texture_lod"),this.standard_derivatives=e.enableExtension(t,"OES_standard_derivatives"),this.blend_minmax=e.enableExtension(t,"EXT_blend_minmax"),this.seamless_cube_map=e.enableExtension(t,"OES_seamless_cube_map"),this.vertex_array_object=e.enableExtension(t,"OES_vertex_array_object"),this.filter_anisotropic=e.enableExtension(t,"texture_filter_anisotropic"),this.filter_anisotropic||(this.filter_anisotropic=e.enableExtension(t,"MOZ_EXT_texture_filter_anisotropic")),this.filter_anisotropic||(this.filter_anisotropic=e.enableExtension(t,"WEBKIT_EXT_texture_filter_anisotropic")),this.filter_anisotropic&&(this.maxAnisotropy=t.getParameter(this.filter_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT),T.log("MAX_TEXTURE_MAX_ANISOTROPY_EXT: ",this.maxAnisotropy)),this.frag_depth=e.enableExtension(t,"EXT_frag_depth"),this.depth_texture=e.enableExtension(t,"WEBGL_depth_texture"),this.element_index_uint=e.enableExtension(t,"OES_element_index_uint"),this.enableTextureCompression(t)}},{key:"enableTextureCompression",value:function(t){var n=e.enableExtension(t,"WEBKIT_WEBGL_compressed_texture_s3tc");if(n){var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS);if(i.length>0)for(var r in i)i[r]===n.COMPRESSED_RGB_S3TC_DXT1_EXT&&T.log("support found for texture compression: RGB_S3TC_DXT1"),i[r]===n.COMPRESSED_RGBA_S3TC_DXT1_EXT&&T.log("support found for texture compression: RGBA_S3TC_DXT1"),i[r]===n.COMPRESSED_RGBA_S3TC_DXT3_EXT&&T.log("support found for texture compression: RGBA_S3TC_DXT3"),i[r]===n.COMPRESSED_RGBA_S3TC_DXT5_EXT&&T.log("support found for texture compression: RGBA_S3TC_DXT5");else T.log("no support found for texture compression ")}}},{key:"getMinMaxSupported",value:function(){return null!==this.blend_minmax}}],[{key:"enableExtension",value:function(e,t){var n=e.getExtension(t);return n?T.log("enabled extension "+t):T.log("extension "+t+" is not supported"),n}}]),e}(),te=function(){function e(){o()(this,e)}return r()(e,null,[{key:"cacheIsPathRequested",value:function(t){return e._clientCache[t]}},{key:"cacheRegisterRequested",value:function(t,n){e._clientCache[t]=n}},{key:"cacheRegisterCallback",value:function(t,n){e._clientCacheCallbacks[t]||(e._clientCacheCallbacks[t]=[]),e._clientCacheCallbacks[t].push(n)}},{key:"cacheRequestDone",value:function(t,n){var i=e._clientCacheCallbacks[t];if(i)for(var r=0;r<i.length;r++)i[r](n);e._clientCacheCallbacks[t]=null,e._clientCache[t]=!1}},{key:"cacheRequestError",value:function(t){var n=e._clientCacheCallbacks[t];if(n)for(var i=0;i<n.length;i++)n[i](null);e._clientCacheCallbacks[t]=null,e._clientCache[t]=!1}},{key:"loadText",value:function(t,n){if(e.cacheRegisterCallback(t,n),!e.cacheIsPathRequested(t)){var i=new XMLHttpRequest;e.cacheRegisterRequested(t,i),i.onreadystatechange=function(n){4===i.readyState&&(200===i.status?e.cacheRequestDone(t,i.responseText):e.cacheRequestError(t))},i.open("GET",t,!0),i.send()}}},{key:"loadArrayBuffer",value:function(t,n){if(e.cacheRegisterCallback(t,n),!e.cacheIsPathRequested(t)){var i=new XMLHttpRequest;e.cacheRegisterRequested(t,i),i.open("GET",t,!0),i.responseType="arraybuffer",i.send(),i.onreadystatechange=function(n){4===i.readyState&&e.cacheRequestDone(t,i.response)}}}},{key:"loadImage",value:function(t,n){if(e.cacheRegisterCallback(t,n),e.cacheIsPathRequested(t))return e.cacheIsPathRequested(t);var i=new Image;return e.cacheRegisterRequested(t,i),i.crossOrigin="Anonymous",i.onload=function(){e.cacheRequestDone(t,i)},i.onerror=function(){console.log("TextureLoader: could not load image",t),e.cacheRequestDone(t,i)},i.src=t,i}},{key:"loadMultipleImages",value:function(t,n){for(var i=this,r=t.length,a=[],o=function(e){return function(t){r--,a[e]=t,0===r&&n.call(i,a)}},s=0;s<t.length;++s)e.loadImage(t[s],o(s))}},{key:"loadSingleFromRequireContext",value:function(e,t){return new Promise(function(n,i){var r;try{r=e("./".concat(t.replace(/^\.\//,"")))}catch(a){i(a)}"function"===typeof r?r(n):n(r)})}},{key:"loadFromRequireContext",value:function(t,n,i){Promise.all(n.map(function(n){return e.loadSingleFromRequireContext(t,n)})).then(function(e){return i(e)})}},{key:"loadMultipleTexts",value:function(t,n){for(var i=this,r=t.length,a=[],o=function(e){return function(t){r--,a[e]=t,0===r&&n.apply(i,a)}},s=0;s<t.length;++s)e.loadText(t[s],o(s))}}]),e}();te._clientCache={},te._clientCacheCallbacks={};var ne=function(){function e(){o()(this,e),this.webpackContexts=[],this.assetNameMap={},this.assetPathMap={}}return r()(e,[{key:"loadAssetByPath",value:function(e){var t=this.getAssetByPath(e);return te.loadSingleFromRequireContext(t.webpackContext,t.path)}},{key:"getAssetByPath",value:function(e){var t="./".concat(e.replace(/^\.\//,""));if("undefined"===typeof this.assetPathMap[t])throw new ReferenceError("Could not find asset with path ".concat(e,". Available paths: \n").concat(Object.keys(this.assetPathMap).join("\n")));return{webpackContext:this.webpackContexts[this.assetPathMap[t]],path:t}}},{key:"loadAssetByName",value:function(e){var t=this.getAssetByName(e);return te.loadSingleFromRequireContext(t.webpackContext,t.path)}},{key:"getAssetByName",value:function(e){if("undefined"===typeof this.assetNameMap[e])throw new ReferenceError('Could not find asset with name "'.concat(e,'". Available assets: \n').concat(Object.keys(this.assetNameMap.vs).join(", ")));return{webpackContext:this.webpackContexts[this.assetNameMap[e].contextIndex],path:this.assetNameMap[e].path}}},{key:"addContext",value:function(e){var t=this;if(!(this.webpackContexts.indexOf(e)>=0)){var n=this.webpackContexts.length;this.webpackContexts.push(e),e.keys().forEach(function(e){var i=e.match(/([^\\\/]+)$/);if(i){if(t.assetNameMap[i[1]]){var r=t.webpackContexts[t.assetNameMap[i[1]].contextIndex].resolve(t.assetNameMap[i[1]].path);console.warn('WARNING: found asset "'.concat(e,'" but another asset with the name "').concat(i[1],'" was already found at "').concat(r,'"'))}t.assetNameMap[i[1]]={contextIndex:n,path:e}}t.assetPathMap[e]=n})}}}]),e}(),ie=function(){function e(){o()(this,e)}return r()(e,null,[{key:"posMod",value:function(e,t){return(e%t+t)%t}},{key:"fract",value:function(e){return e-Math.floor(e)}},{key:"lerp",value:function(e,t,n){return(1-n)*e+n*t}},{key:"clamp01",value:function(e){return e<0?0:e>1?1:e}},{key:"gain01",value:function(e,t){return e>.5?1-.5*Math.pow(2-2*e,t):.5*Math.pow(2*e,t)}},{key:"smootherStep01",value:function(e){return e*e*e*(e*(6*e-15)+10)}},{key:"smoothStep01",value:function(t){return(t=e.clamp(t,0,1))*t*(3-2*t)}},{key:"invSmoothStep01",value:function(e){return e+(e-e*e*(3-2*e))}},{key:"smoothStep",value:function(t,n,i){return(i=e.clamp((i-t)/(n-t),0,1))*i*(3-2*i)}},{key:"step",value:function(t,n,i){return e.clamp01((i-t)/(n-t))}},{key:"nearestPowerOfTwo",value:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.log(2)))}},{key:"smallerPowerOfTwo",value:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.log(2)))}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"degToRad",value:function(e){return e*(Math.PI/180)}},{key:"radToDeg",value:function(e){return e*(180/Math.PI)}},{key:"latLongToCartesian",value:function(e,t,n,i){var r=this.degToRad(t),a=this.degToRad(n)+Math.PI;return e.z=i*Math.cos(r)*Math.cos(a),e.x=i*Math.cos(r)*Math.sin(a),e.y=i*Math.sin(r),e}}]),e}(),re=function(){function e(){o()(this,e),this.averageFps=60,this._manualUpdate=!1,e._instance&&alert("do not create additional instances of the time class"),this.fps=60,this.deltaTime=1/this.fps,this.time=0,this.update()}return r()(e,[{key:"updateManual",value:function(){this._manualUpdate=!0,this.updateDeltaTime()}},{key:"update",value:function(){var e=this;this._manualUpdate||(this.updateDeltaTime(),window.requestAnimationFrame(function(t){return e.update()}))}},{key:"updateDeltaTime",value:function(){var e=performance.now();this.deltaTime=.001*e-this.time,this.deltaTime>.05&&(this.deltaTime=.05),0===this.deltaTime&&(this.deltaTime=1/60),this.time=.001*e,this.fps=1/this.deltaTime,this.averageFps>0?this.averageFps=ie.lerp(this.fps,this.averageFps,.95):this.averageFps=1/60}},{key:"testPerformance",value:function(e){console.time("timer0"),e.call(this),console.timeEnd("timer0")}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}(),ae=function e(){o()(this,e),this.down=!1,this.downThisFrame=!1,this.downByTouch=!1,this.clickCanceled=!1,this.downTime=0},oe=function(e){function t(e){var n;o()(this,t),(n=l()(this,c()(t).call(this)))._mousePos=new P,n._previousMousePos=new P,n._mouseVelocity=new P,n._normalized=new P,n._screen=new P,n._wheelCallbacks=[],n._mouseClickCallbacks=[],n._mouseDownCallbacks=[],n._buttons=[],n._manualUpdate=!1,n._resetSpeed=!1,n._preventDefault=!1,n._touchStartListener=function(e){n._preventDefault&&e.preventDefault(),n._resetSpeed=!0,n.mouseDown(0),n._buttons[0].downByTouch=!0,n.setMousePosition(e.targetTouches[0]);for(var t=0;t<n._mouseDownCallbacks.length;t++)n._mouseDownCallbacks[t].call(g()(n))},n._touchMoveListener=function(e){n.setMousePosition(e.targetTouches[0]),n._preventDefault&&e.preventDefault()},n._endListener=function(){for(var e=0;e<n._buttons.length;e++)n._buttons[e].down=!1,n._buttons[e].downThisFrame=!1,n._buttons[e].downByTouch=!1},n._mouseDownListener=function(e){n._preventDefault&&e.preventDefault(),n.mouseDown(e.which-1),n.setMousePosition(e);for(var t=0;t<n._mouseDownCallbacks.length;t++)n._mouseDownCallbacks[t].call(g()(n))},n._mouseMoveListener=function(e){n.setMousePosition(e);for(var t=0;t<3;t++)n._buttons[t].downTime>.25&&(n._buttons[t].clickCanceled=!0)},n._mouseWheelListener=function(e){for(var t=0;t<n._wheelCallbacks.length;t++)n._wheelCallbacks[t].call(g()(n),Math.sign(-e.deltaY))},n._upListener=function(){if(n._resetSpeed=!0,!n._buttons[0].clickCanceled)for(var e=0;e<n._mouseClickCallbacks.length;e++)n._mouseClickCallbacks[e].call(g()(n));for(var t=0;t<n._buttons.length;t++)n._buttons[t].down=!1,n._buttons[t].downThisFrame=!1,n._buttons[t].downByTouch=!1},n._canvas=e;for(var i=0;i<3;i++)n._buttons.push(new ae);return window.addEventListener("touchstart",n._touchStartListener,!1),window.addEventListener("touchmove",n._touchMoveListener,{passive:!1}),window.addEventListener("touchend",n._upListener,!1),window.addEventListener("touchcancel",n._endListener,!1),window.addEventListener("mousedown",n._mouseDownListener,!1),window.addEventListener("mousemove",n._mouseMoveListener,!1),window.addEventListener("mouseup",n._upListener,!1),window.addEventListener("mousecancel",n._endListener,!1),window.addEventListener("mouseout",n._endListener,!1),window.addEventListener("wheel",n._mouseWheelListener,!1),n.updateLoop(),n}return d()(t,e),r()(t,[{key:"setPreventDefault",value:function(e){this._preventDefault=e}},{key:"mouseDown",value:function(e){this._resetSpeed=!0,this._buttons[e].down=!0,this._buttons[e].downThisFrame=!0,this._buttons[e].clickCanceled=!1,this._buttons[e].downByTouch=!1,this._buttons[e].downTime=0}},{key:"addWheelEvent",value:function(e){this._wheelCallbacks.push(e)}},{key:"addMouseClickEvent",value:function(e){this._mouseClickCallbacks.push(e)}},{key:"addMouseDownEvent",value:function(e){this._mouseDownCallbacks.push(e)}},{key:"setMousePosition",value:function(e){this._mousePos.x=e.pageX,this._mousePos.y=e.pageY}},{key:"getPixelPos",value:function(){return this._mousePos}},{key:"getNormalizedPos",value:function(){return this._normalized}},{key:"getScreenPos",value:function(){return this._screen}},{key:"getNormalizedVelocity",value:function(){return this._mouseVelocity}},{key:"getButton",value:function(e){return this._buttons[e]}},{key:"getMouseDown",value:function(){return this._buttons[0].down}},{key:"getMouseDownThisFrame",value:function(){return this._buttons[0].downThisFrame}},{key:"getMouseDownRight",value:function(){return this._buttons[2].down}},{key:"getMouseDownThisFrameRight",value:function(){return this._buttons[2].downThisFrame}},{key:"updateManual",value:function(){this._manualUpdate=!0,this.update()}},{key:"updateLoop",value:function(){var e=this;this.isDestructed||this._manualUpdate||(this.update(),window.requestAnimationFrame(function(){return e.updateLoop()}))}},{key:"update",value:function(){this._normalized.x=this._mousePos.x/this._canvas.clientWidth,this._normalized.y=this._mousePos.y/this._canvas.clientHeight,this._screen.x=2*this._normalized.x-1,this._screen.y=-(2*this._normalized.y-1),this._resetSpeed?(this._resetSpeed=!1,this._mouseVelocity.setValues(0,0)):(this._mouseVelocity.x=this._normalized.x-this._previousMousePos.x,this._mouseVelocity.y=this._normalized.y-this._previousMousePos.y),this._previousMousePos.copy(this._normalized);for(var e=0;e<3;e++){var t=this._buttons[e];t.downTime>0&&(t.downThisFrame=!1),this._buttons[e].down&&(t.downTime+=re.getInstance().deltaTime)}}},{key:"cancelClick",value:function(){for(var e=0;e<this._buttons.length;e++)this._buttons[e].clickCanceled=!0}},{key:"destruct",value:function(){this._canvas&&(window.removeEventListener("touchstart",this._touchStartListener,!1),window.removeEventListener("touchmove",this._touchMoveListener,!1),window.removeEventListener("touchend",this._upListener,!1),window.removeEventListener("touchcancel",this._endListener,!1),window.removeEventListener("mousedown",this._mouseDownListener,!1),window.removeEventListener("mousemove",this._mouseMoveListener,!1),window.removeEventListener("mouseend",this._endListener,!1),window.removeEventListener("mousecancel",this._endListener,!1),window.removeEventListener("mouseout",this._endListener,!1),window.removeEventListener("wheel",this._mouseWheelListener,!1),window.removeEventListener("mouseup",this._upListener,!1)),p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v),se=n(758),le=function(e){function t(e,n,i,r,a){var s,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];if(o()(this,t),(s=l()(this,c()(t).call(this))).textureCount=0,s.isWebgl2=!1,s._renderWidth=1,s._renderHeight=1,s._renderSize=new P,s.handleCanvasResize=function(){s.setRenderSize(s.getCanvas().width,s.getCanvas().height)},s.id=t._id++,null===r?s.shaderIndex=new ne:"function"===typeof r?(s.shaderIndex=new ne,s.shaderIndex.addContext(r)):s.shaderIndex=r,s.shaderIndex.addContext(se),s._canvas=n,s._canvas.addEventListener("resize",s.handleCanvasResize),i===t.webgl2ContextName?s.isWebgl2=!0:u||s.getAlphaIsCorrect()||(u=!0),s.context=s.getCanvas().getContext(i,{alpha:u,stencil:d,preserveDrawingBuffer:!h,premultipliedAlpha:f,antialias:a}),!s.context)throw new Error("could not get a 3d context: aborting");return s.maxParams=new Y(s.context),s.renderState=new J(g()(s)),t.staticExtensionManager=s.extensionManager=new ee,s.extensionManager.enableExtensions(s.context),s._copyTextureMaterial=new U(g()(s),e,"default"),s._copyTextureMaterial.depthTest=!1,s._copyTextureMaterial.depthWrite=!1,s._clearColor=new Z(.5,.5,.5,1),s._blitMesh=s.createTriangle(),s}return d()(t,e),r()(t,[{key:"getAlphaIsCorrect",value:function(){var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("experimental-webgl",{alpha:!1,preserveDrawingBuffer:!1});t.clearColor(1,0,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);var n=document.createElement("canvas").getContext("2d");n.drawImage(e,0,0);var i=255===n.getImageData(0,0,1,1).data[3];return i||T.log("alpha bug detected"),i}},{key:"init",value:function(){T.log("renderer: textureCount",this.textureCount),this.unSetRenderTexture(),this.handleCanvasResize()}},{key:"getRenderContext",value:function(){throw new ReferenceError("GetRenderContext(): no implementation defined, no context available.")}},{key:"preprocessShaderString",value:function(e){return e}},{key:"draw",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"startBatch",value:function(e,t){}},{key:"drawElements",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"endBatch",value:function(){}},{key:"createTriangle",value:function(){var e=new X(this),t=new Float32Array([-1,-1,0,-1,3,0,3,-1,0]);e.setPositions(t);var n=new Float32Array([0,0,0,2,2,0]);e.setUV0(n);var i=new Uint16Array([0,2,1]);return e.setIndices(i),e}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getMouseListener",value:function(){return this._mouseListener||(this._mouseListener=new oe(this.getCanvas())),this._mouseListener}},{key:"getRenderWidth",value:function(){return this._renderWidth}},{key:"getRenderHeight",value:function(){return this._renderHeight}},{key:"getRenderSize",value:function(){return this._renderSize}},{key:"enablePointsprites",value:function(){this.context.enable(34370)}},{key:"blit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=n||this._copyTextureMaterial;t&&this.setRenderTexture(t),e&&r.setTexture("uTexture",e),i&&this.clear(),this.draw(this._blitMesh,r),t&&this.unSetRenderTexture()}},{key:"setRenderTexture",value:function(e){e.scaleToCanvas&&e.setSize(Math.round(this.getCanvas().width*e.sizeMultiplier),Math.round(this.getCanvas().height*e.sizeMultiplier)),e.setAsTarget(),this.setRenderSize(e.width,e.height)}},{key:"unSetRenderTexture",value:function(){var e=this.context;e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),this.setRenderSize(this.getCanvas().width,this.getCanvas().height)}},{key:"clearWithColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.context.clearColor(e,t,n,i),this.clear(),this.context.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)}},{key:"clearRenderTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.setRenderTexture(e),this.clearWithColor(t,n,i,r),this.unSetRenderTexture()}},{key:"getAspect",value:function(){return this._renderWidth/this._renderHeight}},{key:"clearDepth",value:function(){this.renderState.setDepthMask(!0),this.context.clear(E.DEPTH_BUFFER_BIT)}},{key:"setClearColor",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._clearColor.setValues(e,t,n,i),this.context.clearColor(e,t,n,i)}},{key:"getClearColor",value:function(){return this._clearColor}},{key:"clear",value:function(){this.context.depthMask(!0),this.context.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT),this.context.depthMask(this.renderState.getDepthMask())}},{key:"setRenderSize",value:function(e,t){this._renderWidth===e&&this._renderHeight===t||(this._renderWidth=e,this._renderHeight=t,this._renderSize.x=e,this._renderSize.y=t,this.context.viewport(0,0,this._renderWidth,this._renderHeight))}},{key:"setScissor",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e=ie.clamp01(e),t=ie.clamp01(t);var a=(n=ie.clamp01(n))-e,o=(i=ie.clamp01(i))-t,s=this._renderWidth,l=this._renderHeight;this.context.enable(E.SCISSOR_TEST),this.context.scissor(e*s,t*l,a*s,o*l),r&&this.context.viewport(e*s,t*l,a*s,o*l)}},{key:"setScissorPixels",value:function(e,t,n,i){this.context.enable(E.SCISSOR_TEST),this.context.scissor(e,t,n-e,i-t)}},{key:"unSetScissor",value:function(){this.context.disable(E.SCISSOR_TEST)}},{key:"setViewPort",value:function(e,t,n,i){this._renderWidth=n,this._renderHeight=i,this.context.viewport(e,t,this._renderWidth,this._renderHeight)}},{key:"unsetViewPort",value:function(){this.context.viewport(0,0,this._canvas.width,this._canvas.height)}},{key:"setChannelMask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.context.colorMask(e,t,n,i)}},{key:"clearChannelMask",value:function(){this.context.colorMask(!0,!0,!0,!0)}},{key:"setStencilEnabled",value:function(e){e?this.context.enable(E.STENCIL_TEST):this.context.disable(E.STENCIL_TEST)}},{key:"startDrawToStencil",value:function(){var e=this.context;this.setStencilEnabled(!0),e.stencilFunc(E.ALWAYS,1,255),e.stencilOp(E.KEEP,E.KEEP,E.REPLACE),e.stencilMask(255)}},{key:"setStencilFuncEqual",value:function(e){this.context.stencilFunc(e?E.EQUAL:E.NOTEQUAL,1,255)}},{key:"destructVAO",value:function(e){}},{key:"destruct",value:function(){if(!this.isDestructed){T.log("Renderer: destruct");for(var e=this.context,n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),i=0;i<n;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null);e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(null);var r=e.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._blitMesh&&this._blitMesh.destruct(),this._copyTextureMaterial&&this._copyTextureMaterial.destruct(),this._canvas.removeEventListener("resize",this.handleCanvasResize),this._mouseListener&&this._mouseListener.destruct(),p()(c()(t.prototype),"destruct",this).call(this)}}}]),t}(v);le._id=0,le.webgl2ContextName="webgl2",le.webgl1ContextName="experimental-webgl";var ue=le,ce=function(e){function t(e,n,i,r){var a,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return o()(this,t),(a=l()(this,c()(t).call(this,e,n,"webgl2",i,r,s,u,h)))._vertexArrayObjects={},a._vertexArrayObjects={},a}return d()(t,e),r()(t,[{key:"init",value:function(){p()(c()(t.prototype),"init",this).call(this)}},{key:"getRenderContext",value:function(){return this.context}},{key:"preprocessShaderString",value:function(e){var t=e.indexOf("#version"),n="";return t>-1&&(n=e.substr(t,e.indexOf("\n",t)-t)),e=n+"\n#define WEBGL2\n"+(e=e.replace(n,""))}},{key:"getVAO",value:function(e,t){var n=null,i=this._vertexArrayObjects[e.id];return i?(n=i[t.id])||(n=this.initVAO(e,t),i[t.id]=n):(i=[],n=this.initVAO(e,t),i[t.id]=n,this._vertexArrayObjects[e.id]=i),n}},{key:"initVAO",value:function(e,t){var n=this.getRenderContext(),i=n.createVertexArray();n.bindVertexArray(i);var r=0;e.isInterleaved()&&(e.interleaveData(),this.context.bindBuffer(this.context.ARRAY_BUFFER,e.interleavedBuffer));for(var a=0;a<e.attributes.length;a++){var o=e.attributes[a],s=t.shader.getAttributeByName(o.name);if(s){if(o.stride!==s.stride){T.log("Renderer: initVAO: strides don't match: ",o.stride,s.stride);continue}if(e.isInterleaved())n.enableVertexAttribArray(s.loc),n.vertexAttribPointer(s.loc,s.stride,n.FLOAT,!1,4*e.interleavedStrideSum,r);else{if(void 0===o.buffer)throw new ReferenceError("Expected buffer to be defined on VertexAttribute on non-interleaved mesh.");n.bindBuffer(n.ARRAY_BUFFER,o.buffer),n.enableVertexAttribArray(s.loc),n.vertexAttribPointer(s.loc,s.stride,n.FLOAT,!1,4*s.stride,0)}}e.interleaved&&(r+=4*o.stride)}return e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i}},{key:"draw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;t.setActive();var r=this.getVAO(e,t);this.context.bindVertexArray(r),this.drawElements(e,t,n,i)}},{key:"startBatch",value:function(e,t){t.setActive();var n=this.getVAO(e,t);this.getRenderContext().bindVertexArray(n)}},{key:"drawElements",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(e.hasIndices()){var r=e.indices.length;i>0?this.context.drawElements(t.drawType,Math.min(r,i),e.indexType,0):this.context.drawElements(t.drawType,r,e.indexType,0)}else{var a=e.getNumVertices()-n;i>0?this.context.drawArrays(t.drawType,n,Math.min(a,i)):this.context.drawArrays(t.drawType,n,a)}}},{key:"drawInstanced",value:function(e,t,n,i){t.setActive();var r=this._vertexArrayObjects&&void 0!==this._vertexArrayObjects[e.id]&&void 0!==this._vertexArrayObjects[e.id][t.id],a=this.getVAO(e,t),o=this.getRenderContext();if(o.bindVertexArray(a),!r)for(var s=0;s<i.attributes.length;++s){var l=i.attributes[s];o.bindBuffer(o.ARRAY_BUFFER,l.buffer),o.enableVertexAttribArray(l.index),o.vertexAttribPointer(l.index,l.nrComponents,o.FLOAT,!1,l.bufferStride,l.bufferOffset),o.vertexAttribDivisor(l.index,1)}e.hasIndices()?o.drawElementsInstanced(t.drawType,e.indices.length,e.indexType,0,n):o.drawArraysInstanced(t.drawType,0,e.getNumVertices(),n)}},{key:"destruct",value:function(){if(!this.isDestructed){if(T.log("RendererWebGL2: destruct"),this._vertexArrayObjects)for(var e in this._vertexArrayObjects)for(var n=0;n<this._vertexArrayObjects[e].length;++n)this.getRenderContext().deleteVertexArray(this._vertexArrayObjects[e][n]);p()(c()(t.prototype),"destruct",this).call(this)}}}]),t}(ue),he=function(){function e(){o()(this,e)}return r()(e,null,[{key:"checkFloatCompatibility",value:function(t,n){if(!t.extensionManager.texture_float)if(t.extensionManager.texture_half_float){if(n===e.RGB_FLOAT)return e.RGB_HALF_FLOAT;if(n===e.RGBA_FLOAT)return e.RGBA_HALF_FLOAT}else console.log("Texture: setFormatType: not supported: ",n);return n}},{key:"checkHalfFloatCompatibility",value:function(t,n){if(!t.extensionManager.texture_half_float)if(t.extensionManager.texture_float){if(n===e.RGB_HALF_FLOAT)return e.RGB_FLOAT;if(n===e.RGBA_HALF_FLOAT)return e.RGBA_FLOAT}else console.log("Texture: setFormatType: not supported: ",n);return n}},{key:"validateFormatType",value:function(t,n){switch(n){case e.RGB_FLOAT:n=this.checkFloatCompatibility(t,n);case e.RGBA_FLOAT:n=this.checkFloatCompatibility(t,n);case e.RGBA_HALF_FLOAT:n=this.checkHalfFloatCompatibility(t,n);case e.RGB_HALF_FLOAT:n=this.checkHalfFloatCompatibility(t,n)}return n}},{key:"getFormat",value:function(t,n){switch(n){case e.RGBA_UNSIGNED_BYTE:return E.RGBA;case e.RGB_UNSIGNED_BYTE:case e.RGB_FLOAT:return E.RGB;case e.RGBA_FLOAT:case e.RGBA_HALF_FLOAT:return E.RGBA;case e.RGB_HALF_FLOAT:return E.RGB;case e.RG_HALF_FLOAT:return O.RG;case e.LUMINANCE_UNSIGNED_BYTE:case e.LUMINANCE_FLOAT:case e.LUMINANCE_HALF_fLOAT:return t instanceof ce?O.RED:E.LUMINANCE;case e.DEPTH_UINTSHORT:case e.DEPTH_FLOAT:return E.DEPTH_COMPONENT;default:return T.error("can not yet get format for formatType: ",n),-1}}},{key:"getType",value:function(t,n){switch(n){case e.RGBA_UNSIGNED_BYTE:case e.RGB_UNSIGNED_BYTE:return E.UNSIGNED_BYTE;case e.RGBA_FLOAT:case e.RGB_FLOAT:return E.FLOAT;case e.RGBA_HALF_FLOAT:case e.RGB_HALF_FLOAT:case e.RG_HALF_FLOAT:return e.getHalfFloatType(t);case e.LUMINANCE_UNSIGNED_BYTE:return E.UNSIGNED_BYTE;case e.LUMINANCE_FLOAT:return E.FLOAT;case e.LUMINANCE_HALF_fLOAT:return e.getHalfFloatType(t);case e.DEPTH_UINTSHORT:return E.UNSIGNED_SHORT;case e.DEPTH_FLOAT:return E.FLOAT;default:return T.error("can not yet get type for formatType: ",n),-1}}},{key:"getHalfFloatType",value:function(e){if(e instanceof ce)return O.HALF_FLOAT;var t=e.extensionManager.texture_half_float;return t?t.HALF_FLOAT_OES:-1}},{key:"getInternalFormat",value:function(t){switch(t){case e.RGBA_UNSIGNED_BYTE:return O.RGBA8;case e.RGB_UNSIGNED_BYTE:return O.RGB8;case e.RGBA_FLOAT:return O.RGBA32F;case e.RGB_FLOAT:return O.RGB32F;case e.RGBA_HALF_FLOAT:return O.RGBA16F;case e.RGB_HALF_FLOAT:return O.RGB16F;case e.RG_HALF_FLOAT:return O.RG16F;case e.LUMINANCE_UNSIGNED_BYTE:return O.R8;case e.LUMINANCE_FLOAT:return O.R32F;case e.LUMINANCE_HALF_fLOAT:return O.R16F;case e.DEPTH_UINTSHORT:return O.DEPTH_COMPONENT24;case e.DEPTH_FLOAT:return O.DEPTH_COMPONENT32F;default:return T.error("can not yet get type for formatType: ",t),-1}}},{key:"getBytesPerPixel",value:function(t){switch(t){case e.RGBA_UNSIGNED_BYTE:return 4;case e.RGB_UNSIGNED_BYTE:return 3;case e.RGB_FLOAT:return 12;case e.RGBA_FLOAT:return 16;case e.RGBA_HALF_FLOAT:return 8;case e.RGB_HALF_FLOAT:return 6;case e.RG_HALF_FLOAT:return 4;case e.LUMINANCE_UNSIGNED_BYTE:return 1;case e.LUMINANCE_FLOAT:return 4;case e.LUMINANCE_HALF_fLOAT:case e.DEPTH_UINTSHORT:return 2;case e.DEPTH_FLOAT:default:return 4}}}]),e}();he.ALPHA_UNSIGNED_BYTE="ALPHA UNSIGNED_BYTE",he.ALPHA_FLOAT="ALPHA FLOAT",he.RGBA_UNSIGNED_BYTE="RGBA UNSIGNED_BYTE",he.RGBA_FLOAT="RGBA FLOAT",he.RGBA_HALF_FLOAT="RGBA HALF_FLOAT",he.RGB_HALF_FLOAT="RGB HALF_FLOAT",he.RGB_UNSIGNED_BYTE="RGB UNSIGNED_BYTE",he.RGB_FLOAT="RGB_FLOAT",he.LUMINANCE_UNSIGNED_BYTE="LUMINANCE UNSIGNED_BYTE",he.LUMINANCE_FLOAT="LUMINANCE FLOAT",he.LUMINANCE_HALF_fLOAT="LUMINANCE HALF_FLOAT",he.DEPTH_UINTSHORT="DEPTH_UINTSHORT",he.DEPTH_FLOAT="DEPTH_FLOAT",he.RG_HALF_FLOAT="RG HALF_FLOAT";var de=function(e){function t(e){var n;o()(this,t),(n=l()(this,c()(t).call(this))).renderer=e,n.renderer.textureCount++;var i=n.renderer.context;return n.textureGL=i.createTexture(),n}return d()(t,e),r()(t,[{key:"bindToSlot",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"setSize",value:function(e,t,n){}},{key:"destruct",value:function(){if(!this.isDestructed){var e=this.renderer.context;this.textureGL&&e.deleteTexture(this.textureGL)}p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v),fe=function(e){function t(e,n,i,r){var a,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return o()(this,t),(a=l()(this,c()(t).call(this,e,n,ue.webgl1ContextName,i,r,s,u,h,d)))._vertexArrayObjects={},a}return d()(t,e),r()(t,[{key:"init",value:function(){p()(c()(t.prototype),"init",this).call(this)}},{key:"getRenderContext",value:function(){return this.context}},{key:"preprocessShaderString",value:function(e){return"#define WEBGL1\n"+e}},{key:"initVAO",value:function(e,t){var n=this.extensionManager.vertex_array_object,i=n.createVertexArrayOES();return n.bindVertexArrayOES(i),this.setStates(e,t),n.bindVertexArrayOES(null),i}},{key:"setStates",value:function(e,t){var n=this.context;if(e.isInterleaved()){e.interleaveData(),n.bindBuffer(n.ARRAY_BUFFER,e.interleavedBuffer);for(var i=0,r=0;r<e.attributes.length;r++){var a=e.attributes[r],o=t.shader.getAttributeByName(a.name);o&&(n.enableVertexAttribArray(o.loc),n.vertexAttribPointer(o.loc,o.stride,n.FLOAT,!1,4*e.interleavedStrideSum,i)),i+=4*a.stride}}else for(var s=0;s<e.attributes.length;s++){var l=e.attributes[s],u=t.shader.getAttributeByName(l.name);if(u){if(void 0===l.buffer)throw new ReferenceError("Expected buffer to be defined on VertexAttribute when setting states.");n.bindBuffer(n.ARRAY_BUFFER,l.buffer),n.enableVertexAttribArray(u.loc),n.vertexAttribPointer(u.loc,u.stride,n.FLOAT,!1,4*u.stride,0)}}e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)}},{key:"destructVAO",value:function(e){var t=this.extensionManager.vertex_array_object;if(t){var n=this._vertexArrayObjects[e.id];for(var i in n){var r=n[i];t.deleteVertexArrayOES(r)}this._vertexArrayObjects[e.id]=[]}}},{key:"getVAO",value:function(e,t){var n,i=this._vertexArrayObjects[e.id];return i?(n=i[t.id])||(n=this.initVAO(e,t),i[t.id]=n):(i={},n=this.initVAO(e,t),i[t.id]=n,this._vertexArrayObjects[e.id]=i),n}},{key:"bindVAO",value:function(e){var t=this.extensionManager.vertex_array_object;e!=this._currentVAO&&(t.bindVertexArrayOES(e),this._currentVAO=e)}},{key:"drawVAO",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;n.setActive(),this.bindVAO(e),this.drawElements(t,n,i,r),this.bindVAO(null)}},{key:"draw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(t.setActive(),!this.extensionManager.vertex_array_object||e.isDynamic)this.setStates(e,t),this.drawElements(e,t,n,i);else{var r=this.getVAO(e,t);this.bindVAO(r),this.drawElements(e,t,n,i),this.bindVAO(null)}}},{key:"startBatch",value:function(e,t){t.setActive(),this.extensionManager.vertex_array_object?this.extensionManager.vertex_array_object.bindVertexArrayOES(this.getVAO(e,t)):this.setStates(e,t)}},{key:"drawElements",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(e.indices){if(void 0===e.indexType)throw new ReferenceError("expected mesh.indexType to be set on a mesh with indices");i>0?this.context.drawElements(t.drawType,Math.min(i,e.indices.length),e.indexType,n*(e.indexType==E.UNSIGNED_SHORT?2:4)):this.context.drawElements(t.drawType,e.indices.length,e.indexType,0)}else{var r=e.getNumVertices()-n;i>0?this.context.drawArrays(t.drawType,n,Math.min(r,i)):this.context.drawArrays(t.drawType,n,r)}}},{key:"endBatch",value:function(){this.extensionManager.vertex_array_object&&this.extensionManager.vertex_array_object.bindVertexArrayOES(null)}},{key:"destruct",value:function(){if(!this.isDestructed){T.log("RendererWebGL1: destruct");var e=this.extensionManager.vertex_array_object;if(e&&this._vertexArrayObjects)for(var n=0;n<this._vertexArrayObjects.length;n++)e.deleteVertexArrayOES(this._vertexArrayObjects[n]);p()(c()(t.prototype),"destruct",this).call(this)}}}]),t}(ue),pe=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he.RGBA_UNSIGNED_BYTE,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(o()(this,t),(n=l()(this,c()(t).call(this,e))).name="unnamed",n._width=-1,n._height=-1,n._size=new P,n.internalFormat=-1,n.filterLinearEnabled=!0,n.useMips=!1,n._mipsCreated=!1,n.wrapModeClamp=!0,e instanceof fe)n.formatType=he.validateFormatType(e,i);else{if(!(e instanceof ce))throw new Error("Could not determine type of renderer");n.formatType=i,n.internalFormat=he.getInternalFormat(i)}return n._format=he.getFormat(n.renderer,n.formatType),n._type=he.getType(n.renderer,n.formatType),n.useMips=r,a?n.setFilteringLinear():n.setFilteringNearest(),n.setWrapModeClamp(s),n}return d()(t,e),r()(t,[{key:"bindToSlot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.renderer.renderState.bindTextureToSlot(this.textureGL,e)}},{key:"bind",value:function(){this.renderer.context.activeTexture(E.TEXTURE0+this.renderer.maxParams.MAX_TEXTURE_IMAGE_UNITS-1),this.renderer.context.bindTexture(E.TEXTURE_2D,this.textureGL)}},{key:"setSize",value:function(e,t){if(e!==this.width||t!==this.height){if(this._width=e,this._height=t,this.bind(),this.renderer instanceof fe){var n=this.renderer.context;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,0),n.texImage2D(E.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,null)}else if(this.renderer instanceof ce){var i=this.renderer.context;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,0),i.texImage2D(E.TEXTURE_2D,0,this.internalFormat,this.width,this.height,0,this.format,this.type,null)}T.log("expensive operation: resize: ",e,t,"format: ",this.format)}}},{key:"getSize",value:function(){return this._size.setValues(this.width,this.height),this._size}},{key:"setFilteringLinear",value:function(){this.setFiltering(!0)}},{key:"setFilteringNearest",value:function(){this.setFiltering(!1)}},{key:"setFiltering",value:function(e){this.filterLinearEnabled=e;var t,n=this.renderer.context;this.bind(),t=this._mipsCreated?e?E.LINEAR_MIPMAP_LINEAR:E.NEAREST_MIPMAP_LINEAR:e?E.LINEAR:E.NEAREST,n.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,e?E.LINEAR:E.NEAREST),n.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,t)}},{key:"setFilterAnisotropic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;if(this.setFilteringLinear(),this.renderer.extensionManager.filter_anisotropic){var t=this.renderer.context;e=Math.min(this.renderer.extensionManager.maxAnisotropy,e),t.texParameterf(t.TEXTURE_2D,this.renderer.extensionManager.filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e)}}},{key:"setWrapModeClamp",value:function(e){this.wrapModeClamp=e;var t=this.renderer.context;this.bind();var n=e?E.CLAMP_TO_EDGE:E.REPEAT;t.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,n),t.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,n)}},{key:"setWrapModeClampHorizontal",value:function(e){this.setWrapModeClampForDirection(e,E.TEXTURE_WRAP_S)}},{key:"setWrapModeClampVertical",value:function(e){this.setWrapModeClampForDirection(e,E.TEXTURE_WRAP_T)}},{key:"setWrapModeClampForDirection",value:function(e,t){var n=this.renderer.context;this.bind();var i=e?E.CLAMP_TO_EDGE:E.REPEAT;n.texParameteri(E.TEXTURE_2D,t,i)}},{key:"generateMips",value:function(){if(this.renderer instanceof fe&&!t.isPOT(this.width,this.height))T.error("can't generate mips: npot: ",this.width,this.height);else{var e=this.renderer.context;this.bind(),e.generateMipmap(e.TEXTURE_2D),this.useMips=!0,this._mipsCreated=!0,this.filterLinearEnabled?this.setFilteringLinear():this.setFilteringNearest()}}},{key:"disableMips",value:function(){this.useMips=!1,this._mipsCreated=!1,this.filterLinearEnabled?this.setFilteringLinear():this.setFilteringNearest()}},{key:"setData",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.renderer.context;this.bind(),r.pixelStorei(E.UNPACK_ALIGNMENT,1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i?1:0),r.pixelStorei(E.UNPACK_COLORSPACE_CONVERSION_WEBGL,E.NONE),this.renderer instanceof fe?r.texImage2D(E.TEXTURE_2D,0,this.format,t,n,0,this.format,this.type,e):this.renderer instanceof ce&&r.texImage2D(E.TEXTURE_2D,0,this.internalFormat,t,n,0,this.format,this.type,e),this._width=t,this._height=n}},{key:"getData",value:function(e){var n,i=this.renderer.context;switch(e||(e=t.getFramebuffer(this.renderer)),i.bindFramebuffer(E.FRAMEBUFFER,e),i.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,this.textureGL,0),this.formatType){case he.RGBA_FLOAT:n=new Float32Array(this.width*this.height*4);break;case he.RGB_FLOAT:n=new Float32Array(this.width*this.height*3);break;case he.RGBA_UNSIGNED_BYTE:n=new Uint8Array(this.width*this.height*4);break;case he.RGB_UNSIGNED_BYTE:n=new Uint8Array(this.width*this.height*3);break;case he.LUMINANCE_UNSIGNED_BYTE:n=new Uint8Array(this.width*this.height);break;default:throw new Error("can not yet get data for format type: "+this.formatType)}return i.readPixels(0,0,this.width,this.height,this.format,this.type,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n}},{key:"getPixel",value:function(e,n){var i=this.renderer.context,r=t.getFramebuffer(this.renderer);i.bindFramebuffer(E.FRAMEBUFFER,r),i.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,this.textureGL,0);var a=new Uint8Array(4);return i.readPixels(e,n,1,1,E.RGBA,E.UNSIGNED_BYTE,a),i.bindFramebuffer(i.FRAMEBUFFER,null),a}},{key:"getAspect",value:function(){return this.width/this.height}},{key:"setImage",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isDestructed){var r=this.renderer.context;this.bind(),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n?1:0),r.pixelStorei(E.UNPACK_COLORSPACE_CONVERSION_WEBGL,E.NONE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i?1:0),r.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,e),e instanceof HTMLVideoElement?(this._width=e.videoWidth,this._height=e.videoHeight):(this._width=e.width,this._height=e.height,t.textureBytesLoaded+=this.width*this.height*he.getBytesPerPixel(this.formatType)),this.useMips&&this.generateMips(),n&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0),i&&r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0)}}},{key:"destruct",value:function(){t._framebuffers[this.renderer.id]&&(this.renderer.context.deleteFramebuffer(t._framebuffers[this.renderer.id]),t._framebuffers[this.renderer.id]=null);p()(c()(t.prototype),"destruct",this).call(this)}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"format",get:function(){return this._format}},{key:"type",get:function(){return this._type}}],[{key:"isPOT",value:function(e,t){return 0===(e&e-1)&&0===(t&t-1)}},{key:"getFramebuffer",value:function(e){if(!t._framebuffers[e.id]){var n=e.context;t._framebuffers[e.id]=n.createFramebuffer()}return t._framebuffers[e.id]}},{key:"logImageTextureMemoryUsage",value:function(){T.log("ImageTextureMemoryUsage: "+t.textureBytesLoaded/1048576+" MB")}}]),t}(de);pe.textureBytesLoaded=0,pe._framebuffers={};var ve=function(e){function t(e,n,i){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:he.RGBA_UNSIGNED_BYTE,f=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return o()(this,t),(r=l()(this,c()(t).call(this,e,d,a,s,u)))._flipY=!0,r._premultiply=!1,r.loaded=!1,r._flipY=h,r._url=i,r._premultiply=f,n.add(g()(r)),r}return d()(t,e),r()(t,[{key:"load",value:function(e){var t=this;te.loadImage(this._url,function(n){t.setImage(n,t._flipY,t._premultiply),t.loaded=!0,t.image=n,e.call(t)})}}]),t}(pe),me=n(761),_e=function(){function e(t,n,i){o()(this,e),this._transform=new W,this._startPosition=new x,this._randomAngle=new x,this._randomMovement=new x,this._movement=new x,this._time=0,this._flip=0,this._xOffset=0,this._rotation=0,this._fade=0,this.position=new x,this._blurOverride=0,this._renderer=t,this._index=i,e.material||(e.material=new U(t,n,"particle"),e.material.setPreMultipliedAlphaBlending(),e.material.setCullingDisabled(),e.material.depthTest=!0),e.mesh||(e.mesh=new z(t,1,1)),e.texture||(e.texture=new ve(this._renderer,n,me("./petals.png"),!0,!0)),this._startPosition.setValues(6*(e.getHaltonSequence(i+.5,2)%1-.5),e.maxY,e.getHaltonSequence(i+.5,3)%1*2),this.position.copy(this._startPosition),this._time=e.getHaltonSequence(this._index+.5,5)*(2*e.maxY/.1),this._randomAngle.randomize().multiplyScalar(Math.PI),this._randomMovement.randomize(),this._flip=Math.random(),this._xOffset=.25*Math.floor(4*Math.random())}return r()(e,[{key:"getIndex",value:function(){return this._index}},{key:"setBlurOverride",value:function(e){this._blurOverride=e}},{key:"update",value:function(t,n,i,r,a){if((i||this._time>=0)&&(this._time+=t),this._time>=0&&(this._fade=ie.clamp01(this._fade+(r?1:-2)*re.getInstance().deltaTime),this._fade>0)){var o=10*this._time;this._movement.setValues(.1*Math.sin(.1*o+this._randomAngle.x)*this._randomMovement.x,.15*Math.cos(.07*o+this._randomAngle.y)*this._randomMovement.y,.05*Math.sin(.05*o+this._randomAngle.z)*this._randomMovement.z),this._movement.y-=this._time*e.speedY.getValue(),this._movement.x+=.1*Math.sin(.3*n)-.06*n,this.position.copy(this._startPosition),this.position.add(this._movement),this.position.x<-2?this.position.x=(this.position.x-3)%6+3:this.position.x>2&&(this.position.x=(this.position.x+3)%6-3),this._transform.setPosition(this.position),this._rotation=.3*Math.sin(.175*o*(.2+.1*Math.abs(this._randomMovement.y))+this._randomAngle.z)+.05*this._randomAngle.z,this.position.y<-e.maxY&&(this._flip=Math.random(),this._xOffset=.25*Math.floor(4*Math.random()),this._time=i?-Math.random():2*-e.getHaltonSequence(this._index+.5,5)*e.maxY/e.speedY.getValue())}}},{key:"render",value:function(t,n){this._time>=0&&this._fade>0&&(e.material.setMatrix("_Model",this._transform.getWorldMatrix()),e.material.setFloat("_Flip",this._flip),e.material.setFloat("_XOffset",this._xOffset),e.material.setFloat("_Rotation",this._rotation),e.material.setFloat("_Fade",this._fade),this._renderer.draw(e.mesh,e.material))}}],[{key:"init",value:function(t){var n=t.addGroup("_Particles",e.getMaterial());e.speedY=n.addParamFloat("SpeedY",.1,0,1),e.size=n.addShaderParamFloat("_Size",.6,0,2),n.addShaderParamFloat("_FocalDepth",1.6,0,2),n.addShaderParamFloat("_FStop",1.5,.5,3),n.addShaderParamFloat("_FocalLength",55,1,150),n.addShaderParamFloat("_FSize",.003,0,.01),n.addShaderParamFloat("_FAlphaPow",.05,0,.01),e.material.setTexture("_Texture",e.texture)}},{key:"setSizeOverride",value:function(t){e.size.setValue(t)}},{key:"getHaltonSequence",value:function(e,t){for(var n=0,i=1,r=e;r>0;)n+=(i/=t)*(r%t),r=Math.floor(r/t);return n}},{key:"getMaterial",value:function(){return e.material}}]),e}();_e.maxY=1.73;var ge=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return o()(this,t),(n=l()(this,c()(t).call(this))).dirty=!0,n.frustumHeight=1,n._projectionMatrix=b.b.create(),n._tmpMat4=b.b.create(),n._tmpV3=new x,n._tmpV4=new Q,n._frustumCorner=new x,n._jitter=new P,n._jitterFrame=0,n._fov=i,n.frustumHeight=2*Math.tan(n._fov*t._degToRad*.5),n._nearPlane=r,n._farPlane=a,n._aspect=1,n._changeCallback=e,n}return d()(t,e),r()(t,[{key:"getMatrix",value:function(){return this.updateProjection(),this._projectionMatrix}},{key:"updateProjection",value:function(){this.dirty&&(b.b.perspective(this._projectionMatrix,this._fov*t._degToRad,this._aspect,this._nearPlane,this._farPlane),this.dirty=!1,this.getFrustumCornerRef(this._frustumCorner))}},{key:"setAspect",value:function(e){e!==this._aspect&&(this._aspect=e,this.setDirty())}},{key:"getAspect",value:function(){return this._aspect}},{key:"setFarPlane",value:function(e){e!==this._farPlane&&(this._farPlane=e,this.setDirty())}},{key:"getFarPlane",value:function(){return this._farPlane}},{key:"setNearPlane",value:function(e){e!==this._nearPlane&&(this._nearPlane=e,this.setDirty())}},{key:"getNearPlane",value:function(){return this._nearPlane}},{key:"setFOV",value:function(e){e!==this._fov&&(this._fov=e,this.frustumHeight=2*Math.tan(this._fov*t._degToRad*.5),this.setDirty())}},{key:"getFOV",value:function(){return this._fov}},{key:"getFrustumCornerRef",value:function(e){var t=.5*this.frustumHeight,n=t*this._aspect;e.setValues(n,t,1)}},{key:"getFrustumCorner",value:function(){return this._frustumCorner}},{key:"getHaltonSequence",value:function(e,t){for(var n=0,i=1,r=e;r>0;)n+=(i/=t)*(r%t),r=Math.floor(r/t);return n}},{key:"jitter",value:function(e){this._jitter.setValues(this.getHaltonSequence(this._jitterFrame%51,2)-.5,this.getHaltonSequence(this._jitterFrame%31,3)-.5),this._jitterFrame++,b.b.copy(this._projectionMatrix,this.getJitteredMatrix(this._jitter,e,this._tmpV4)),this.getFrustumCornerRef(this._frustumCorner),this.dirty=!1}},{key:"getJitteredMatrix",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=Math.tan(.5*t._degToRad*this.getFOV()),a=r*(n.x/n.y),o=a/(.5*n.x),s=r/(.5*n.y),l=o*e.x,u=s*e.y;void 0!==i&&i.setValues(a/n.x,r/n.y,l/n.x,u/n.y);var c=this.getFarPlane(),h=this.getNearPlane(),d=l-a,f=l+a,p=u-r,v=u+r,m=2*h/(f*h-d*h),_=2*h/(v*h-p*h),g=(f*h+d*h)/(f*h-d*h),y=(v*h+p*h)/(v*h-p*h),E=-(c+h)/(c-h),A=-2*c*h/(c-h);return this._tmpMat4.set([m,0,0,0,0,_,0,0,g,y,E,-1,0,0,A,0]),this._tmpMat4}},{key:"getJitter",value:function(){return this._jitter}},{key:"destruct",value:function(){p()(c()(t.prototype),"destruct",this).call(this)}},{key:"setDirty",value:function(){this.dirty=!0,this._changeCallback.call(this)}}]),t}(v);ge._degToRad=Math.PI/180,ge._radToDeg=180/Math.PI;var ye,Ee=ge,Ae=function(e){function t(e){var n;return o()(this,t),(n=l()(this,c()(t).call(this))).dirty=!0,n._viewMatrix=b.b.create(),n._rotationMatrix=b.b.create(),n.transform=new W,n.transform.addChangeCallBack(function(){return n.setDirty()}),n._changeCallback=e,n}return d()(t,e),r()(t,[{key:"getWorldPosition",value:function(){return this.transform.getWorldPosition()}},{key:"setDirty",value:function(){this.dirty=!0,this._changeCallback.call(this)}},{key:"getMatrix",value:function(){return this.updateMatrix(),this._viewMatrix}},{key:"updateMatrix",value:function(){this.dirty&&(b.b.invert(this._viewMatrix,this.transform.getWorldMatrix()),this.dirty=!1)}},{key:"getWorldRotationMatrix",value:function(){return b.b.invert(this._rotationMatrix,this.transform.getWorldRotationMatrix()),this._rotationMatrix}},{key:"destruct",value:function(){this.transform&&this.transform.destruct(),p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v),Te=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return o()(this,t),(e=l()(this,c()(t).call(this))).dirty=!0,e._viewProjection=b.b.create(),e.tScreenPos=new Q,e.tViewProjInv=b.b.create(),e.projection=new Ee(function(){return e.setDirty()},n,i,r),e.view=new Ae(function(){return e.setDirty()}),e}return d()(t,e),r()(t,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"getWorldPosition",value:function(){return this.view.getWorldPosition()}},{key:"lookAt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.UP;this.view.transform.lookAt(e,t,n)}},{key:"setPosition",value:function(e){this.view.transform.setPosition(e)}},{key:"getViewProjection",value:function(){return this.updateViewProjection(),this._viewProjection}},{key:"getProjectionMatrix",value:function(){return this.projection.getMatrix()}},{key:"getViewMatrix",value:function(){return this.view.getMatrix()}},{key:"getProjection",value:function(){return this.projection}},{key:"updateViewProjection",value:function(){this.dirty&&(b.b.multiply(this._viewProjection,this.projection.getMatrix(),this.view.getMatrix()),this.dirty=!1)}},{key:"worldToScreenPoint",value:function(e,t){this.tScreenPos.x=t.x,this.tScreenPos.y=t.y,this.tScreenPos.z=t.z,this.tScreenPos.w=1,this.tScreenPos.transform(this.getViewProjection()),this.tScreenPos.x/=this.tScreenPos.w,this.tScreenPos.y/=this.tScreenPos.w,this.tScreenPos.x=.5*this.tScreenPos.x+.5,this.tScreenPos.y=-.5*this.tScreenPos.y+.5,e.x=this.tScreenPos.x,e.y=this.tScreenPos.y,e.z=this.tScreenPos.z}},{key:"screenToWorldPoint",value:function(e,t){b.b.invert(this.tViewProjInv,this.getViewProjection());var n=2*t.x-1,i=-2*t.y+1;e.x=n,e.y=i,e.z=1,e.transform(this.tViewProjInv)}},{key:"getDepth",value:function(e){return this.tScreenPos.x=e.x,this.tScreenPos.y=e.y,this.tScreenPos.z=e.z,this.tScreenPos.w=1,this.tScreenPos.transform(this.getViewProjection()),this.tScreenPos.z}},{key:"destruct",value:function(){this.projection&&this.projection.destruct(),this.view&&this.view.destruct(),p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v),be=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:he.DEPTH_UINTSHORT;return o()(this,t),(n=l()(this,c()(t).call(this,e,a,!1,!1,!0))).setSize(i,r),n}return d()(t,e),t}(pe),Re=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:he.RGBA_UNSIGNED_BYTE,s=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5]),u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8];o()(this,t),(n=l()(this,c()(t).call(this,e,a,!1,s,u))).renderBuffer=null,n.colorFramebuffer=null,n.scaleToCanvas=!1,n.sizeMultiplier=1,n.frameBufferComplete=!1,n.aaSamples=4,n.setSize(i,r);var f=n.renderer.context;return n.frameBuffer=f.createFramebuffer(),f.bindFramebuffer(f.FRAMEBUFFER,n.frameBuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,n.textureGL,0),n.frameBufferComplete=n.testBuffer(),h?n.createDepthBuffer(i,r):d&&n.createStencilBuffer(i,r),n}return d()(t,e),r()(t,[{key:"addMultisampleRenderBuffer",value:function(){if(this.renderer instanceof ce){var e=this.renderer.context;this.colorFramebuffer=e.createFramebuffer(),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.aaSamples,this.internalFormat,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.renderBuffer),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,this.colorFramebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.textureGL,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}}},{key:"resolveMultisampleBuffer",value:function(){if(this.renderer instanceof ce&&this.renderBuffer){var e=this.renderer.context;e.bindFramebuffer(e.READ_FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.colorFramebuffer),e.clearBufferfv(e.COLOR,0,[0,0,0,1]),e.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,e.COLOR_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null)}}},{key:"testBuffer",value:function(){var e=this.renderer.context;e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer);var t=e.checkFramebufferStatus(e.FRAMEBUFFER);switch(t){case e.FRAMEBUFFER_COMPLETE:return!0;case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT",this.formatType),!1;case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",this.formatType),!1;case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS",this.formatType),!1;case e.FRAMEBUFFER_UNSUPPORTED:return console.log("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED",this.formatType),!1;default:return console.log("Incomplete framebuffer: "+t,this.formatType),!1}}},{key:"setTexture3DSlice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.renderer.context;i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.framebufferTextureLayer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,e.textureGL,n,t)}},{key:"addDepthTexture",value:function(){this.renderer.extensionManager.depth_texture?this.setDepthTexture(new be(this.renderer,this.width,this.height)):console.log("addDepthTexture: extension not supported")}},{key:"setDepthTexture",value:function(e){e.setSize(this.width,this.height),this.depthTexture=e;var t=this.renderer.context;t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.depthTexture.textureGL,0)}},{key:"createDepthBuffer",value:function(e,t){var n=this.renderer.context;this.depthBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer)}},{key:"createDepthStencilBuffer",value:function(e,t){var n=this.renderer.context;this.depthBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer)}},{key:"createStencilBuffer",value:function(e,t){var n=this.renderer.context;this.stencilBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.stencilBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX8,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,this.stencilBuffer)}},{key:"setAsTarget",value:function(){var e=this.renderer.context;e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),this.depthBuffer?this.renderer.renderState.setDepthMask(!0):this.depthTexture?this.renderer.renderState.setDepthMask(!0):this.renderer.renderState.setDepthMask(!1)}},{key:"setSize",value:function(e,n){if(e!==this.width||n!==this.height){if(this.depthBuffer){var i=this.renderer.context;i.bindRenderbuffer(i.RENDERBUFFER,this.depthBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,e,n),i.bindRenderbuffer(E.RENDERBUFFER,null)}if(this.stencilBuffer){var r=this.renderer.context;r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX8,e,n),r.bindRenderbuffer(E.RENDERBUFFER,null)}if(this.renderBuffer){var a=this.renderer.context;a.bindRenderbuffer(a.RENDERBUFFER,this.renderBuffer),a.renderbufferStorageMultisample(a.RENDERBUFFER,this.aaSamples,this.internalFormat,e,n),a.bindRenderbuffer(E.RENDERBUFFER,null)}this.depthTexture&&this.depthTexture.setSize(e,n),p()(c()(t.prototype),"setSize",this).call(this,e,n)}}},{key:"getData",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p()(c()(t.prototype),"getData",this).call(this,this.frameBuffer)}},{key:"getDataRef",value:function(e){var t=this.renderer.context;t.bindFramebuffer(E.FRAMEBUFFER,this.frameBuffer),t.readPixels(0,0,this.width,this.height,this.format,this.type,e),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"getPixelU8",value:function(e,t){var n=this.renderer.context;n.bindFramebuffer(E.FRAMEBUFFER,this.frameBuffer);var i=new Uint8Array(4);return n.readPixels(e,t,1,1,E.RGBA,E.UNSIGNED_BYTE,i),n.bindFramebuffer(n.FRAMEBUFFER,null),i}},{key:"getPixel",value:function(e,t){var n,i=this.renderer.context;switch(i.bindFramebuffer(E.FRAMEBUFFER,this.frameBuffer),this.formatType){case he.RGBA_FLOAT:n=new Float32Array(4);break;case he.RGBA_UNSIGNED_BYTE:n=new Uint8Array(4);break;case he.LUMINANCE_UNSIGNED_BYTE:n=new Uint8Array(1);break;case he.LUMINANCE_FLOAT:n=new Float32Array(1);break;default:throw new Error("Can not yet get data for format type: "+this.formatType)}return i.readPixels(e,t,1,1,this.format,this.type,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n}},{key:"destruct",value:function(){var e=this.renderer.context;this.frameBuffer&&(e.deleteFramebuffer(this.frameBuffer),delete this.frameBuffer),this.colorFramebuffer&&(e.deleteFramebuffer(this.colorFramebuffer),this.colorFramebuffer=null),this.depthBuffer&&(e.deleteRenderbuffer(this.depthBuffer),delete this.depthBuffer),this.stencilBuffer&&(e.deleteRenderbuffer(this.stencilBuffer),delete this.stencilBuffer),this.renderBuffer&&(e.deleteRenderbuffer(this.renderBuffer),this.renderBuffer=null),this.depthTexture&&(this.depthTexture.destruct(),delete this.depthTexture),p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(pe);!function(e){e[e.BACKGROUND_LEAFS=0]="BACKGROUND_LEAFS",e[e.BACKGROUND_PARTICLES=1]="BACKGROUND_PARTICLES",e[e.EXPERIENCE_LANDING=2]="EXPERIENCE_LANDING",e[e.EXPERIENCE_OFRENDAS=3]="EXPERIENCE_OFRENDAS"}(ye||(ye={}));var xe=ye,ke=n(481),Pe=n.n(ke),we=n(298),Se=n.n(we),Me=function(){function e(t,n){o()(this,e),this._name="PostEffectBase",this._standAlone=!0,this._renderer=t,this._name=n}return r()(e,[{key:"setSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._settings=Object.assign(t,e),T.log("Post Effect: "+this._name,this._settings)}},{key:"init",value:function(e){this.initMaterial(),this._standAlone&&(this._outputBuffer=new Re(this._renderer,1,1,he.RGBA_UNSIGNED_BYTE,!1,!0,!0,!1))}},{key:"initMaterial",value:function(){if(this._standAlone){var e=this._name,t=this.getBaseVSCode(),n=this.injectFSCode(e,this.getBaseFSCode(),this.getFSCode());this._generatedShader=n,this._material=new F(this._renderer,e,new D(this._renderer).init(e,t,n)),this._material.depthTest=!1}}},{key:"getBaseVSCode",value:function(){return Pe.a}},{key:"getBaseFSCode",value:function(){return this.shaderSetsColor()?Se.a:Se.a.replace("//EFFECTS","color = texture2D(uTexture, vUV).rgb;\n\n//EFFECTS")}},{key:"debug",value:function(){""==this._generatedShader&&console.warn("Call debug after init"),console.log(this._generatedShader)}},{key:"injectFSCode",value:function(e,t,n){var i=t;return i=(i=i.replace("//FUNCTIONS",n+"\n\n//FUNCTIONS")).replace("//EFFECTS","color = "+e.toLowerCase()+"(vUV, color);\n\n//EFFECTS")}},{key:"shaderSetsColor",value:function(){return!1}},{key:"getFSCode",value:function(){return""}},{key:"update",value:function(e){}},{key:"standAlone",value:function(){return this._standAlone}},{key:"setStandAlone",value:function(e){this._standAlone=e}},{key:"getMaterial",value:function(){return this._material}},{key:"setMaterial",value:function(e){this._material=e}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.update(e),this.getMaterial().setVector2("uResolution",e.getSize()),this.getMaterial().setFloat("uTime",re.getInstance().time),t?this._renderer.blit(e,null,this.getMaterial()):(this._outputBuffer.setSize(e.width,e.height),this._renderer.blit(e,this._outputBuffer,this.getMaterial()),this._output=this._outputBuffer),this.output}},{key:"output",get:function(){return this._output}}]),e}(),Ce=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o()(this,t),(i=l()(this,c()(t).call(this,e,"PostEffectStack")))._postEffects=[],i._postStacks=[],r){for(var a=[],s=0;s<n.length;s++){var u=n[s];u.setStandAlone(!1),u.shaderSetsColor()&&a.length>0&&(i._postStacks.push(new t(e,a)),a=[]),a.push(u)}i._postEffects=a,T.log("PostEffectStack auto split in "+(i._postStacks.length+1)+" stacks.")}else for(var h=0;h<n.length;h++){var d=n[h];if(d.setStandAlone(!1),h>0&&d.shaderSetsColor())throw"PostEffectStack: "+d._name+" not at first position of stack. Only the first effect of a stack is allowed to set the base color. Use more than one stack, auto-split stack or re-order effects.";i._postEffects.push(d)}return i}return d()(t,e),r()(t,[{key:"init",value:function(e){p()(c()(t.prototype),"init",this).call(this,e);for(var n=0;n<this._postStacks.length;n++)this._postStacks[n].init(e);for(var i=0;i<this._postEffects.length;i++)this._postEffects[i].setMaterial(this._material),this._postEffects[i].init(e)}},{key:"update",value:function(e){for(var t=0;t<this._postEffects.length;t++)this._postEffects[t].update(e)}},{key:"debug",value:function(){for(var e=0;e<this._postStacks.length;e++)this._postStacks[e].debug();p()(c()(t.prototype),"debug",this).call(this)}},{key:"initMaterial",value:function(){if(this._standAlone){for(var e=this._name,t=this.getBaseVSCode(),n=this._postEffects[0].getBaseFSCode(),i=0;i<this._postEffects.length;i++){var r=this._postEffects[i];n=this.injectFSCode(r._name,n,r.getFSCode())}this._generatedShader=n,this._material=new F(this._renderer,e,new D(this._renderer).init(e,t,n))}}},{key:"draw",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e,r=0;r<this._postStacks.length;r++)i=this._postStacks[r].draw(i);return p()(c()(t.prototype),"draw",this).call(this,i,n),this.output}}]),t}(Me),Fe=n(482),Ne=n.n(Fe),Le=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,t),(n=l()(this,c()(t).call(this,e,"Vignette"))).setSettings(i,{boost:1,reduction:.5}),n}return d()(t,e),r()(t,[{key:"getFSCode",value:function(){return Ne.a}},{key:"init",value:function(e){p()(c()(t.prototype),"init",this).call(this,e);var n=e.addGroup("Vignette",this.getMaterial());n.addShaderParamFloat("_VignetteBoost",this._settings.boost,0,2),n.addShaderParamFloat("_VignetteReduction",this._settings.reduction,0,2)}}]),t}(Me),Ie=n(483),Oe=n.n(Ie),Be=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,t),(n=l()(this,c()(t).call(this,e,"SmokeEdge")))._time=0,n._speed=1,n._xOffset=0,n.setSettings(i,{strength:1}),n._tex=i.texture,n._tex||console.error("SmokeEdge needs a (fbm) texture"),n}return d()(t,e),r()(t,[{key:"getFSCode",value:function(){return Oe.a}},{key:"setSpeed",value:function(e){this._speed=e}},{key:"setXOffset",value:function(e){this._xOffset=ie.clamp(e,-.25,.25)}},{key:"update",value:function(e){this._time+=re.getInstance().deltaTime*this._speed,this.getMaterial().setFloat("_SmokeEdgeTime",this._time),this.getMaterial().setFloat("_SmokeEdgeXOffset",this._xOffset),p()(c()(t.prototype),"update",this).call(this,e)}},{key:"init",value:function(e){p()(c()(t.prototype),"init",this).call(this,e),e.addGroup("SmokeEdge",this.getMaterial()).addShaderParamFloat("_SmokeEdgeStrength",this._settings.strength,0,2),this.getMaterial().setTexture("_SmokeEdgeTex",this._tex)}}]),t}(Me),De=n(484),Ue=n.n(De),Ve=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,t),(n=l()(this,c()(t).call(this,e,"AddTexture"))).setSettings(i,{offset:0,scale:1,strength:1}),n._tex=i.texture,n._tex||console.error("AddTexture needs a (fbm) texture"),n}return d()(t,e),r()(t,[{key:"getFSCode",value:function(){return Ue.a}},{key:"init",value:function(e){p()(c()(t.prototype),"init",this).call(this,e);var n=e.addGroup("AddTexture",this.getMaterial());n.addShaderParamFloat("_AddTextureOffset",this._settings.offset,-1,1),n.addShaderParamFloat("_AddTextureScale",this._settings.scale,0,1),n.addShaderParamFloat("_AddTextureStrength",this._settings.strength,0,2),this.getMaterial().setTexture("_AddTextureTex",this._tex),this.getMaterial().setVector2("_AddTextureTexSize",this._tex.getSize())}}]),t}(Me),Ge=n(101),$e=function(){function e(t,n){o()(this,e),this._particles=[],this._cameraLookAt=new x(0,0,0),this._frame=0,this._state=void 0,this._prevState=void 0,this._offset=new P,this._offsetLerped=new P,this._cameraPos=new x,this._animBlur=1,this._animBlurTarget=1,this._animMotionWeight=.1,this._animMotionWeightTarget=.1,this._animCount=.125*e.NUM_PARTICLES,this._animCountTarget=.125*e.NUM_PARTICLES,this._animSize=.6,this._animSizeTarget=.6,this._renderer=t,this._camera=new Te(60,.1,10),this._camera.lookAt(new x(0,0,-1),this._cameraLookAt),this._motionMaterial=new U(this._renderer,n,"motionblur"),this._motionMaterial.depthTest=!1,this._buffer0=new Re(this._renderer),this._buffer0.scaleToCanvas=!0,this._buffer1=new Re(this._renderer),this._buffer1.scaleToCanvas=!0,this._target=new Re(this._renderer,16,16,he.RGBA_UNSIGNED_BYTE,!1,!0),this._stack=new Ce(this._renderer,[new Le(this._renderer,{reduction:2.5}),new Be(this._renderer,{texture:new ve(this._renderer,n,Ge("./perlin_doNotCompress.png"),!0,!0,!1)}),new Ve(this._renderer,{texture:new ve(this._renderer,n,Ge("./background.jpg"),!0,!0,!1)})],!0);for(var i=0;i<e.NUM_PARTICLES;i++)this._particles.push(new _e(this._renderer,n,i));this._particlesVisible=!0,this._opacity=0}return r()(e,[{key:"init",value:function(e){var t=this,n=e.addGroup("Post",[this._motionMaterial]);this._motionWeight=n.addShaderParamFloat("_MotionWeight",.1,0,1),n.addButton("BG1",function(){t.setState(xe.BACKGROUND_LEAFS)}),n.addButton("BG2",function(){t.setState(xe.BACKGROUND_PARTICLES)}),_e.init(e),this._stack.init(e),this._particles.sort(function(e,t){return t.position.z-e.position.z})}},{key:"setOpacity",value:function(e){this._opacity=e}},{key:"showParticles",value:function(e){this._particlesVisible=e}},{key:"setState",value:function(t){this._prevState=this._state,this._state=t,void 0!=this._prevState||this._state!=xe.EXPERIENCE_LANDING&&this._state!=xe.EXPERIENCE_OFRENDAS||(this._opacity=0),this._state==xe.BACKGROUND_LEAFS?(this._animCountTarget=.125*e.NUM_PARTICLES,this._animBlurTarget=1,this._animMotionWeightTarget=.1,this._animSizeTarget=.6):this._state==xe.BACKGROUND_PARTICLES&&(this._animCountTarget=1*e.NUM_PARTICLES,this._animBlurTarget=0,this._animMotionWeightTarget=1,this._animSizeTarget=.1)}},{key:"ping",value:function(){return this._frame%2==0?this._buffer0:this._buffer1}},{key:"pong",value:function(){return this._frame%2==1?this._buffer0:this._buffer1}},{key:"update",value:function(e){this._camera.projection.setAspect(this._renderer.getAspect()),this._offset.copy(this._renderer.getMouseListener().getScreenPos()),this._offset.multiplyScalar(.075),P.lerp(this._offsetLerped,this._offsetLerped,this._offset,.02),this._cameraPos.setValues(this._offsetLerped.x*this._renderer.getAspect(),this._offsetLerped.y,-1),this._camera.lookAt(this._cameraPos,this._cameraLookAt);var t=1-Math.pow(.5,e);this._animCount=ie.lerp(this._animCount,this._animCountTarget,t),this._animBlur=ie.lerp(this._animBlur,this._animBlurTarget,t),this._animMotionWeight=ie.lerp(this._animMotionWeight,this._animMotionWeightTarget,t),this._animSize=ie.lerp(this._animSize,this._animSizeTarget,t),this._motionWeight.setValue(this._animMotionWeight),_e.setSizeOverride(this._animSize),this._state==xe.BACKGROUND_LEAFS||this._state==xe.BACKGROUND_PARTICLES?this._opacity=ie.clamp01(this._opacity+.25*re.getInstance().deltaTime):this._opacity=ie.clamp01(this._opacity-.25*re.getInstance().deltaTime)}},{key:"render",value:function(){if(this._frame++,this._target.setSize(.667*this._renderer.getRenderWidth()|0,.667*this._renderer.getRenderHeight()|0),this._renderer.setRenderTexture(this._target),this._renderer.clear(),this._opacity>0){for(var t=0;t<e.NUM_PARTICLES;t++)this._particles[t].update(1/60,re.getInstance().time,this._particlesVisible,this._particles[t].getIndex()<=this._animCount,this._state==xe.BACKGROUND_LEAFS||this._state==xe.BACKGROUND_PARTICLES);var n=_e.getMaterial();n.setMatrix("_ViewProjection",this._camera.getViewProjection()),n.setFloat("_Aspect",this._renderer.getAspect()),n.setFloat("_Time",re.getInstance().time),n.setVector3("_CamPos",this._camera.getWorldPosition());for(var i=0;i<e.NUM_PARTICLES;i++)this._particles[i].render(this._camera,this._particles[i].getIndex()<=this._animCount)}this._renderer.unSetRenderTexture(),this._motionMaterial.setTexture("_Texture",this._target),this._motionMaterial.setFloat("_Time",re.getInstance().time),this._motionMaterial.setFloat("_Opacity",this._opacity),this._renderer.blit(this.ping(),this.pong(),this._motionMaterial),this._stack.draw(this.pong(),!0)}}]),e}();$e.NUM_PARTICLES=256;var He,Xe=n(269),ze=n.n(Xe),je=n(7),qe=n(15),We=n(26),Ye=n(28),Ke=n(14),Qe=n(36),Ze=function(e){function t(e){var n;return o()(this,t),(n=l()(this,c()(t).call(this))).parent=e,n.opacityValue=1,n.soundManager=Object(Ke.a)(qe.f),n}return d()(t,e),r()(t,[{key:"setState",value:function(e){var t;switch(e){case Qe.a.OFRENDA:this.soundManager.play(Ye.a.TRANSITION_1,We.a.EFFECTS),t=this.parent.setState(xe.EXPERIENCE_OFRENDAS);break;case Qe.a.HOME:this.soundManager.play(Ye.a.TRANSITION_2,We.a.EFFECTS),t=this.parent.setState(xe.EXPERIENCE_LANDING);break;case Qe.a.UPLOAD_PHOTO:this.soundManager.play(Ye.a.TRANSITION_3,We.a.EFFECTS),t=this.parent.setState(xe.BACKGROUND_PARTICLES);break;case Qe.a.AGE_GATE:default:t=this.parent.setState(xe.BACKGROUND_LEAFS)}return t||(t=Promise.resolve()),t}},{key:"setOpacity",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:je.Linear.easeNone;return e>0&&this.parent.play(),new Promise(function(r){t.opacityTween=je.TweenLite.to(t,n,{ease:i,opacityValue:e,onUpdate:function(){t.parent.setOpacity(t.opacityValue)},onComplete:function(){return setTimeout(function(){r(),0===t.opacityValue&&(t.parent.pause(),console.log("PAUSED!"))},500)}})})}},{key:"dispose",value:function(){this.opacityTween&&this.opacityTween.kill(),p()(c()(t.prototype),"dispose",this).call(this)}}]),t}(ze.a),Je=function(e){function t(e){var n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o()(this,t),(n=l()(this,c()(t).call(this)))._pixelRatio=1,n._needsResize=!1,n._resizeInterval=30,n._resizeWait=0,n._canvasParent=e,n._autoResize=i,e||(n._autoResize=!1),n._manualResizeUpdate=!1,n.canvas=n.prepareCanvas(e),window.devicePixelRatio?n._pixelRatio=window.devicePixelRatio:n._pixelRatio=1,n._autoResize&&n.handleResize(),n}return d()(t,e),r()(t,[{key:"getCanvas",value:function(){return this.canvas}},{key:"prepareCanvas",value:function(e){var t=document.createElement("canvas");return t.setAttribute("id","canvas"),t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.zIndex="1",this._canvasParent&&(t.style.width=this._canvasParent.offsetWidth+"px",t.style.height=this._canvasParent.offsetHeight+"px"),e&&e.appendChild(t),this._autoResize&&(this._resizeHandler=this.handleResize.bind(this),window.addEventListener("resize",this._resizeHandler)),t}},{key:"setSize",value:function(e,t){this._goalWidth==e&&this._goalHeight==t||this._autoResize&&(this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler),this._autoResize=!1),this._goalWidth=e,this._goalHeight=t,this.delayedResize()}},{key:"setMaxResolution",value:function(e){this._maxResolution=(new P).copy(e),this.delayedResize()}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this.delayedResize()}},{key:"setAutoResize",value:function(e){this._autoResize=e,this._resizeHandler&&(this._autoResize?(window.addEventListener("resize",this._resizeHandler),this.handleResize()):window.removeEventListener("resize",this._resizeHandler))}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"getParentHeight",value:function(){return null===this._canvasParent?null:this._canvasParent.offsetHeight}},{key:"getAspectRatio",value:function(){return this.canvas.width/this.canvas.height}},{key:"handleResize",value:function(){var e=this;if(this._canvasParent){var t=this._canvasParent.offsetWidth,n=this._canvasParent.offsetHeight;(this._goalWidth!==t||this._goalHeight!==n||this._needsResize)&&(this._goalWidth=t,this._goalHeight=n,this._manualResizeUpdate||(clearTimeout(this._resizeTimeOut),this._resizeTimeOut=setTimeout(function(){return e.delayedResize()},100)))}}},{key:"updateResize",value:function(){this._manualResizeUpdate=!0,this.handleResize(),this.delayedResize()}},{key:"delayedResize",value:function(){if(!this.isDestructed){if(this._needsResize=!1,void 0===this._goalWidth||void 0===this._goalHeight)throw new ReferenceError("canvas size not yet set");if(this._maxResolution){var e=window.devicePixelRatio?window.devicePixelRatio:1,t=Math.min(this._maxResolution.x/this._goalWidth,this._maxResolution.y/this._goalHeight);this._pixelRatio=t<e?t/e:e}this.canvas.width=this._goalWidth*this._pixelRatio,this.canvas.height=this._goalHeight*this._pixelRatio,this._autoResize&&this._canvasParent?(this.canvas.style.width=this._canvasParent.offsetWidth+"px",this.canvas.style.height=this._canvasParent.offsetHeight+"px"):(this.canvas.style.width=this._goalWidth+"px",this.canvas.style.height=this._goalHeight+"px");var n=document.createEvent("Event");n.initEvent("resize",!1,!0),this.canvas.dispatchEvent(n)}}},{key:"forceResize",value:function(){if(!this._canvasParent)throw new ReferenceError("canvas has no parent");if(this._resizeWait--,this._resizeWait<=0){this._resizeWait=this._resizeInterval;var e=this._canvasParent.offsetWidth,t=this._canvasParent.offsetHeight;if(this.canvas.width!=e*this._pixelRatio||this.canvas.height!=t*this._pixelRatio){this.canvas.width=e*this._pixelRatio,this.canvas.height=t*this._pixelRatio;var n=document.createEvent("Event");n.initEvent("resize",!1,!0),this.canvas.dispatchEvent(n)}this.canvas.style.width==e+"px"&&this.canvas.style.height==t+"px"||(this.canvas.style.width=e+"px",this.canvas.style.height=t+"px")}}},{key:"destruct",value:function(){this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler),this.canvas.width=1,this.canvas.height=1,this._canvasParent&&this._canvasParent.removeChild(this.canvas),p()(c()(t.prototype),"destruct",this).call(this)}},{key:"canvasParent",get:function(){return this._canvasParent}}]),t}(v),et=n(485),tt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return o()(this,t),(e=l()(this,c()(t).call(this)))._finished=!1,e._easeInOut=!1,e._isUpdating=!1,e._update=function(){return e.update()},e.value=n,e}return d()(t,e),r()(t,[{key:"to",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.goal=e,this.progress=0,this.startValue=this.value,this._duration=1e3*t,this._t0=+new Date,this._finished=!1,this._completeCallback=i,this._animateCallback=n,this._easeInOut=r,this._isUpdating||this.update()}},{key:"fromTo",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.value=e,this.to(t,n,i,r,a)}},{key:"stop",value:function(){this._finished=!0,this._completeCallback=null,this._animateCallback=null}},{key:"update",value:function(){if(void 0===this._t0||void 0===this._duration||void 0===this.startValue||void 0===this.goal)throw new Error("cannot update: Tween not started. Call Tween.to or Tween.fromTo first");if(this._isUpdating=!1,!this.isDestructed&&!this._finished)if(this.progress=(+new Date-this._t0)/this._duration,this.progress>1&&(this.progress=1),this.easedProgress=this.progress,this._easeInOut&&(this.easedProgress=ie.smoothStep01(this.easedProgress)),this.value=ie.lerp(this.startValue,this.goal,this.easedProgress),this._animateCallback&&this._animateCallback.call(this,this.value),this.progress>=1){if(this._finished=!0,this._completeCallback){var e=this._completeCallback;this._completeCallback=null,e.call(this)}}else this._isUpdating=!0,window.requestAnimationFrame(this._update)}}]),t}(v),nt=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o()(this,t),(i=l()(this,c()(t).call(this))).dataName=null,i.exposed=!1,i.name=n,i.parent=e,i._callback=a,i._materials=r||[],i}return d()(t,e),r()(t,[{key:"expose",value:function(){this.exposed=!0}},{key:"getValue",value:function(){return this._value}},{key:"setUpdateUICallback",value:function(e){this._updateUIcallback=e}},{key:"setChangeCallback",value:function(e){this._callback=e}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e!==this._value&&(this._value=e,this.setShaderUniform(e),this._callback&&n&&this._callback(this._value),!t&&this._updateUIcallback&&this._updateUIcallback.call(this,this.getValue()))}},{key:"setFromUI",value:function(e){this.setValue(e,!0)}},{key:"setShaderUniform",value:function(e){console.log("warning: override this")}}]),t}(v),it=function(e){function t(e,n,i){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;o()(this,t),(r=l()(this,c()(t).call(this,e,null!==h?h:n,u,d)))._floatUniforms=[];for(var f=0;f<r._materials.length;f++)r._floatUniforms[f]=r._materials[f].addFloatUniform(n,i);return r.min=a,r.max=s,r.max<i&&(r.max=2*i),r.min>i&&(r.min=i-1),r.setValue(i,!1,!1),r}return d()(t,e),r()(t,[{key:"setValue",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=ie.clamp(e,this.min,this.max),p()(c()(t.prototype),"setValue",this).call(this,e,n,i)}},{key:"setShaderUniform",value:function(e){for(var t=0;t<this._floatUniforms.length;t++)this._floatUniforms[t].set(e)}},{key:"to",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._tween||(this._tween=new tt),i?this._tween.fromTo(this.getValue(),e,t,function(e){return n.setValue(e)},function(){return i()}):this._tween.fromTo(this.getValue(),e,t,function(e){return n.setValue(e)})}},{key:"destruct",value:function(){if(this._floatUniforms){for(var e=0;e<this._floatUniforms.length;e++)this._floatUniforms[e].destruct();this._floatUniforms=[]}this._tween&&(this._tween.destruct(),delete this._tween),p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(nt),rt=function(e){function t(e,n,i){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;o()(this,t),(r=l()(this,c()(t).call(this,e,null!==h?h:n,u,d)))._floatUniforms=[];for(var f=0;f<r._materials.length;f++)r._floatUniforms[f]=r._materials[f].addFloatUniform(n,i);return r.min=a,r.max=s,r.max<i&&(r.max=2*i),r.min>i&&(r.min=i-1),r.setValue(i),r}return d()(t,e),r()(t,[{key:"setShaderUniform",value:function(e){for(var t=0;t<this._floatUniforms.length;t++)this._floatUniforms[t].set(e)}}]),t}(nt),at=function(e){function t(e,n,i){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return o()(this,t),(r=l()(this,c()(t).call(this,e,null!==s?s:n,a,u))).setValue(i,!1,!1),r}return d()(t,e),r()(t,[{key:"setShaderUniform",value:function(e){for(var t=0;t<this._materials.length;t++)this._materials[t].setFloat(this.name,!0===e?1:0)}}]),t}(nt),ot=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o()(this,t),l()(this,c()(t).call(this,e,n,null,i))}return d()(t,e),r()(t,[{key:"getValue",value:function(){return this._callback}}]),t}(nt),st=function(e){function t(e,n,i){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5?arguments[5]:void 0;o()(this,t),(r=l()(this,c()(t).call(this,e,null!==s?s:n,a,u)))._uniforms=[],r._color=new x;for(var h=0;h<r._materials.length;h++)r._uniforms[h]=r._materials[h].addVector3Uniform(n,r._color);return r.setValue([255*i.x,255*i.y,255*i.z]),r}return d()(t,e),r()(t,[{key:"getValueVector3",value:function(){return this._color}},{key:"convertColorToArray",value:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:e}},{key:"setValue",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e instanceof x?this._color.copy(e):(e=this.convertColorToArray(e),this._color.setValues(e[0]/255,e[1]/255,e[2]/255)),p()(c()(t.prototype),"setValue",this).call(this,[255*this._color.x,255*this._color.y,255*this._color.z],n)}},{key:"setShaderUniform",value:function(e){for(var t=0;t<this._uniforms.length;t++)this._uniforms[t].set(this._color)}}]),t}(nt),lt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o()(this,t),(e=l()(this,c()(t).call(this)))._params={},e.folderIndex=-2,n&&n.add(g()(e)),e._jsonExportEnabled=i,e._params=r,e}return d()(t,e),r()(t,[{key:"load",value:function(e){e.call(this)}},{key:"init",value:function(e){this._rootGroup=e;var t={};this._gui=new et.a(this._params),this.readGroup(null,e,t,this._gui),this._jsonExportEnabled&&this._gui.remember(t),this.setVisible(!0)}},{key:"getDatGUI",value:function(){return this._gui}},{key:"setPreset",value:function(e){if(!this._gui)throw new Error("Cannot set preset: DatGui not initialized");this.folderIndex=-2,this.setPresetRecurse(this._gui.__folders.controls,e.remembered.Default)}},{key:"setPresetRecurse",value:function(e,t){this.folderIndex++;var n=t[this.folderIndex];if("undefined"!==typeof n){var i=!0,r=!1,a=void 0;try{for(var o,s=e.__controllers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,u=n[l.property];"undefined"!==typeof u&&l.setValue(u)}}catch(p){r=!0,a=p}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}for(var c=Object.keys(e.__folders),h=0;h<c.length;h++){var d=c[h],f=e.__folders[d];this.setPresetRecurse(f,t)}}},{key:"readGroup",value:function(e,t,n,i){if(!t.name)throw new Error("group name not initialized");if(!this._gui)throw new Error("cannot read group: DatGui not initialized");var r=this.uniqueName(i.__folders,t.name);t.uniqueName=r;var a=i.addFolder(r);t.collapsed||a.open();var o=!0,s=!1,l=void 0;try{for(var u,c=t.params[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value;h.dataName=this.uniqueName(n,h.name);var d=h.dataName;void 0==n[d]?n[d]=h.getValue():console.log("property "+d+" already exists on param object",n);var f=void 0;if(h instanceof it){var p=h;f=a.add(n,d,p.min,p.max)}if(h instanceof rt){var v=h;f=a.add(n,d,v.min,v.max).step(1)}if(h instanceof at&&(f=a.add(n,d)),h instanceof ot&&(f=a.add(n,d)),h instanceof st&&(f=a.addColor(n,d)),!(h instanceof ot)){if(void 0===f)throw new TypeError("Unknown type of parameter");this.addHandlers(f,n,h)}}}catch(b){s=!0,l=b}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}var m=!0,_=!1,g=void 0;try{for(var y,E=t.children[Symbol.iterator]();!(m=(y=E.next()).done);m=!0){var A=y.value,T={};this._jsonExportEnabled&&this._gui.remember(T),this.readGroup(t,A,T,a)}}catch(b){_=!0,g=b}finally{try{m||null==E.return||E.return()}finally{if(_)throw g}}}},{key:"uniqueName",value:function(e,t){return t in e?this.uniqueName(e,"U_"+t):t}},{key:"addHandlers",value:function(e,t,n){n.setUpdateUICallback(function(e){t[n.dataName]=e}),e.listen(),e.onChange(function(e){t[n.dataName]=e,n.setFromUI(e)}),e.onFinishChange=function(e){return n.setFromUI(e)}}},{key:"setVisible",value:function(e){if(!this._gui)throw new Error("cannot set visible: DatGui not initialized");this._visible=e,this._gui.domElement.parentElement&&(this._gui.domElement.parentElement.style.zIndex=(e?999:0).toString(),this._gui.domElement.parentElement.style.visibility=(e?"visible":"hidden").toString())}},{key:"destruct",value:function(){this._gui&&(this._gui.domElement.parentElement&&this._gui.domElement.parentElement.removeChild(this._gui.domElement),delete this._gui),p()(c()(t.prototype),"destruct",this).call(this)}}]),t}(v),ut=function(e){function t(){var e;return o()(this,t),(e=l()(this,c()(t).call(this))).params=[],e.children=[],e}return d()(t,e),r()(t,[{key:"addGroup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new t;return r.init(e,n,i),this.children.push(r),r}},{key:"removeGroup",value:function(e){var t=null,n=!0,i=!1,r=void 0;try{for(var a,o=this.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(console.log("checking",s.name,e),s.name===e){t=s;break}}}catch(l){i=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}t&&this.children.splice(this.children.indexOf(t),1)}},{key:"removeAllGroups",value:function(){this.children=[]}},{key:"pushGroup",value:function(e){this.children.push(e)}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.name=e,this.collapsed=n,this.materials=t?[].concat(t):[]}},{key:"addParamFloat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=new it(this,e,t,n,i,[],null,r);return this.params.push(a),a}},{key:"addShaderParamFloat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.materials&&0!=this.materials.length||console.warn("Adding shader param to param group that has no materials",e);var o=new it(this,e,t,n,i,this.materials,r,a);return this.params.push(o),o}},{key:"addParamInt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=new rt(this,e,t,n,i,null,null,r);return this.params.push(a),a}},{key:"addShaderParamInt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.materials&&0!=this.materials.length||console.warn("Adding shader param to param group that has no materials");var o=new rt(this,e,t,n,i,this.materials,r,a);return this.params.push(o),o}},{key:"addParamBool",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new at(this,e,t,null,null,n);return this.params.push(i),i}},{key:"addShaderParamBool",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.materials&&0!=this.materials.length||console.warn("Adding shader param to param group that has no materials");var r=new at(this,e,t,this.materials,n,i);return this.params.push(r),r}},{key:"addParamColor",value:function(e,t,n){var i=new st(this,e,t,[],null,n);return this.params.push(i),i}},{key:"addShaderParamColor",value:function(e,t,n,i){this.materials&&0!=this.materials.length||console.warn("Adding shader param to param group that has no materials");var r=new st(this,e,t,this.materials,n,i);return this.params.push(r),r}},{key:"addButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new ot(this,e,t);return this.params.push(n),n}},{key:"getParameters",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e=e.concat(o.getParameters())}}catch(f){n=!0,i=f}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var s=!0,l=!1,u=void 0;try{for(var c,h=this.params[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;e.push(d)}}catch(f){l=!0,u=f}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}return e}},{key:"destruct",value:function(){if(this.params)for(var e=0;e<this.params.length;e++)this.params[e].isDestructed||this.params[e].destruct();if(this.children)for(var n=0;n<this.children.length;n++)this.children[n].isDestructed||this.children[n].destruct(),this.children[n].destruct();p()(c()(t.prototype),"destruct",this).call(this)}}],[{key:"exposeParam",value:function(e){e.expose()}}]),t}(v),ct=n(101),ht=function(){function e(t,n,i){o()(this,e),this._pointFrequency=0,this._introAnim=0,this._renderer=t,this._scroll=i,this._particleMaterial=new U(this._renderer,n,"valleyParticles"),this._particleMaterial.setPreMultipliedAlphaBlending(),this._particleMaterial.setCullingDisabled(),this._particleMaterial.depthTest=!1,this._heightField=new ve(this._renderer,n,ct("./height.jpg")),this._colorRamp=new ve(this._renderer,n,ct("./ramp.png"),!1,!1,!1),this._transform=new W,this._transform.setScaleScalar(7500),this._transform.setPositionValues(0,-200,1e4),this.generateParticleMesh(15e4)}return r()(e,[{key:"generateParticleMesh",value:function(e){this._particleMesh=new X(this._renderer,!0);for(var t=new Float32Array(3*e*4),n=new Float32Array(2*e*4),i=new Float32Array(2*e*4),r=[[-1,1,0,0,1],[1,1,0,1,1],[1,-1,0,1,0],[-1,-1,0,0,0]],a=0;a<e;++a){for(var o=0;o<12;++o)t[3*a*4+o]=r[Math.floor(o/3)][o%3];for(var s=0;s<8;++s)n[2*a*4+s]=r[Math.floor(s/2)][3+s%2];for(var l=Math.sqrt(e),u=l,c=a%l/l*2-1,h=Math.floor(a/u)/u*2-1,d=0;d<4;++d)i[2*a*4+2*d+0]=c,i[2*a*4+2*d+1]=h;this._pointFrequency=u}this._particleMesh.setPositions(t,!1),this._particleMesh.setUV0(n,!1),this._particleMesh.setUV1(i,!1);for(var f=new Uint32Array(6*e),p=0;p<e;++p)f[6*p+0]=4*p+0,f[6*p+1]=4*p+3,f[6*p+2]=4*p+1,f[6*p+3]=4*p+1,f[6*p+4]=4*p+3,f[6*p+5]=4*p+2;this._particleMesh.setIndices32(f)}},{key:"init",value:function(e){var t=e.addGroup("Particles",this._particleMaterial);t.addShaderParamFloat("_ParticleSize",60,0,100),t.addShaderParamFloat("_Height",.1,0,.1),t.addShaderParamFloat("_NoiseScale",10,0,10),t.addShaderParamFloat("_NoisePlacement",1,0,1),t.addShaderParamFloat("_FadeSpatialFrequency",.5,0,10),t.addShaderParamFloat("_FadeTemporalFrequency",1,0,10),this._particleMaterial.setTexture("_HeightField",this._heightField),this._particleMaterial.setTexture("_ColorRamp",this._colorRamp),this._particleMaterial.setFloat("_PointFrequency",this._pointFrequency)}},{key:"startIntro",value:function(){this._introAnim=1}},{key:"update",value:function(e,t){this._particleMaterial.setFloat("_IntroScale",ie.lerp(5,.4,t.introProgress)),this._introAnim=ie.clamp01(ie.lerp(this._introAnim,0,.25*re.getInstance().deltaTime))}},{key:"render",value:function(e){this._particleMaterial.setFloat("_Time",re.getInstance().time),this._particleMaterial.setFloat("_Progress",this._scroll.getProgress()),this._particleMaterial.setFloat("_Aspect",1/this._renderer.getAspect()),this._particleMaterial.setFloat("_ScreenWidth",this._renderer.getRenderWidth()),this._particleMaterial.setVector3("_CamPos",e.getWorldPosition()),this._particleMaterial.setMatrix("_ViewProjection",e.getViewProjection()),this._particleMaterial.setMatrix("_Model",this._transform.getWorldMatrix()),this._particleMaterial.setFloat("_IntroAnim",this._introAnim),this._renderer.draw(this._particleMesh,this._particleMaterial)}}]),e}(),dt=n(101),ft=function(){function e(t,n,i){o()(this,e),this._time=13.37,this._renderer=t,this._scroll=i,this._material=new U(this._renderer,n,"path"),this._material.setCullingDisabled(),this._material.setAlphaBlending(),this._material.depthWrite=!1,this._petalTex=new ve(this._renderer,n,dt("./petals.png"),!0,!0,!1),this._noiseTex=new ve(this._renderer,n,dt("./perlin_doNotCompress.png"),!0,!0,!1),this.generateParticleMesh(3e3)}return r()(e,[{key:"generateParticleMesh",value:function(e){this._mesh=new X(this._renderer);for(var t=new Float32Array(3*e*4),n=new Float32Array(2*e*4),i=new Float32Array(2*e*4),r=[[-1,1,0,0,1],[1,1,0,1,1],[1,-1,0,1,0],[-1,-1,0,0,0]],a=0;a<e;++a){for(var o=0;o<12;++o)t[4*a*3+o]=r[Math.floor((o+.5)/3)][o%3];for(var s=0;s<8;++s)n[4*a*2+s]=r[Math.floor(s/2)][3+s%2];for(var l=e/50,u=a%50/50,c=Math.floor(a/50)/l,h=0;h<4;++h)i[2*a*4+2*h+0]=2*c-1,i[2*a*4+2*h+1]=u;this._pointFrequency=50}this._mesh.setPositions(t,!1),this._mesh.setUV0(n,!1),this._mesh.setUV1(i,!1);for(var d=new Uint32Array(6*e),f=0;f<e;++f)d[6*f+0]=4*f+0,d[6*f+1]=4*f+3,d[6*f+2]=4*f+1,d[6*f+3]=4*f+1,d[6*f+4]=4*f+3,d[6*f+5]=4*f+2;this._mesh.setIndices32(d)}},{key:"init",value:function(e){var t=this,n=e.addGroup("Path",this._material);n.addShaderParamFloat("_ParticleSize",.7,0,1.5);var i=n.addParamFloat("_FadeStart",.85,0,1,function(e){e*=t._scroll.getPathHeight(),t._material.setFloat("_FadeStart",e)}),r=n.addParamFloat("_FadeEnd",.95,0,1,function(e){e*=t._scroll.getPathHeight(),t._material.setFloat("_FadeEnd",e)});n.addShaderParamFloat("_NoiseScale",.79,0,10),n.addShaderParamFloat("_XOffsetScale",1,0,10),n.addShaderParamFloat("_YOffsetScale",1.3,0,5),n.addShaderParamFloat("_ZOffsetScale",2.3,0,5),this._focalDepth=n.addShaderParamFloat("_FocalDepth",18,0,40),n.addShaderParamFloat("_FStop",1.5,.5,3),n.addShaderParamFloat("_FocalLength",200,1,200),n.addShaderParamFloat("_FSize",.01,0,.01),n.addShaderParamFloat("_FAlphaPow",.03,0,.05),this._material.setTexture("_Texture",this._petalTex),this._material.setTexture("_Noise",this._noiseTex),this._material.setFloat("_FadeStart",i.getValue()*this._scroll.getPathHeight()),this._material.setFloat("_FadeEnd",r.getValue()*this._scroll.getPathHeight()),this._material.setFloat("_PointFrequency",this._pointFrequency)}},{key:"render",value:function(e){var t=this._scroll.getDampedSpeed();this._time+=re.getInstance().deltaTime*(1+10*t),this._focalDepth.setValue(ie.lerp(18,12,ie.clamp01(2*this._scroll.getDampedSpeed()))),this._material.setFloat("_SpeedModifier",t),this._material.setFloat("_PathWidth",this._scroll.getPathWidth()),this._material.setFloat("_PathHeight",this._scroll.getPathHeight()),this._material.setFloat("_Progress",this._scroll.getProgress()),this._material.setFloat("_Time",this._time),this._material.setFloat("_Aspect",1/this._renderer.getAspect()),this._material.setVector2Array("_Path",this._scroll.getPathSegments()),this._material.setVector3("_CamPos",e.getWorldPosition()),this._material.setMatrix("_ViewProjection",e.getViewProjection()),this._renderer.draw(this._mesh,this._material)}}]),e}(),pt=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o()(this,t),n=l()(this,c()(t).call(this,e)),i?n.positionsOnly(r):n.createWithNormalsAndUV(r),n}return d()(t,e),r()(t,[{key:"positionsOnly",value:function(e){var t=new Float32Array([1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1]);this.setPositions(t,e);var n=new Uint16Array([0,3,2,0,1,3,5,6,7,5,4,6,1,7,3,1,5,7,4,2,6,4,0,2,0,5,1,0,4,5,6,3,7,6,2,3]);this.setIndices(n)}},{key:"createWithNormalsAndUV",value:function(e){var t=new Float32Array([-1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,1,-1,1,-1,-1,-1,-1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,1,1,1,1,-1,1]);this.setPositions(t,e);for(var n=new Float32Array(48),i=0,r=0;r<6;r++)n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=1,n[i++]=1,n[i++]=1,n[i++]=1,n[i++]=0;this.setUV0(n,e);for(var a=new Float32Array(72),o=0,s=0;s<4;s++)a[o++]=-1,a[o++]=0,a[o++]=0;for(var l=0;l<4;l++)a[o++]=1,a[o++]=0,a[o++]=0;for(var u=0;u<4;u++)a[o++]=0,a[o++]=-1,a[o++]=0;for(var c=0;c<4;c++)a[o++]=0,a[o++]=1,a[o++]=0;for(var h=0;h<4;h++)a[o++]=0,a[o++]=0,a[o++]=-1;for(var d=0;d<4;d++)a[o++]=0,a[o++]=0,a[o++]=1;this.setNormals(a,e);for(var f=new Uint16Array(36),p=0,v=0;v<6;v++){var m=4*v;f[p++]=m+0,f[p++]=m+2,f[p++]=m+1,f[p++]=m+2,f[p++]=m+0,f[p++]=m+3}this.setIndices(f)}}]),t}(X),vt=function(e){function t(){var e;return o()(this,t),(e=l()(this,c()(t).apply(this,arguments))).transform=new W,e._worldViewProjection=b.b.create(),e}return d()(t,e),r()(t,[{key:"draw",value:function(e,t){if(!this.material)throw new ReferenceError("cannot render Model: material not defined");if(!this.mesh)throw new ReferenceError("cannot render Model: mesh not defined");var n=t||this.material;if(!n)throw new ReferenceError("cannot render Model: material not defined");n.hasUniform("_ModelViewProjection")&&(b.b.multiply(this._worldViewProjection,e.getViewProjection(),this.transform.getWorldMatrix()),n.setMatrix("_ModelViewProjection",this._worldViewProjection)),n.hasUniform("_Model")&&n.setMatrix("_Model",this.transform.getWorldMatrix()),n.setMatrix("_ViewProjection",e.getViewProjection()),this.mesh.renderer.draw(this.mesh,n)}},{key:"clone",value:function(){var e=new t;return e.mesh=this.mesh,e.material=this.material,e}}]),t}(v),mt=function(){function e(t,n,i){o()(this,e),this.loaded=!1,this.exportName=i||"default",this.importPromise=n,t.add(this)}return r()(e,[{key:"load",value:function(e){var t=this;this.importPromise.then(function(n){t.data_=n[t.exportName],t.loaded=!0,e.call(t)})}},{key:"data",get:function(){if(void 0===this.data_)throw new Error("data is being read from ImportLoader but it has not finished loading");return this.data_}}]),e}(),_t=n(101);!function(e){e[e.OFRENDA_A=0]="OFRENDA_A",e[e.OFRENDA_B=1]="OFRENDA_B",e[e.OFRENDA_C=2]="OFRENDA_C"}(He||(He={}));var gt,yt=function(){function e(t,i,r,a){o()(this,e),this._meshes={},this._transforms={},this._meshNameToId={},this._transformNameToId={},this._rootTransform=new W,this._modelViewProjection=b.b.create(),this._renderer=t,this._scroll=r;var s="";a==He.OFRENDA_A?s="ofrenda_a":a==He.OFRENDA_B?s="ofrenda_b":a==He.OFRENDA_C&&(s="ofrenda_c"),this._jsonLoader=new mt(i,n(767)("./"+s+".json")),this._ofrendaMaterial=new U(this._renderer,i,"ofrenda"),this._ofrendaPortraitMaterial=new U(this._renderer,i,"ofrendaPortrait"),this._ofrendaTex=new ve(this._renderer,i,_t("./"+s+"_albedo.jpg"),!0,!0,!0),this._ofrendaTransparencyTex=new ve(this._renderer,i,_t("./"+s+"_albedo_transparency.png"),!0,!0,!0),this._candleMesh=new z(this._renderer,1,1,!1),this._candleMaterial=new U(this._renderer,i,"candleFlame"),this._noiseTex=new ve(this._renderer,i,_t("./perlin_doNotCompress.png"),!1,!0,!1),this._flameTex=new ve(this._renderer,i,_t("./candle_flame.png"),!1,!0,!0),this._ofrendaMaterial.setAlphaBlending(),this._ofrendaMaterial.depthWrite=!0,this._ofrendaPortraitMaterial.setAlphaBlending(),this._ofrendaPortraitMaterial.depthWrite=!0,this._candleMaterial.setAdditiveBlending(),this._candleMaterial.setCullingDisabled()}return r()(e,[{key:"init",value:function(){this._candleMaterial.setTexture("_Flame",this._flameTex),this._candleMaterial.setTexture("_Noise",this._noiseTex),this.parseJson(this._jsonLoader.data)}},{key:"parseJson",value:function(e){if(!e)throw new Error("Cannot parse json: json data not loaded");for(var t=[],n=0;n<e.transforms.length;n++){var i=e.transforms[n],r=new W;r.setPositionRotationScale(new x(i.position[0],i.position[1],i.position[2]),new j(i.rotation[0],i.rotation[1],i.rotation[2],i.rotation[3]),new x(i.scale[0],i.scale[1],i.scale[2])),r.name=i.name,r.id=i.id,this._transforms[i.parentId]&&r.setParent(this._transforms[i.parentId]),this._transforms[i.id]=r,this._transformNameToId[i.name]=i.id,t.push(r)}for(var a=0;a<e.objects.length;a++){var o=e.objects[a],s=new vt;null!=this._transforms[o.transformId]&&(s.transform=this._transforms[o.transformId]);var l=o.instanceId;if(this._meshes[l])s.mesh=this._meshes[l];else{s.mesh=new X(this._renderer),s.mesh.animatorId=o.animatorId,o.indices.length>0&&s.mesh.setIndices(new Uint16Array(o.indices));for(var u=0;u<o.attributes.length;u++){var c=o.attributes[u];s.mesh.setAttribute(c.name,c.stride,new Float32Array(c.data))}this._meshes[l]=s.mesh,this._meshNameToId[s.transform.name]=l}}this.getTransformByName("Opaque").setParent(this._rootTransform),this.getTransformByName("Alpha").setParent(this._rootTransform),this.getTransformByName("Photo").setParent(this._rootTransform),this.getTransformByName("Candles").setParent(this._rootTransform),this.getTransformByName("Lights").setParent(this._rootTransform)}},{key:"getTransformByName",value:function(e){return this._transforms[this._transformNameToId[e]]}},{key:"getMeshByName",value:function(e){return this._meshes[this._meshNameToId[e]]}},{key:"render",value:function(e,t){var n=t.getPosition().z-e.getWorldPosition().z,i=this._scroll.getPathHeight(),r=1-ie.smoothStep(.6*i,.95*i,n),a=re.getInstance().time;if(r>.01){this._rootTransform.setPosition(t.getPosition()),this._rootTransform.setRotation(t.getRotation()),b.b.mul(this._modelViewProjection,e.getViewProjection(),this.getTransformByName("Photo").getWorldMatrix()),this._ofrendaPortraitMaterial.setMatrix("_ModelViewProjection",this._modelViewProjection),this._ofrendaPortraitMaterial.setMatrix("_Model",this.getTransformByName("Photo").getWorldMatrix()),this._ofrendaPortraitMaterial.setTexture("_PortraitTex",t.getPortraitTexture()),this._ofrendaPortraitMaterial.setFloat("_Animate",r),this._renderer.draw(this.getMeshByName("Photo"),this._ofrendaPortraitMaterial),b.b.mul(this._modelViewProjection,e.getViewProjection(),this.getTransformByName("Opaque").getWorldMatrix()),this._ofrendaMaterial.setMatrix("_ModelViewProjection",this._modelViewProjection),this._ofrendaMaterial.setMatrix("_Model",this.getTransformByName("Opaque").getWorldMatrix()),this._ofrendaMaterial.setFloat("_Time",a),this._ofrendaMaterial.setFloat("_Animate",r);var o=this.getTransformByName("Lights").getChildren();this._ofrendaMaterial.setInt("_LightCount",o.length);for(var s=0;s<o.length;++s)this._ofrendaMaterial.setVector3("_LightPos["+s+"]",o[s].getWorldPosition()),this._ofrendaMaterial.setFloat("_LightRadius["+s+"]",o[s].getScale().x),this._ofrendaMaterial.setFloat("_LightDistort["+s+"]",Math.sin(2.16*a+Math.cos(3.14157*a+1.61803398875*s)*Math.sin(4.13*a+1.61803398875*s)+1.61803398875*s));this._ofrendaMaterial.setTexture("_BakedColorTex",this._ofrendaTex),this._renderer.draw(this.getMeshByName("Opaque"),this._ofrendaMaterial),this._ofrendaMaterial.setTexture("_BakedColorTex",this._ofrendaTransparencyTex),this._renderer.draw(this.getMeshByName("Alpha"),this._ofrendaMaterial),this._candleMaterial.setMatrix("_View",e.getViewMatrix()),this._candleMaterial.setMatrix("_ViewProjection",e.getViewProjection()),this._candleMaterial.setVector2("_Scale",new P(.05,.25)),this._candleMaterial.setFloat("_Time",a),this._candleMaterial.setFloat("_Animate",r);for(var l=this.getTransformByName("Candles").getChildren(),u=0;u<l.length;++u)this._candleMaterial.setFloat("_CandleDistort",ie.lerp(1,1.1,Math.sin(a+Math.cos(3.16*a+1.61803398875*u)*Math.sin(1.17*a+1.61803398875*u)+1.61803398875*u))),this._candleMaterial.setVector3("_CenterPos",l[u].getWorldPosition()),this._candleMaterial.setFloat("_SwayOffset",.131*u),this._renderer.draw(this._candleMesh,this._candleMaterial)}}}]),e}(),Et=n(44),At=n.n(Et);!function(e){e[e.OFRENDA_A=0]="OFRENDA_A",e[e.OFRENDA_B=1]="OFRENDA_B",e[e.OFRENDA_C=2]="OFRENDA_C"}(gt||(gt={}));var Tt=function(){function e(t){o()(this,e),this._quat=new j,this._variation=t,this._transform=new W}return r()(e,[{key:"getTransform",value:function(){return this._transform}},{key:"getPosition",value:function(){return this._transform.getWorldPosition()}},{key:"setPosition",value:function(e){this._transform.setPosition(e)}},{key:"getRotation",value:function(){return this._transform.getRotation()}},{key:"setRotation",value:function(e){this._transform.setRotation(j.fromEuler(this._quat,0,e,0))}},{key:"getVariation",value:function(){return this._variation}},{key:"setVariation",value:function(e){this._variation=e}},{key:"getPortraitTexture",value:function(){return this._ofrendaPortraitTex}},{key:"setPortraitTexture",value:function(e){this._ofrendaPortraitTex=e}},{key:"getName",value:function(){return this._name}},{key:"setName",value:function(e){this._name=e}},{key:"getCacheIndex",value:function(){return this._cacheIndex}},{key:"setCacheIndex",value:function(e){this._cacheIndex=e}}]),e}(),bt=n(61),Rt=n(46),xt=function e(t,n){o()(this,e),this.loaded=!1,this.variation=-1,this.index=-1,this.image=t,this.name=n},kt=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return d()(t,e),t}(Object(bt.createEventClass)()("QUEUE_LOAD_EMPTY")),Pt=function(){function e(t){o()(this,e),this.eventDispatcher=new At.a,this._queue=[],this._portraits=[],this._loadCount=0,this._index=0,this._renderer=t;var n=Rt.b;this._portraits=new Array(n);for(var i=0;i<this._portraits.length;++i)this._portraits[i]=new xt(new pe(this._renderer,he.RGBA_UNSIGNED_BYTE,!0,!0,!0),"");Rt.b>n&&console.error("WebGL: Ofrenda cache size is less than OFRENDA_LIMIT from DB; should be larger or equal!")}return r()(e,[{key:"queueImages",value:function(e){for(var t in e){var n=e[t],i=new Image;i.portraitIndex=this._loadCount++,i.crossOrigin="Anonymous",i.srcURL=n.image;var r=i.portraitIndex%this._portraits.length;this._portraits[r].name=n.offerName,this._portraits[r].variation=n.offerVariation,this._queue.push(i)}this.recurseLoadImage()}},{key:"getNextPortrait",value:function(){var e=this._portraits[this._index%this._portraits.length];return e.index=this._index%this._portraits.length,this._index=this._index+1%this._portraits.length,this._index%Rt.b==Rt.b-4&&this.eventDispatcher.dispatchEvent(new Xt(Xt.types.REQUEST,{})),e}},{key:"getCache",value:function(){return this._portraits}},{key:"recurseLoadImage",value:function(){var e=this;if(0!=this._queue.length){var t=this._queue.shift();t?(t.addEventListener("load",function(){var n=t.portraitIndex%e._portraits.length;e._portraits[n].image.setImage(t),e._portraits[n].loaded=!0,e.recurseLoadImage()}),t.addEventListener("error",function(){console.log("failed to load image!"),e.recurseLoadImage()}),t.src=t.srcURL):console.log("Image in queue is undefined!")}else this.eventDispatcher.dispatchEvent(new kt(kt.types.QUEUE_LOAD_EMPTY))}}]),e}(),wt=n(101),St=function(e){function t(e,n,i){var r;o()(this,t),(r=l()(this,c()(t).call(this))).eventDispatcher=new At.a,r._ofrendaProgressValues=[],r._prevOfrendaNameStatus=!1,r._ofrendas=[],r._ofrendaVariations=[],r._renderer=e,r._scroll=i,r._mesh=new pt(r._renderer),r._material=new U(r._renderer,n,"ofrenda"),r._defaultPortraitTex=new ve(r._renderer,n,wt("./portrait_default.png"),!0,!0,!0),r._portraits=new Pt(r._renderer),r._ofrendaVariations.push(new yt(r._renderer,n,r._scroll,gt.OFRENDA_A)),r._ofrendaVariations.push(new yt(r._renderer,n,r._scroll,gt.OFRENDA_B)),r._ofrendaVariations.push(new yt(r._renderer,n,r._scroll,gt.OFRENDA_C));for(var a=0;a<t.OFRENDA_COUNT;++a)r._ofrendas.push(new Tt(gt.OFRENDA_A)),r._ofrendaProgressValues.push(1/t.OFRENDA_COUNT+a/t.OFRENDA_COUNT),r.spawnNewOfrenda(a);return r._portraits.eventDispatcher.addEventListener(Xt.types.REQUEST,function(e){r.eventDispatcher.dispatchEvent(new Xt(Xt.types.REQUEST,{}))}),r}return d()(t,e),r()(t,[{key:"init",value:function(e){for(var t=0;t<this._ofrendaVariations.length;++t)this._ofrendaVariations[t].init()}},{key:"setNextOfrendas",value:function(e){this._portraits.queueImages(e)}},{key:"reset",value:function(){for(var e=0;e<t.OFRENDA_COUNT;++e){this._ofrendaProgressValues[e]=1/t.OFRENDA_COUNT+e/t.OFRENDA_COUNT;var n=t.getOfrendaPosition(this._scroll,this._ofrendaProgressValues[e]);this._ofrendas[e].setPosition(n.worldPos),this._ofrendas[e].setRotation(n.left?30:-30)}}},{key:"getClosestOfrenda",value:function(){for(var e=this._scroll.getProgress()*this._scroll.getPathHeight(),t=new x,n=1e5,i=-1,r=0;r<this._ofrendas.length;++r){var a=this._ofrendas[r].getPosition().z-e;a>=0&&a<n&&(n=a,t=this._ofrendas[r].getPosition(),i=r)}return{position:t,distance:n,index:i}}},{key:"spawnNewOfrenda",value:function(e){var n=t.getOfrendaPosition(this._scroll,this._ofrendaProgressValues[e]);this._ofrendas[e].setPosition(n.worldPos),this._ofrendas[e].setRotation(n.left?30:-30);var i=this._portraits.getNextPortrait();this._ofrendas[e].setCacheIndex(i.index)}},{key:"update",value:function(e,t){for(var n=0;n<this._ofrendas.length;++n){this._scroll.getProgress()-this._ofrendaProgressValues[n]>=0&&(this._ofrendaProgressValues[n]+=1,this.spawnNewOfrenda(n));var i=this._portraits.getCache()[this._ofrendas[n].getCacheIndex()];i.loaded?this._ofrendas[n].setPortraitTexture(i.image):this._ofrendas[n].setPortraitTexture(this._defaultPortraitTex),this._ofrendas[n].setName(i.name),this._ofrendas[n].setVariation(i.variation-1)}var r=this.getClosestOfrenda(),a=Math.abs(r.distance-13)<3&&t.introFinished;this._prevOfrendaNameStatus!=a&&(this._prevOfrendaNameStatus=a,this.eventDispatcher.dispatchEvent(new Xt(Xt.types.CHANGE_NAME,{visible:a,name:this._ofrendas[r.index].getName()})))}},{key:"render",value:function(e){for(var n=new Array(this._ofrendas.length),i=0;i<t.OFRENDA_COUNT;++i)n[i]=this._ofrendas[i];n.sort(function(e,t){return t.getPosition().z-e.getPosition().z});for(var r=0;r<t.OFRENDA_COUNT;++r)n[r].getVariation()>=0?this._ofrendaVariations[n[r].getVariation()].render(e,n[r]):this._ofrendaVariations[0].render(e,n[r])}},{key:"destruct",value:function(){p()(c()(t.prototype),"destruct",this).call(this)}}],[{key:"getOfrendaPosition",value:function(e,n){var i=new x;e.getPathWorldPosition(i,n);var r=(9+n*t.OFRENDA_COUNT)%2>=1;return i.x+=(r?1:-1)*e.getPathWidth()*4,i.y+=.5,{worldPos:i,left:r,name:name}}}]),t}(v);St.OFRENDA_COUNT=5;var Mt=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;return o()(this,t),(i=l()(this,c()(t).call(this,r,a,s))).OFFSET_HEIGHT=3,i.OFFSET_DEPTH=0,i.eventDispatcher=new At.a,i.introProgress=0,i.introFinished=!0,i._position=new x,i._targetPos=new x,i._tmpPos=new x,i._tmpVec=new x,i._introDuration=0,i._startCamPos=new x,i._startCamTarget=new x,i._ofrendaTarget=new x,i._horizon=0,i._forwardAtStart=(new x).copy(x.FORWARD),i._offset=new P,i._offsetLerped=new P,i._renderer=e,i._scroll=n,i.reset(!0),i.setHorizon(.75),i}return d()(t,e),r()(t,[{key:"startIntro",value:function(e){var t=this,n=new Promise(function(e,n){t._introPromiseResolve=e});return this.introProgress=0,this._introDuration=e,n}},{key:"setHorizon",value:function(e){this._horizon=e;var t=this.projection.getFOV()/180*Math.PI,n=Math.tan(t/2),i=2*(this._horizon-.5)*n;this._forwardAtStart.setValues(0,i,1).normalize()}},{key:"init",value:function(e){var t=e.addGroup("Camera");this._ofrendaOffset=t.addParamFloat("OfrendaOffset",.6,0,2)}},{key:"reset",value:function(e){e?this._position.copy(new x(0,500,0)):this._position.copy(new x(0,3,6)),this._targetPos.copy(this._position),this._targetPos.add(x.FORWARD),this._startCamPos.copy(this._position),this._startCamTarget.copy(this._targetPos),this.introProgress=0,this._introPromiseResolve=null}},{key:"followPath",value:function(e){this._scroll.getPathWorldPosition(this._position),this._position.y=this._position.y+this.OFFSET_HEIGHT,this._position.z=this._position.z+this.OFFSET_DEPTH,this.calculateOfrendaTarget(),this._targetPos.copy(this._ofrendaTarget)}},{key:"calculateOfrendaTarget",value:function(){var e=this._scroll.getProgress()*St.OFRENDA_COUNT+this._ofrendaOffset.getValue(),t=ie.smootherStep01(ie.fract(e)),n=St.getOfrendaPosition(this._scroll,Math.floor(e)/St.OFRENDA_COUNT),i=St.getOfrendaPosition(this._scroll,Math.floor(e+1)/St.OFRENDA_COUNT);Math.floor(e)/St.OFRENDA_COUNT<0&&(n.worldPos.copy(this._position),n.worldPos.add(x.FORWARD)),Math.floor(e+1)/St.OFRENDA_COUNT<0&&(i.worldPos.copy(this._position),i.worldPos.add(x.FORWARD)),x.lerp(this._ofrendaTarget,n.worldPos,i.worldPos,t)}},{key:"update",value:function(){if(this.calculateOfrendaTarget(),this._introPromiseResolve){this.introProgress=ie.clamp01(this.introProgress+re.getInstance().deltaTime/this._introDuration),this.introFinished=!1,this._scroll.getPathWorldPosition(this._tmpPos),this._tmpPos.y=this._tmpPos.y+this.OFFSET_HEIGHT,this._tmpPos.z=this._tmpPos.z+this.OFFSET_DEPTH,x.lerp(this._tmpPos,this._startCamPos,this._tmpPos,Math.pow(ie.smootherStep01(this.introProgress),.5)),this._position.copy(this._tmpPos),this._tmpPos.copy(this._position),this._tmpPos.add(x.FORWARD);var e=ie.clamp01(2*(this.introProgress-.5)),t=ie.lerp(this._tmpPos.y,this._ofrendaTarget.y,ie.smootherStep01(Math.pow(e,5)));x.lerp(this._tmpPos,this._tmpPos,new x(this._ofrendaTarget.x,t,this._ofrendaTarget.z),Math.pow(this.introProgress,4)),this._scroll.setProgress(.08*ie.smoothStep(0,1,this.introProgress)),this._targetPos.copy(this._tmpPos)}this._introPromiseResolve&&this.introProgress>=1&&(this._introPromiseResolve(1),this._introPromiseResolve=void 0,this.introFinished=!0),this._tmpPos.copy(this._position),this._tmpPos.add(this._forwardAtStart),x.lerp(this._targetPos,this._tmpPos,this._targetPos,ie.smootherStep01(this.introProgress)),this.lookAt(this._position,this._targetPos),this._targetPos.subtract(this._position),this._targetPos.normalize(),this._targetPos.multiplyScalar(2),this._targetPos.add(this._position),this._offset.copy(this._renderer.getMouseListener().getScreenPos()),this._offset.multiplyScalar(.025*(.25+.75*this.introProgress)),P.lerp(this._offsetLerped,this._offsetLerped,this._offset,.02),this._tmpPos.copy(this._position),this._tmpVec.copy(this.view.transform.getWorldRight()),this._tmpVec.multiplyScalar(-this._offsetLerped.x*this._renderer.getAspect()),this._tmpPos.add(this._tmpVec),this._tmpVec.copy(this.view.transform.getWorldUp()),this._tmpVec.multiplyScalar(-this._offsetLerped.y),this._tmpPos.add(this._tmpVec),this.lookAt(this._tmpPos,this._targetPos)}}]),t}(Te),Ct=n(19),Ft=n.n(Ct),Nt=function(){function e(t){var n=this;o()(this,e),this.eventDispatcher=new At.a,this._progress=0,this._width=2,this._height=100,this._pathSegments=new Float32Array(200),this._firstScroll=!1,this._inputAccum=0,this._dampedSpeed=0,this._renderer=t,this.generatePathCurve(),t.getMouseListener().addWheelEvent(function(e){return n.handleMouseScroll(e)})}return r()(e,[{key:"init",value:function(e){this._ofrendas=e}},{key:"setState",value:function(e){this._firstScroll=!1}},{key:"generatePathCurve",value:function(){for(var e=this._pathSegments.length,t=0;t<e;t+=2){var n=2*Math.sin(t/e*6.28318*1*1+2.17*Math.cos(t/e)*1),i=2*Math.sin(t/e*6.28318*1*2),r=.8*Math.sin(t/e*6.28318*1*1),a=.8*Math.sin(t/e*6.28318*1*2);this._pathSegments[t+0]=n+.5*i,this._pathSegments[t+1]=r+.5*a}}},{key:"getPathWorldPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=t>=0?t:this.getProgress(),i=n%1*this._pathSegments.length/2,r=i-Math.floor(i);i=2*Math.floor(i);var a=this._pathSegments[(i+0)%this._pathSegments.length],o=this._pathSegments[(i+1)%this._pathSegments.length],s=this._pathSegments[(i+2)%this._pathSegments.length],l=this._pathSegments[(i+3)%this._pathSegments.length],u=ie.lerp(a,s,r),c=ie.lerp(o,l,r),h=u*this.getPathWidth(),d=c,f=n*this.getPathHeight();e.x=h,e.y=d,e.z=f}},{key:"setProgress",value:function(e){this._progress=e}},{key:"getProgress",value:function(){return this._progress}},{key:"getPathWidth",value:function(){return this._width}},{key:"getPathHeight",value:function(){return this._height}},{key:"getPathSegments",value:function(){return this._pathSegments}},{key:"getSpeed",value:function(){return 10*this._inputAccum}},{key:"getDampedSpeed",value:function(){return this._dampedSpeed}},{key:"resetSpeed",value:function(){this._inputAccum=0,this._dampedSpeed=0}},{key:"handleMouseScroll",value:function(e){var t=Math.abs(.01*Math.min(e,0));this._inputAccum=Math.min(this._inputAccum+t,.1)}},{key:"update",value:function(e){if(Ct.mobile||Ct.tablet){var t=Math.abs(Math.min(this._renderer.getMouseListener().getNormalizedVelocity().y,0));this._inputAccum=Math.min(this._inputAccum+.4*t,.1)}this._inputAccum*=.98,this.setProgress(this.getProgress()+this._inputAccum*re.getInstance().deltaTime),this._dampedSpeed=ie.lerp(this._dampedSpeed,ie.clamp01(this.getSpeed()),.02),!this._firstScroll&&this._inputAccum>.01&&(this._firstScroll=!0,this.eventDispatcher.dispatchEvent(new Xt(Xt.types.FIRST_SCROLL,{})))}}]),e}(),Lt=n(486),It=n.n(Lt),Ot=n(487),Bt=n.n(Ot),Dt=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,t),(n=l()(this,c()(t).call(this,e,"Bloom")))._texelSize=new P,n.setSettings(i,{downSize:0,threshold:.8,passes:7,strength:.5,pow:1}),n._scalingMaterial=new F(e,"BloomBlur",new D(e).init("BloomBlur",n.getBaseVSCode(),It.a)),n._scalingMaterial.setAdditiveBlending(),n._buffers=n.createBuffers(t.MAX_PASSES),n}return d()(t,e),r()(t,[{key:"getFSCode",value:function(){return Bt.a}},{key:"shaderSetsColor",value:function(){return!0}},{key:"createBuffers",value:function(e){for(var t=[],n=0;n<e;n++)t.push(new Re(this._renderer,1,1,he.RGBA_UNSIGNED_BYTE,!1,!0,!0,!1));return t}},{key:"init",value:function(e){p()(c()(t.prototype),"init",this).call(this,e);var n=e.addGroup("Bloom",this.getMaterial());this._downSize=n.addParamInt("_BloomDownSize",this._settings.downSize,0,3),this._threshold=n.addParamFloat("_BloomThreshold",this._settings.threshold,0,2),this._passCount=n.addParamInt("_BloomPasses",this._settings.passes,1,t.MAX_PASSES),this._strength=n.addShaderParamFloat("_BloomStrength",this._settings.strength,0,2),n.addShaderParamFloat("_BloomPow",this._settings.pow,.5,1)}},{key:"getStrengthParam",value:function(){return this._strength}},{key:"update",value:function(e){var t,n=e,i=n.width,r=n.height,a=this._downSize.getValue();a>0&&(i=ie.smallerPowerOfTwo(i)/Math.pow(2,a-1),r=ie.smallerPowerOfTwo(r)/Math.pow(2,a-1));var o=i,s=r,l=this._passCount.getValue();this._scalingMaterial.setFloat("_BloomThreshold",this._threshold.getValue());for(var u=0;u<l;u++)t=this._buffers[u],o=Math.floor(.5*o),s=Math.floor(.5*s),t.setSize(o,s),this._texelSize.setValues(1/n.width,1/n.height),this._scalingMaterial.setVector2("_BloomSourceTexelSize",this._texelSize),this._renderer.blit(n,t,this._scalingMaterial,!0),n=t,0==u&&this._scalingMaterial.setFloat("_BloomThreshold",10);for(var c=1;c<l;c++)t=this._buffers[l-c-1],this._texelSize.setValues(1/n.width,1/n.height),this._scalingMaterial.setVector2("_BloomSourceTexelSize",this._texelSize),this._renderer.blit(n,t,this._scalingMaterial,!1),n=t;this.getMaterial().setTexture("_BloomSource",n)}}]),t}(Me);Dt.MAX_PASSES=7;var Ut=n(488),Vt=n.n(Ut),Gt=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,t),(n=l()(this,c()(t).call(this,e,"Fxaa"))).setSettings(i,{strength:10}),n}return d()(t,e),r()(t,[{key:"getFSCode",value:function(){return Vt.a}},{key:"shaderSetsColor",value:function(){return!0}},{key:"setStrength",value:function(e){this._strength.setValue(e)}},{key:"init",value:function(e){p()(c()(t.prototype),"init",this).call(this,e);var n=e.addGroup("FXAA",this.getMaterial());this._strength=n.addShaderParamFloat("_FxaaStrength",this._settings.strength,0,20)}}]),t}(Me),$t=n(101),Ht=function(e){function t(e,n){var i;return o()(this,t),(i=l()(this,c()(t).call(this))).eventDispatcher=new At.a,i._state=void 0,i._prevState=void 0,i._startPath=!1,i._opacity=0,i._renderer=e,i._screenBuffer=new Re(i._renderer,1,1,he.RGBA_UNSIGNED_BYTE,!1,!0,!0,!0),i._screenBuffer.scaleToCanvas=!0,i._stack=new Ce(i._renderer,[i._fxaa=new Gt(i._renderer),i._bloom=new Dt(i._renderer,{threshold:.2,strength:.1}),new Le(i._renderer,{reduction:2.5}),i._smokeEdge=new Be(i._renderer,{texture:new ve(i._renderer,n,$t("./perlin_doNotCompress.png"),!0,!0,!1)}),new Ve(i._renderer,{texture:new ve(i._renderer,n,$t("./background.jpg"),!0,!0,!1)})],!0),i._tonemapMaterial=new U(i._renderer,n,"tonemap"),i._tonemapMaterial.setAlphaBlending(),i._tonemapMaterial.depthTest=!1,i._scroll=new Nt(i._renderer),i._camera=new Mt(i._renderer,i._scroll,30,.1,2e4),i._valley=new ht(i._renderer,n,i._scroll),i._path=new ft(i._renderer,n,i._scroll),i._ofrendas=new St(i._renderer,n,i._scroll),i._ofrendas.eventDispatcher.addEventListener(Xt.types.REQUEST,function(e){i.eventDispatcher.dispatchEvent(new Xt(Xt.types.REQUEST,{}))}),i._ofrendas.eventDispatcher.addEventListener(Xt.types.CHANGE_NAME,function(e){i.eventDispatcher.dispatchEvent(new Xt(Xt.types.CHANGE_NAME,{visible:e.data.visible,name:e.data.name}))}),i._scroll.eventDispatcher.addEventListener(Xt.types.FIRST_SCROLL,function(e){i.eventDispatcher.dispatchEvent(new Xt(Xt.types.FIRST_SCROLL,{}))}),i}return d()(t,e),r()(t,[{key:"init",value:function(e){var t=this;this._camera.init(e);var n=e.addGroup("Experience");this._progressParam=n.addParamFloat("Progress",0,0,2500,function(e){t._scroll.setProgress(e)}),this._speedParam=n.addParamFloat("Speed",.5,0,2),this._stack.init(n),this._scroll.init(this._ofrendas),this._valley.init(n),this._path.init(n),this._ofrendas.init(n)}},{key:"reset",value:function(e){this._scroll.setProgress(.08),this._ofrendas.reset(),this._camera.reset(e),this._startPath=!1}},{key:"setHorizon",value:function(e){this._camera.setHorizon(e)}},{key:"setState",value:function(e){var t=this;this._prevState=this._state,this._state=e,this._scroll.setState(e),this._scroll.resetSpeed(),this._state==xe.EXPERIENCE_LANDING&&(this.reset(!0),this._valley.startIntro()),this._state==xe.EXPERIENCE_OFRENDAS&&(this.reset(void 0!=this._prevState),void 0!=this._prevState?this._camera.startIntro(10).then(function(e){t._startPath=!0}):(this._camera.introProgress=1,this._startPath=!0))}},{key:"setNextOfrendas",value:function(e){this._ofrendas.setNextOfrendas(e)}},{key:"update",value:function(){if(!this.isDestructed){var e=re.getInstance().deltaTime*this._speedParam.getValue();this._camera.update(),this._smokeEdge.setSpeed(1+50*this._scroll.getDampedSpeed()),this._smokeEdge.setXOffset(.5*this._camera.view.transform.getWorldForward().x),this._fxaa.setStrength(8*this._camera.introProgress),this._bloom.getStrengthParam().setValue((.01+.5*(1-this._camera.introProgress))*Math.pow(this._renderer.getAspect(),2)),this._valley.update(e,this._camera),this._ofrendas.update(e,this._camera),this._startPath&&(this._scroll.update(e),this._camera.followPath(e)),this._state==xe.EXPERIENCE_LANDING||this._state==xe.EXPERIENCE_OFRENDAS?this._opacity=ie.clamp01(this._opacity+.5*re.getInstance().deltaTime):this._opacity=ie.clamp01(this._opacity-.5*re.getInstance().deltaTime)}}},{key:"getOpacity",value:function(){return this._opacity}},{key:"render",value:function(){if(0!=this._opacity){this._renderer.setRenderTexture(this._screenBuffer),this._renderer.clear(),this._camera.projection.setAspect(this._renderer.getAspect()),this._camera.update(),this._valley.render(this._camera),this._ofrendas.render(this._camera),this._path.render(this._camera),this._renderer.unSetRenderTexture();var e=this._stack.draw(this._screenBuffer,!1);this._tonemapMaterial.setFloat("_Opacity",this._opacity),this._renderer.blit(e,null,this._tonemapMaterial)}}},{key:"destruct",value:function(){}}]),t}(v);n.d(t,"a",function(){return Xt}),n.d(t,"b",function(){return zt});var Xt=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return d()(t,e),t}(Object(bt.createEventClass)()("REQUEST","CHANGE_NAME","FIRST_SCROLL")),zt=function(){function e(){o()(this,e),this.eventDispatcher=new At.a,this._isInitialized=!1,this._paused=!1,this._state=xe.BACKGROUND_LEAFS,this.transitionController=new Ze(this)}return r()(e,[{key:"setup",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];T.ENABLED=i,this._webGLPreloader=new m,this._canvasManager=new Je(e,!0);var r=Ft.a.mobile&&this._canvasManager.getPixelRatio()>=1.5?1.5:1;this._canvasManager.setPixelRatio(r),this._renderer=new fe(this._webGLPreloader,this._canvasManager.getCanvas(),n(768),!0),this._backgroundParticles=new $e(this._renderer,this._webGLPreloader),this._experience=new Ht(this._renderer,this._webGLPreloader),this._experience.eventDispatcher.addEventListener(Xt.types.REQUEST,function(e){t.eventDispatcher.dispatchEvent(new Xt(Xt.types.REQUEST,{}))}),this._experience.eventDispatcher.addEventListener(Xt.types.CHANGE_NAME,function(e){t.eventDispatcher.dispatchEvent(new Xt(Xt.types.CHANGE_NAME,{visible:e.data.visible,name:e.data.name}))}),this._experience.eventDispatcher.addEventListener(Xt.types.FIRST_SCROLL,function(e){t.eventDispatcher.dispatchEvent(new Xt(Xt.types.FIRST_SCROLL,{}))}),i&&(this._datGui=new lt(this._webGLPreloader))}},{key:"getPreloader",value:function(){return this._webGLPreloader}},{key:"init",value:function(){if(!this._isInitialized){var e=new ut;e.init("controls"),this._renderer.init(),this._renderer.setClearColor(0,0,0,1),this._backgroundParticles.init(e),this._experience.init(e),this._datGui&&this._datGui.init(e),this._isInitialized=!0,this.update()}}},{key:"setOpacity",value:function(e){this._backgroundParticles&&this._backgroundParticles.setOpacity(e)}},{key:"showParticles",value:function(e){this._backgroundParticles&&this._backgroundParticles.showParticles(e)}},{key:"play",value:function(){this._paused=!1}},{key:"pause",value:function(){this._paused=!0}},{key:"setHorizon",value:function(e){this._experience.setHorizon(e)}},{key:"setState",value:function(e){return this._state=e,this._backgroundParticles.setState(this._state),this._experience.setState(this._state),new Promise(function(e,t){e()})}},{key:"setNextOfrendas",value:function(e){this._experience.setNextOfrendas(e)}},{key:"update",value:function(){var e=this;if(window.requestAnimationFrame(function(){return e.update()}),!this._paused){var t=re.getInstance().deltaTime;this._backgroundParticles.update(t),this._experience.update(),this._experience.getOpacity()<1&&this._backgroundParticles.render(),this._experience.render()}}},{key:"dispose",value:function(){this.transitionController&&this.transitionController.dispose()}}]),e}()},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i="".concat("videoOverlay","/show");"".concat("videoOverlay","/hide")},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={IMAGE_EFFECT_MASK:"{$versionRoot}image-effect/mask_video_v002.jpg"},r=[{startCount:0,frameCount:50,padCount:5,fps:30,source:"{$versionRoot}image-sequence/logo-xibalba/logo_sequence_15fps_{frame}.png"}]},function(e){e.exports={b:{X_SMALL:"'(max-width: 479px)'",SMALL:"'(max-width: 599px), (max-height: 375px)'",MEDIUM:"'(max-width: 959px)'",LARGE:"'(max-width: 1199px), (max-height: 700px)'",XLARGE:"'(max-width: 1439px), (max-height: 800px)'",XXLARGE:"'(max-width: 1679px), (max-height: 900px)'",XXXLARGE:"'(max-width: 1919px), (max-height: 1080px)'",XXXXLARGE:"'(min-width: 1920px), (min-height: 1080px)'"},a:{SMALL:0,MEDIUM:1,LARGE:2}}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports={icon:"icon-IOxSc_E"}},,function(e,t,n){e.exports={"image-sequence":"image-sequence-2ckFKnJ",imageSequence:"image-sequence-2ckFKnJ"}},function(e,t,n){e.exports={"logo-xibalba":"logo-xibalba-2HmhmSw",logoXibalba:"logo-xibalba-2HmhmSw","is-static":"is-static-kziOzdJ",isStatic:"is-static-kziOzdJ","is-small":"is-small-2IZ21lS",isSmall:"is-small-2IZ21lS","is-large":"is-large-2DsqRY2",isLarge:"is-large-2DsqRY2",text:"text-2aYUoFO"}},function(e,t,n){e.exports={"primary-button":"primary-button-2u4GFLa",primaryButton:"primary-button-2u4GFLa","is-disabled":"is-disabled-3kgOVP3",isDisabled:"is-disabled-3kgOVP3",button:"button-2uhxaF8","is-inactive":"is-inactive-2JD9fMq",isInactive:"is-inactive-2JD9fMq",label:"label-IJilfVW",icon:"icon-2rxvP21",plus:"plus-2h707uJ",eye:"eye-17UU9KG"}},function(e,t,n){e.exports={"text-reveal":"text-reveal-3Klgov7",textReveal:"text-reveal-3Klgov7","title-part":"title-part-1Fnsq33",titlePart:"title-part-1Fnsq33"}},function(e,t,n){e.exports={"intro-options":"intro-options-JqIVftb",introOptions:"intro-options-JqIVftb",title:"title-29BWeDe",shadow:"shadow-3gnseH8",copy:"copy-2jhjGID","button-holder":"button-holder-yXj9uvD",buttonHolder:"button-holder-yXj9uvD",button:"button-4pC732U","play-trailer":"play-trailer-2-Z1Wr7",playTrailer:"play-trailer-2-Z1Wr7",icon:"icon-3tgcZGF"}},function(e,t,n){e.exports={"home-page":"home-page-2SkhppO",homePage:"home-page-2SkhppO","logo-xibalba":"logo-xibalba-1wIZHhU",logoXibalba:"logo-xibalba-1wIZHhU","intro-options":"intro-options-3jZ9Flq",introOptions:"intro-options-3jZ9Flq"}},function(e,t,n){e.exports={"dob-input-field":"dob-input-field-3YyE0zM",dobInputField:"dob-input-field-3YyE0zM","input-field":"input-field-92q3G66",inputField:"input-field-92q3G66","day-input":"day-input-3of9cqX",dayInput:"day-input-3of9cqX","month-input":"month-input-2sFNmr5",monthInput:"month-input-2sFNmr5","year-input":"year-input-2bgg9gf",yearInput:"year-input-2bgg9gf"}},function(e,t,n){e.exports={"logo-victoria":"logo-victoria-1ZbXag3",logoVictoria:"logo-victoria-1ZbXag3","is-blurred":"is-blurred-8D5dvMH",isBlurred:"is-blurred-8D5dvMH"}},function(e,t,n){e.exports={element:"element-Thn60c8",container:"container-1d3hvEh",text:"text-FGUx78h",icon:"icon-1K6hvvQ","is-large":"is-large-1ldSK8N",isLarge:"is-large-1ldSK8N"}},function(e,t,n){e.exports={"age-gate-page":"age-gate-page-1Sb4dVU",ageGatePage:"age-gate-page-1Sb4dVU","inner-content":"inner-content-FZmv4Wp",innerContent:"inner-content-FZmv4Wp","logo-victoria":"logo-victoria-1fxcVlR",logoVictoria:"logo-victoria-1fxcVlR","logo-xibalba":"logo-xibalba-EXydlmo",logoXibalba:"logo-xibalba-EXydlmo",title:"title-NaUo2HU",copy:"copy-cTF08RP","dob-input-field":"dob-input-field-xlF3Z5-",dobInputField:"dob-input-field-xlF3Z5-","checkbox-holder":"checkbox-holder-2PyzdY-",checkboxHolder:"checkbox-holder-2PyzdY-",checkbox:"checkbox-1BoL8x1","button-holder":"button-holder-2V-5ybW",buttonHolder:"button-holder-2V-5ybW",disclaimer:"disclaimer-aMPBRbp","submit-button":"submit-button-1wJ2kyM",submitButton:"submit-button-1wJ2kyM"}},function(e,t,n){e.exports={"dasharray-circle-button":"dasharray-circle-button-2YMXFMb",dasharrayCircleButton:"dasharray-circle-button-2YMXFMb",button:"button-3-X7AK5",facebook:"facebook-1DHCYJQ",icon:"icon-35gnIah",twitter:"twitter-1yYipVr"}},function(e,t,n){e.exports={"share-block":"share-block-2qtAlrG",shareBlock:"share-block-2qtAlrG",divider:"divider-1h24PoR","splatter-right":"splatter-right-160v6md",splatterRight:"splatter-right-160v6md","splatter-left":"splatter-left-2yjpseA",splatterLeft:"splatter-left-2yjpseA","leaf-left":"leaf-left-26tAE2A",leafLeft:"leaf-left-26tAE2A","leaf-right":"leaf-right-7iZ0lTU",leafRight:"leaf-right-7iZ0lTU",copy:"copy-r3LcTaJ"}},function(e,t,n){e.exports={"primary-link":"primary-link-2xC2FBD",primaryLink:"primary-link-2xC2FBD",button:"button-12LIEcR"}},function(e,t,n){e.exports={"thankyou-page":"thankyou-page-1-aHQDg",thankyouPage:"thankyou-page-1-aHQDg","logo-xibalba":"logo-xibalba-aI0wQFI",logoXibalba:"logo-xibalba-aI0wQFI",title:"title-yE1_jWz",copy:"copy-bdBG0Qj","share-block-wrapper":"share-block-wrapper-1YQbQmx",shareBlockWrapper:"share-block-wrapper-1YQbQmx","back-link":"back-link-PtGXieY",backLink:"back-link-PtGXieY"}},function(e,t,n){e.exports={"webgl-page":"webgl-page-1DO0Keu",webglPage:"webgl-page-1DO0Keu"}},function(e,t,n){e.exports={"upload-instruction":"upload-instruction-1FagCP9",uploadInstruction:"upload-instruction-1FagCP9",container:"container-3S4dsOS",content:"content-3h5746L",title:"title-2YwrLYj",copy:"copy-1Pk3nxD",figure:"figure-3O6o3Iy",image:"image-25PQNMw","file-upload":"file-upload-3A3eGZg",fileUpload:"file-upload-3A3eGZg","upload-icon":"upload-icon-2ixtt5y",uploadIcon:"upload-icon-2ixtt5y"}},function(e,t,n){e.exports={"upload-confirmed":"upload-confirmed-H9izOav",uploadConfirmed:"upload-confirmed-H9izOav",title:"title-LtNVS3-",shadow:"shadow-1DspkCH",copy:"copy-3jf20DN",button:"button-xmGVqo6"}},function(e,t,n){e.exports={"primary-input-field":"primary-input-field-2SmTJEZ",primaryInputField:"primary-input-field-2SmTJEZ"}},function(e,t,n){e.exports={"enter-photo-information":"enter-photo-information-1hLstMa",enterPhotoInformation:"enter-photo-information-1hLstMa","site-frame":"site-frame-3YhpQru",siteFrame:"site-frame-3YhpQru",container:"container-1gbhgM9","input-field":"input-field-2TCBfDt",inputField:"input-field-2TCBfDt","button-holder":"button-holder-2b5tD0F",buttonHolder:"button-holder-2b5tD0F",button:"button-eAAf2Fu"}},function(e,t,n){e.exports={"upload-form":"upload-form-u5fWFKk",uploadForm:"upload-form-u5fWFKk",title:"title-UdupWCX",shadow:"shadow-37ov3HI",copy:"copy-BAXEryt",form:"form-1ojgrYT","checkbox-holder":"checkbox-holder-S-aB6we",checkboxHolder:"checkbox-holder-S-aB6we",checkbox:"checkbox-1oIvKyg",buttons:"buttons-13isxtW","input-field":"input-field-3VKdFNJ",inputField:"input-field-3VKdFNJ","field-row":"field-row-WAW9_6e",fieldRow:"field-row-WAW9_6e","input-holder":"input-holder-3ZuKS8s",inputHolder:"input-holder-3ZuKS8s"}},function(e,t,n){e.exports={"upload-photo-page":"upload-photo-page-2kYmykU",uploadPhotoPage:"upload-photo-page-2kYmykU","back-link":"back-link-2F04OQq",backLink:"back-link-2F04OQq","parallax-content":"parallax-content-1WivAtd",parallaxContent:"parallax-content-1WivAtd","logo-xibalba":"logo-xibalba-aWb3bJT",logoXibalba:"logo-xibalba-aWb3bJT",title:"title-Z6fkvP6",shadow:"shadow-3S8GoQ_","upload-instruction":"upload-instruction-3IiUjHP",uploadInstruction:"upload-instruction-3IiUjHP","upload-confirmed":"upload-confirmed-3kB1Tw2",uploadConfirmed:"upload-confirmed-3kB1Tw2","upload-form":"upload-form-2t_bDEr",uploadForm:"upload-form-2t_bDEr","enter-photo-information":"enter-photo-information-3pnSdpR",enterPhotoInformation:"enter-photo-information-3pnSdpR"}},function(e,t,n){e.exports={"play-button":"play-button-1Ph1V-3",playButton:"play-button-1Ph1V-3","is-playing":"is-playing-2buC-Vh",isPlaying:"is-playing-2buC-Vh",touchevents:"touchevents-1NlFXoE",outline:"outline-2MKqmQC"}},function(e,t,n){e.exports={"hero-video":"hero-video-3lsYX6K",heroVideo:"hero-video-3lsYX6K","play-button":"play-button-1sV-m6j",playButton:"play-button-1sV-m6j","parallax-content":"parallax-content-CZF9HD7",parallaxContent:"parallax-content-CZF9HD7","video-holder":"video-holder-2MBV0_S",videoHolder:"video-holder-2MBV0_S",poster:"poster-1LW0ist",back:"back-1cGxtSX",bats1:"bats1-1FfbRUQ",bats11:"bats11-usDB5Hi",character6:"character6-2YYw83g",fireflies13:"fireflies13-3semmuT",light7:"light7-27n1WGk",petals3:"petals3-8smzB7L",petals4:"petals4-1mx3cOE",petals5:"petals5-2nlWrzL",petals8:"petals8-2b768T7",petals9:"petals9-2WXMtLo",stalagtites2:"stalagtites2-ztqxrzJ",stalagtites10:"stalagtites10-oybD1iC",stalagtites12:"stalagtites12-22xej5R",content:"content-3yKm9_4",shade:"shade-385_koQ",title:"title-26AhhrP","title-part":"title-part-36B750x",titlePart:"title-part-36B750x",copy:"copy-1LANOer","copy-line":"copy-line-1x5FEqZ",copyLine:"copy-line-1x5FEqZ","is-playing":"is-playing-3yFx8jo",isPlaying:"is-playing-3yFx8jo"}},function(e,t,n){e.exports={"teaser-page":"teaser-page-121_E9Z",teaserPage:"teaser-page-121_E9Z","logo-xibalba":"logo-xibalba-21u5Ubu",logoXibalba:"logo-xibalba-21u5Ubu"}},function(e,t,n){e.exports={"ofrenda-page":"ofrenda-page-1yg4aqN",ofrendaPage:"ofrenda-page-1yg4aqN","back-link":"back-link-1LOw-_Z",backLink:"back-link-1LOw-_Z",name:"name-IsVoV5y","arrow-down":"arrow-down-MqmPv6G",arrowDown:"arrow-down-MqmPv6G",bounce:"bounce-3MvvQ-s"}},function(e,t,n){e.exports={"primary-square-button":"primary-square-button-3MFtPvp",primarySquareButton:"primary-square-button-3MFtPvp",button:"button-1hmgden","icon-facebook":"icon-facebook-k909IsH",iconFacebook:"icon-facebook-k909IsH","icon-twitter":"icon-twitter-2Xhw18V",iconTwitter:"icon-twitter-2Xhw18V"}},function(e,t,n){e.exports={"share-list":"share-list-gm-93up",shareList:"share-list-gm-93up","list-item":"list-item-BLKNV-R",listItem:"list-item-BLKNV-R"}},function(e,t,n){e.exports={"site-footer":"site-footer-2dcEhgh",siteFooter:"site-footer-2dcEhgh",disclaimer:"disclaimer-UkPQcHu","share-list":"share-list-2IZNPrF",shareList:"share-list-2IZNPrF","menu-list":"menu-list-75xHYIj",menuList:"menu-list-75xHYIj","menu-list-item":"menu-list-item-1Q78PQP",menuListItem:"menu-list-item-1Q78PQP"}},function(e,t,n){e.exports={notification:"notification-3NZbhze",mask:"mask-HA8rHcv","parallax-container":"parallax-container-12WQ32h",parallaxContainer:"parallax-container-12WQ32h","inner-content":"inner-content-kcluSLs",innerContent:"inner-content-kcluSLs",background:"background-3qJy-y0",title:"title-3zA_cGA",copy:"copy-bzlRjq_","button-holder":"button-holder-1CIOFC1",buttonHolder:"button-holder-1CIOFC1",button:"button-35eG7V7"}},function(e,t,n){e.exports={"hamburger-button":"hamburger-button-1EKxsR1",hamburgerButton:"hamburger-button-1EKxsR1","is-disabled":"is-disabled-2RLWocE",isDisabled:"is-disabled-2RLWocE","is-active":"is-active-3wqB4xi",isActive:"is-active-3wqB4xi"}},function(e,t,n){e.exports={"headphone-pulse":"headphone-pulse-H0J_F-D",headphonePulse:"headphone-pulse-H0J_F-D",icon:"icon-1wTUq4k",circle:"circle-3Kxwa_l"}},function(e,t,n){e.exports={preloader:"preloader-1cIUl3T","logo-victoria":"logo-victoria-1NJ4Eas",logoVictoria:"logo-victoria-1NJ4Eas",percentage:"percentage-1cwh_vx","percentage-holder":"percentage-holder-2gVY_3P",percentageHolder:"percentage-holder-2gVY_3P","logo-holder":"logo-holder-2yupVQd",logoHolder:"logo-holder-2yupVQd",row:"row-1B6R3Ez",copy:"copy-1Wv0e0M","start-button":"start-button-28b90JO",startButton:"start-button-28b90JO",logo:"logo-1eFHmmw"}},function(e,t,n){e.exports={"close-button":"close-button-1S0lSH-",closeButton:"close-button-1S0lSH-"}},function(e,t,n){e.exports={"video-overlay":"video-overlay-1GySmSD",videoOverlay:"video-overlay-1GySmSD","close-button":"close-button-ZDwOBcX",closeButton:"close-button-ZDwOBcX"}},function(e,t,n){e.exports={"mute-button":"mute-button-uccJ5dL",muteButton:"mute-button-uccJ5dL","is-muted":"is-muted-g5-1KmF",isMuted:"is-muted-g5-1KmF",line:"line-3a5GJLG",pulse:"pulse-2f0o3L1",container:"container-2OwdhRP"}},function(e,t,n){e.exports={"orientation-message":"orientation-message-1mBNrW1",orientationMessage:"orientation-message-1mBNrW1",icon:"icon-GHO8ha1"}},function(e,t,n){e.exports={"infinite-loader":"infinite-loader-2GkcGmG",infiniteLoader:"infinite-loader-2GkcGmG","is-active":"is-active-1pSyOKm",isActive:"is-active-1pSyOKm",line:"line-n4jX0aT",pulse:"pulse-2YStCxb",loader:"loader-19qvVQm"}},function(e,t,n){e.exports={app:"app-eX7W9uA","menu-is-open":"menu-is-open-3uYX3gR",menuIsOpen:"menu-is-open-3uYX3gR","scroll-container":"scroll-container-23LpSZ5",scrollContainer:"scroll-container-23LpSZ5","scroll-wrapper":"scroll-wrapper-TxiQgZb",scrollWrapper:"scroll-wrapper-TxiQgZb","logo-victoria":"logo-victoria-26a4DN4",logoVictoria:"logo-victoria-26a4DN4",page:"page-hlA_4Jb",background:"background-y8YyH6-","share-list":"share-list-1dFYh_H",shareList:"share-list-1dFYh_H","play-trailer":"play-trailer-1_RBQ_M",playTrailer:"play-trailer-1_RBQ_M",icon:"icon-nX82Fm_","video-overlay":"video-overlay-O9_0RGL",videoOverlay:"video-overlay-O9_0RGL","mute-button":"mute-button-1xXGrnF",muteButton:"mute-button-1xXGrnF"}},function(e,t,n){"use strict";var i=n(38),r=n.n(i),a=n(221),o=n(35),s=n(5),l=n(45),u=n(31),c=n(79),h=n(494),d=n(103),f=n(496),p=n(497),v=n(222),m=n(0),_=n.n(m),g=n(1),y=n.n(g),E=n(3),A=n.n(E),T=n(2),b=n.n(T),R=n(4),x=n.n(R),k=n(7),P=n(76),w=n.n(P),S=function(e){function t(){return _()(this,t),A()(this,b()(t).apply(this,arguments))}return x()(t,e),y()(t,[{key:"setPageVisibility",value:function(e){k.TweenLite.to(this.parentController.$refs.page.$el,.6,{autoAlpha:e?1:0})}},{key:"onMenuOpen",value:function(e,t,n){return new Promise(function(i){e?(k.TweenLite.to(t,.5,{xPercent:100,ease:k.Power3.easeOut}),k.TweenLite.to(n,.5,{x:0,ease:k.Power3.easeOut,onComplete:i})):(k.TweenLite.to(t,.5,{xPercent:0,ease:k.Power3.easeOut}),k.TweenLite.to(n,.5,{xPercent:-100,ease:k.Power3.easeOut,onComplete:i,clearProps:"all"}))})}},{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$refs.logoVictoria.$el,.6,{opacity:0},{opacity:1},0),e.fromTo(t.$refs.hamburgerButton.$el,.6,{opacity:0},{opacity:1},0),e.fromTo(t.$refs.playTrailer,.6,{autoAlpha:0},{autoAlpha:1},0),e.fromTo(t.$refs.playTrailer,.8,{y:-20},{y:0,ease:k.Expo.easeOut,clearProps:"all"},0),e.add(this.getTimeline("shareList",w.a.IN),"-=0.6"),e.addLabel("afterTopRightCorner","-=0.6"),e.add(this.getTimeline("siteFooter",w.a.IN),"afterTopRightCorner")}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(s.AbstractTransitionController),M=n(10),C=n.n(M),F=function(e){function t(e){return _()(this,t),A()(this,b()(t).call(this,Object.assign(e,{batchSize:1,cached:!1})))}return x()(t,e),y()(t,[{key:"loadAsset",value:function(e){return Promise.resolve()}},{key:"load",value:function(e){var t=this;return new Promise(function(n){t.options.loadMethod(function(){n()},function(t){e(t)})})}},{key:"dispose",value:function(){C()(b()(t.prototype),"dispose",this).call(this)}}]),t}(o.AbstractLoadTask),N=function(e,t){var n=[];return e.forEach(function(e){e.source=e.source.replace("{$versionRoot}",t);for(var i=e.startCount;i<=e.frameCount;i+=1)n.push("".concat(e.source.replace("{frame}",i.toString().padStart(e.padCount,"0"))))}),n},L=n(113),I=n(498),O=n(220),B=n(500),D=n(28),U=function(e){function t(e){return _()(this,t),A()(this,b()(t).call(this,Object.assign(e,{batchSize:1,cached:!1})))}return x()(t,e),y()(t,[{key:"loadAsset",value:function(e){return Promise.resolve()}},{key:"load",value:function(e){return this.options.loadMethod(function(t){e(t)})}},{key:"dispose",value:function(){C()(b()(t.prototype),"dispose",this).call(this)}}]),t}(o.AbstractLoadTask),V=n(26),G=n(112),$=n(502),H=n(503),X=n(504),z=n(48),j=function(){return"undefined"!==typeof document.msHidden?{hidden:"msHidden",change:"msvisibilitychange"}:"undefined"!==typeof document.webkitHidden?{hidden:"webkitHidden",change:"webkitvisibilitychange"}:{hidden:"hidden",change:"visibilitychange"}},q={name:"App",components:{SiteFooter:h.a,LogoVictoria:d.a,Notification:f.a,HamburgerButton:p.a,ShareList:v.a,Preloader:I.a,PlayButton:O.a,VideoOverlay:B.a,MuteButton:$.a,OrientationMessage:H.a,InfiniteLoader:X.a},extends:s.AbstractPageTransitionComponent,data:function(){return{TOGGLE_SOUND:c.c,hideVictoriaLogo:!1,applicationLoaded:!1,appLoadProgress:0,showInfiniteLoader:!1,showPreloader:!0,disableMenuButton:!1}},computed:r()({},Object(l.d)({currentOffset:function(e){return e.ofrenda.currentOffset},ofrendas:function(e){return e.ofrenda.items},muted:function(e){return e.app.muted},deviceState:function(e){return e.app.deviceState},menuIsOpen:function(e){return e.app.menuIsOpen}})),watch:{menuIsOpen:function(e){var t=this;this.disableMenuButton=!0,this.transitionController.onMenuOpen(e,this.$refs.page.$el,this.$refs.siteFooter.$el).then(function(){t.disableMenuButton=!1})},muted:function(e){this.$soundManager.muteAllChannels(e)}},created:function(){this.$deviceStateTracker.addEventListener(a.DeviceStateEvent.STATE_UPDATE,this.handleDeviceStateUpdate),this.setDeviceState(this.$deviceStateTracker.currentState);var e=Object.keys(D.a).map(function(e){return{name:D.a[e]}});this.$soundManager.sampleManager.addSamples(e),this.$soundManager.createChannel(V.a.UI),this.$soundManager.createChannel(V.a.EFFECTS),this.$soundManager.createChannel(V.a.AMBIENT,.6)},mounted:function(){var e=this;this.$webgl.setup(this.$refs.background,!1);var t,n,i=this.$webgl.getPreloader();this.$appPreloader.loadTasks([new F({loadMethod:i.load.bind(i)}),new o.LoadImageTask({assets:N(L.a,this.$versionRoot).concat((t=L.b,n=this.$versionRoot,Object.keys(t).map(function(e){return t[e].replace("{$versionRoot}",n)}))),batchSize:1,cached:!0}),new U({loadMethod:this.$soundManager.sampleManager.loadAllSamples.bind(this.$soundManager.sampleManager)})],{onUpdate:function(t){e.appLoadProgress=Math.round(100*t)}}),this.$router.beforeEach(function(t,n,i){e.beforePageRoute(t),i()})},methods:r()({},Object(l.c)({setDeviceState:c.a}),{onVisibilityChange:function(){var e=j();document[e.hidden]?this.$soundManager.muteAllChannels(!0):this.$soundManager.muteAllChannels(!1)},onVideoOpened:function(){this.$webgl.pause(),this.$soundManager.muteChannel(V.a.AMBIENT,!0),this.transitionController.setPageVisibility(!1)},onVideoClosed:function(){this.$webgl.play(),this.$soundManager.muteChannel(V.a.AMBIENT,!1),this.transitionController.setPageVisibility(!0)},peakVideoOverlay:function(e){this.videoOverlay.peak(e)},openVideoOverlay:function(){Object(u.getEventBus)().$emit(G.a)},handleVideoOverlayReady:function(e){var t=this;this.videoOverlay=e,Object(u.getEventBus)().$on(G.a,function(){t.$soundManager.play(D.a.CLICK_1,V.a.UI),t.videoOverlay.transitionIn()})},continueToSite:function(){this.handleApplicationLoaded()},handleApplicationLoaded:function(){var e=this;this.$webgl.init(),this.$webgl.setNextOfrendas(this.ofrendas[this.currentOffset]),this.applicationLoaded=!0,this.beforePageRoute(this.$route),this.$webgl.transitionController.setState(this.$route.name),this.$soundManager.play(D.a.AMBIENT,V.a.AMBIENT,1,!0),document.addEventListener(j().change,this.onVisibilityChange.bind(this)),this.preloader?this.preloader.transitionOut().then(function(){e.showPreloader=!1,e.transitionIn()}):this.transitionIn()},handleAllComponentsReady:function(){var e=this;this.transitionController=new S(this),this.$nextTick(function(){e.applicationLoaded||e.preloader.transitionIn()}),this.isReady()},beforePageRoute:function(e){this.hideVictoriaLogo=e.name===this.RouteNames.AGE_GATE,this.$store.commit(c.b,!1),e.name===this.RouteNames.AGE_GATE?document.querySelector("html").classList.add("is-age-gate"):document.querySelector("html").classList.remove("is-age-gate")},handlePreloaderReady:function(e){this.preloader=e},handleInfiniteLoaderIsReady:function(e){var t=this;this.infiniteLoader=e,Object(u.getEventBus)().$on(z.b,function(){t.showInfiniteLoader=!0}),Object(u.getEventBus)().$on(z.a,function(){t.showInfiniteLoader=!1})},onLeave:function(e,t){s.FlowManager.transitionOut.then(function(){return s.FlowManager.done()}).then(t)},handleDeviceStateUpdate:function(e){this.setDeviceState(e.data.state)}})};t.a=q},function(e,t,n){"use strict";var i,r=n(38),a=n.n(r),o=n(9),s=n(5),l=n(102),u=n.n(l),c=n(60),h=n.n(c),d=n(20),f={startCount:o.a.number.isRequired,frameCount:o.a.number.isRequired,source:o.a.string.isRequired,padCount:o.a.number.isRequired,fps:o.a.number,loop:o.a.bool.def(!1),loopTimeout:o.a.number.def(0),objectFit:o.a.string.def("contain")},p=n(0),v=n.n(p),m=n(1),_=n.n(m),g=n(3),y=n.n(g),E=n(2),A=n.n(E),T=n(10),b=n.n(T),R=n(4),x=n.n(R),k=n(61),P=n.n(k),w=n(7),S=n(37),M=n(89),C=n.n(M),F=n(270),N=n.n(F);!function(e){e.RIGHT="right",e.LEFT="left",e.TOP="top",e.BOTTOM="bottom",e.FORWARD="forward"}(i||(i={}));var L=i,I=n(215),O=function(e){function t(e){var n;return v()(this,t),(n=y()(this,A()(t).call(this))).stopped=!1,n.direction=L.FORWARD,n.size={width:0,height:0},n.frame=0,n.sources=[],n.options={startCount:0,frameCount:0,padCount:0,loop:!1,source:null,element:null,fps:24,loopTimeout:0,objectFit:"contain"},n.images=[],n.options=Object.assign(n.options,e),n.disposableManager=new S.DisposableManager,n}return x()(t,e),_()(t,[{key:"setup",value:function(){this.canvas=this.options.element.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.frame=this.direction===L.FORWARD?this.options.startCount:this.options.frameCount,this.prepareSources()}},{key:"init",value:function(e){return this.stop(),this.loadImageTask&&this.loadImageTask.dispose(),this.loadImagesPromise=null,this.options=Object.assign(this.options,e),this.prepareSources(),this.frame=this.direction===L.FORWARD?0:this.options.frameCount,this.load()}},{key:"load",value:function(){var e=this;return this.loadImages(),this.handleResize(),this.loadImagesPromise.then(function(){return e.drawFrame()})}},{key:"restart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.FORWARD,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.frame=this.direction===L.FORWARD?this.options.startCount:this.options.frameCount,this.tween=null,this.play(e,t)}},{key:"reset",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.FORWARD;this.stop(),this.frame=this.direction===L.FORWARD?this.options.startCount:this.options.frameCount,this.drawFrame(Math.round(this.frame))}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.FORWARD,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(i){e.stop(),e.direction=t;var r=Math.abs(e.frame-(e.direction===L.FORWARD?e.options.frameCount:e.options.startCount));e.stopped=!1,e.tween=w.TweenLite.to(e,r/e.options.fps*(1/Math.max(.01,n)),{frame:t===L.FORWARD?e.options.frameCount:e.options.startCount,ease:w.Linear.easeNone,onUpdate:function(){return e.drawFrame(Math.round(e.frame))},onComplete:function(){e.options.loop&&e.tween&&(e.frame=e.direction===L.FORWARD?e.options.startCount:e.options.frameCount,e.tween=null,e.options.loopTimeout?e.disposableManager.add(setTimeout(function(){e.play(t,n)},e.options.loopTimeout),I.a.TIMEOUT):e.play(t,n)),i()}})})}},{key:"stop",value:function(){this.stopped=!0,this.tween&&(w.TweenLite.killTweensOf(this.tween),this.tween.kill(),this.tween=null)}},{key:"prepareSources",value:function(){if(this.sources=[],this.options.source)for(var e=this.options.startCount;e<=this.options.frameCount;e+=1)this.sources.push("".concat(this.options.source.replace("{frame}",e.toString().padStart(this.options.padCount,"0"))))}},{key:"loadImages",value:function(){var e=this;return this.loadImageTask=new N.a({assets:this.sources,onAssetLoaded:function(t){e.images[t.index]=t}}),this.loadImagesPromise||(this.loadImagesPromise=this.loadImageTask.load().then(function(){})),this.loadImagesPromise}},{key:"getImageByFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.frame;return this.images[e]}},{key:"drawFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.frame,t=this.getImageByFrame(e);if(t){var n=C()([0,0,t.asset.naturalWidth,t.asset.naturalHeight],[0,0,this.size.width,this.size.height],this.options.objectFit);this.ctx.clearRect(0,0,this.size.width,this.size.height),this.ctx.drawImage(t.asset,n[0],n[1],n[2],n[3])}}},{key:"handleResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0};this.size.width=e.width||this.options.element.offsetWidth*window.devicePixelRatio,this.size.height=e.height||this.options.element.offsetHeight*window.devicePixelRatio,this.canvas.width=this.size.width,this.canvas.height=this.size.height,this.getImageByFrame(this.frame)&&this.drawFrame()}},{key:"dispose",value:function(){this.stop(),this.loadImageTask&&this.loadImageTask.dispose(),this.disposableManager&&this.disposableManager.dispose(),b()(A()(t.prototype),"dispose",this).call(this)}}]),t}(P.a),B={name:"ImageSequence",extends:s.AbstractRegistrableComponent,props:{autoLoad:o.a.bool.def(!1),autoplay:o.a.bool.def(!1),sequence:o.a.shape(f)},created:function(){this.disposableManager=new u.a},mounted:function(){var e=this;this.imageSequence=new O(a()({},this.sequence,{element:this.$refs.container})),this.disposableManager.add(this.imageSequence),this.imageSequence.setup(),this.autoLoad&&this.load().then(function(){e.autoplay&&e.play()}),this.addEventListeners()},beforeDestroy:function(){this.disposableManager&&this.disposableManager.dispose()},methods:{handleAllComponentsReady:function(){this.isReady()},addEventListeners:function(){this.disposableManager.add(new d.DisposableEventListener(window,"resize",h()(this.handleResize.bind(this),100)))},handleResize:function(){this.imageSequence&&this.imageSequence.handleResize()},reset:function(){this.imageSequence.reset()},stop:function(){this.imageSequence.stop()},restart:function(e,t){return this.imageSequence.restart(e,t)},play:function(e,t){return this.imageSequence.play(e,t)},load:function(){return this.imageSequence.load()},init:function(e){return this.imageSequence.init(e)}}};t.a=B},function(e,t,n){"use strict";var i=n(60),r=n.n(i),a=n(5),o=n(35),s=n(9),l=n(37),u=n(219),c=n(20),h=n(0),d=n.n(h),f=n(1),p=n.n(f),v=n(3),m=n.n(v),_=n(2),g=n.n(_),y=n(4),E=n.n(y),A=function(e){function t(){return d()(this,t),m()(this,g()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){var i=t;e.fromTo(t.$el,.1,{visibility:"hidden",pointerEvents:"none"},{visibility:"visible",pointerEvents:"all"}),e.add(i.videoEffectRenderer.transitionIn()),e.fromTo(i.$refs.closeButton.$el,.8,{display:"none",autoAlpha:0},{display:"block",autoAlpha:1},"-=0.8")}},{key:"setupTransitionOutTimeline",value:function(e,t,n){var i=t;e.to(i.$refs.closeButton.$el,.8,{autoAlpha:0,display:"none"},0),e.add(i.videoEffectRenderer.transitionOut(),0),e.to(t.$el,.3,{visibility:"hidden",pointerEvents:"none"})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(a.AbstractTransitionController),T=n(501),b=n(113),R=n(10),x=n.n(R),k=n(7),P=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WebGLRenderingContext.UNSIGNED_BYTE;d()(this,e),this.width=0,this.height=0,this.format=WebGLRenderingContext.RGBA,this.type=WebGLRenderingContext.UNSIGNED_BYTE,this.gl=t,this.type=n,this.texture=this.gl.createTexture(),this.resize(16,16),this.frameBuffer=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.frameBuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0)}return p()(e,[{key:"getTexture",value:function(){return this.texture}},{key:"getFrameBuffer",value:function(){return this.frameBuffer}},{key:"resize",value:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,null))}},{key:"destruct",value:function(){this.frameBuffer&&this.gl.deleteFramebuffer(this.frameBuffer),this.texture&&this.gl.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}}]),e}(),w=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;d()(this,e),this.width=0,this.height=0,this.frame=0,this.textures=[],this.gl=t,n>=0&&(this.frameBuffer0=new P(t,n),this.frameBuffer1=new P(t,n))}return p()(e,[{key:"addImage",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];n>=4&&console.warn("ImageEffectRenderer: A maximum of 4 slots is available, slotIndex is out of bounds."),this.textures[n]&&console.warn("ImageEffectRenderer: Image already added to slot "+n+". Use updateImage if you want to update an existing slot."),this.textures[n]=t instanceof e?t:this.gl.createTexture(),this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,"iChannel"+n),n),this.updateImage(t,n,i,r,a,o)}},{key:"updateImage",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];t instanceof e?(this.updateTexture(t,t.getSrc().getTexture(),n,i,r,o),this.updateTexture(t,t.getDest().getTexture(),n,i,r,o)):(this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[n]),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,a?1:0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.updateTexture(t,this.textures[n],n,i,r,o))}},{key:"updateTexture",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform2f(this.gl.getUniformLocation(this.program,"iChannelResolution"+n),e.width,e.height),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,i?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,r?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),a?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)}},{key:"setUniformFloat",value:function(e,t){this.gl.useProgram(this.program),this.gl.uniform1f(this.gl.getUniformLocation(this.program,e),t)}},{key:"setUniformInt",value:function(e,t){this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,e),t)}},{key:"setUniformVec2",value:function(e,t,n){this.gl.useProgram(this.program),this.gl.uniform2f(this.gl.getUniformLocation(this.program,e),t,n)}},{key:"setUniformVec3",value:function(e,t,n,i){this.gl.useProgram(this.program),this.gl.uniform3f(this.gl.getUniformLocation(this.program,e),t,n,i)}},{key:"setUniformVec4",value:function(e,t,n,i,r){this.gl.useProgram(this.program),this.gl.uniform4f(this.gl.getUniformLocation(this.program,e),t,n,i,r)}},{key:"setUniformMatrix",value:function(e,t){this.gl.useProgram(this.program),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,e),!1,t)}},{key:"compileShader",value:function(e){if(this.shader!==e){this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.shader=e,this.program=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER),n=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(t,"\n            attribute vec2 aPos;\n            attribute vec2 aUV;\n            \n            varying vec2 vUV0;\n            \n            void main(void) {\n                vUV0 = aUV;\n                gl_Position = vec4(aPos, 0.0, 1.0);\n            }\n        "),this.gl.compileShader(t);var i=this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS);if(!i)throw new Error("ImageEffectRenderer: Vertex shader compilation failed: ".concat(this.gl.getShaderInfoLog(t)));if(this.gl.shaderSource(n,"\n            #ifdef GL_ES\n                precision highp float;\n            #endif\n            \n            varying vec2 vUV0;\n            \n            uniform vec2 iResolution;\n            uniform float iTime;\n            uniform float iGlobalTime;\n            uniform vec4 iMouse;\n            \n            uniform highp sampler2D iChannel0;\n            uniform highp sampler2D iChannel1;\n            uniform highp sampler2D iChannel2;\n            uniform highp sampler2D iChannel3;\n            \n            uniform vec2 iChannelResolution0;\n            uniform vec2 iChannelResolution1;\n            uniform vec2 iChannelResolution2;\n            uniform vec2 iChannelResolution3;\n            \n            void mainImage(out vec4, vec2);\n            \n            vec4 texture(sampler2D tex, vec2 uv) {\n                return texture2D(tex, uv);\n            }\n            \n            void main(void) {\n            \tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n                mainImage(gl_FragColor, gl_FragCoord.xy);\n            }\n        "+e),this.gl.compileShader(n),!(i=this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)))throw new Error("ImageEffectRenderer: Shader compilation failed: ".concat(this.gl.getShaderInfoLog(n)));if(this.gl.attachShader(this.program,t),this.gl.attachShader(this.program,n),this.gl.linkProgram(this.program),!(i=this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)))throw new Error("ImageEffectRenderer: Program linking failed: ".concat(this.gl.getProgramInfoLog(this.program)));this.posAttributeIndex=this.gl.getAttribLocation(this.program,"aPos"),this.uvAttributeIndex=this.gl.getAttribLocation(this.program,"aUV"),this.gl.useProgram(this.program),this.uniformGlobalTime=this.gl.getUniformLocation(this.program,"iGlobalTime"),this.uniformTime=this.gl.getUniformLocation(this.program,"iTime"),this.uniformResolution=this.gl.getUniformLocation(this.program,"iResolution")}}},{key:"getSrc",value:function(){return this.frame%2===0?this.frameBuffer0:this.frameBuffer1}},{key:"getDest",value:function(){return this.frame%2===1?this.frameBuffer0:this.frameBuffer1}},{key:"draw",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.width=0|i,this.height=0|r;var a=this.getDest();a&&(a.resize(this.width,this.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.getFrameBuffer())),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.uniform1f(this.uniformGlobalTime,n),this.gl.uniform1f(this.uniformTime,n),this.gl.uniform2f(this.uniformResolution,i,r);for(var o=0;o<this.textures.length;++o)this.gl.activeTexture(this.gl.TEXTURE0+o),this.textures[o]instanceof e?this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[o].getSrc().getTexture()):this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[o]);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.enableVertexAttribArray(this.posAttributeIndex),this.gl.vertexAttribPointer(this.posAttributeIndex,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(this.uvAttributeIndex),this.gl.vertexAttribPointer(this.uvAttributeIndex,2,this.gl.FLOAT,!1,16,8),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),a&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.frame++}},{key:"getShaderSource",value:function(){return this.shader}},{key:"destruct",value:function(){for(var t in this.textures)this.textures[t]instanceof e||this.gl.deleteTexture(this.textures[t]);this.textures=[],this.frameBuffer0&&(this.frameBuffer0.destruct(),this.frameBuffer0=null),this.frameBuffer1&&(this.frameBuffer1.destruct(),this.frameBuffer1=null)}}]),e}(),S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(d()(this,e),this.width=0,this.height=0,this.time=0,this.canvasScale=1,this.buffers=[],!i)throw new Error("Use ImageEffectRenderer.createTemporary to create a ImageEffectRenderer");if(this.container=t,this.animationLoop=n,this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("experimental-webgl",{premultipliedAlpha:!0}),!this.gl)throw new Error("ImageEffectRenderer: Failed to request a 3D context, aborting...")}return p()(e,[{key:"getCanvas",value:function(){return this.canvas}},{key:"play",value:function(){this.requestAnimationID||(this.animationLoop=!0,this.draw(0))}},{key:"stop",value:function(){this.requestAnimationID&&(window.cancelAnimationFrame(this.requestAnimationID),this.requestAnimationID=0,this.animationLoop=!1)}},{key:"addBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WebGLRenderingContext.UNSIGNED_BYTE;return this.buffers[e]&&this.buffers[e].destruct(),this.buffers[e]=new w(this.gl,n),this.buffers[e].compileShader(t),this.buffers[e]}},{key:"getBuffer",value:function(e){return this.buffers[e]}},{key:"getMainBuffer",value:function(){return this.mainBuffer}},{key:"updateSize",value:function(){this.canvas.width=this.container.offsetWidth*this.canvasScale,this.canvas.height=this.container.offsetHeight*this.canvasScale,this.canvas.style.width="".concat(this.container.offsetWidth,"px"),this.canvas.style.height="".concat(this.container.offsetHeight,"px")}},{key:"generateNDCQuad",value:function(){var e=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]);this.quadVBO=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quadVBO),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW)}},{key:"draw",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;for(var n in this.time=t/1e3,this.canvas.width===this.width&&this.canvas.height===this.height||(this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.width=this.canvas.width,this.height=this.canvas.height),this.buffers)this.buffers[n].draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height);this.mainBuffer.draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height),this.animationLoop&&(this.requestAnimationID=window.requestAnimationFrame(function(t){return e.draw(t)}))}},{key:"addImage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.mainBuffer.addImage(e,t,n,i,r,a)}},{key:"updateImage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.mainBuffer.updateImage(e,t,n,i,r,a)}},{key:"setUniformFloat",value:function(e,t){this.mainBuffer.setUniformFloat(e,t)}},{key:"setUniformInt",value:function(e,t){this.mainBuffer.setUniformInt(e,t)}},{key:"setUniformVec2",value:function(e,t,n){this.mainBuffer.setUniformVec2(e,t,n)}},{key:"setUniformVec3",value:function(e,t,n,i){this.mainBuffer.setUniformVec3(e,t,n,i)}},{key:"setUniformVec4",value:function(e,t,n,i,r){this.mainBuffer.setUniformVec4(e,t,n,i,r)}},{key:"setUniformMatrix",value:function(e,t){this.mainBuffer.setUniformMatrix(e,t)}},{key:"destruct",value:function(){for(var e in this.buffers)this.buffers[e].destruct();this.buffers=[],this.mainBuffer.destruct()}},{key:"renderTime",get:function(){return this.time}}],[{key:"createTemporary",value:function(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e.IERActive.length>=e.MAX_IMAGE_EFFECT_RENDERERS)throw new Error("Maximum number of ImageEffectRenderer's reached, no new ImageEffectRenderer created");if(e.IERPool.length>0){for(var o=!1,s=0;s<e.IERPool.length;s++)e.IERPool[s].mainBuffer.getShaderSource()===n&&(i=e.IERPool[s],e.IERPool.splice(s,1),o=!0);o||(i=e.IERPool[0],e.IERPool.splice(0,1))}else i=new e(t,r,!0);return i.animationLoop=r,i.container=t,i.canvasScale=a,t.appendChild(i.canvas),i.updateSize(),i.quadVBO||i.generateNDCQuad(),i.mainBuffer||(i.mainBuffer=new w(i.gl)),i.mainBuffer.compileShader(n),i.gl.clearColor(0,0,0,0),i.gl.viewport(0,0,i.canvas.width,i.canvas.height),i.gl.clear(i.gl.COLOR_BUFFER_BIT),i.gl.enable(i.gl.BLEND),i.gl.blendFunc(i.gl.ONE,i.gl.ONE_MINUS_SRC_ALPHA),i.width=i.canvas.width,i.height=i.canvas.height,e.IERActive.push(i),i}},{key:"releaseTemporary",value:function(t){t.stop(),t.destruct(),t.canvas.parentNode.removeChild(t.canvas);var n=e.IERActive.indexOf(t);if(!(n>-1))throw new Error("Can't find the EffectRenderer in the active pool");e.IERActive.splice(n,1),e.IERPool.push(t)}}]),e}();S.MAX_IMAGE_EFFECT_RENDERERS=10,S.IERActive=[],S.IERPool=[];var M=n(61),C=n.n(M),F=n(89),N=n.n(F),L=n(272),I=n.n(L),O=function(e){function t(e,n,i,r){var a;return d()(this,t),(a=m()(this,g()(t).call(this))).isRunning=!1,a.requestAnimationFrame=0,a.currentFrame=0,a.lastFrame=0,a.isInitialized=!1,a.size={width:0,height:0},a.isPortrait=r,a.wrapper=i,a.container=e,a.renderer=S.createTemporary(a.container,I.a),a.renderer.addImage(n,1),a.handleResize(),a}return E()(t,e),p()(t,[{key:"transitionIn",value:function(){var e=this;return this.videoElement.pause(),this.videoElement.currentTime=0,k.TweenLite.killTweensOf(this),k.TweenLite.fromTo(this,1.1,{currentFrame:this.lastFrame},{currentFrame:230,roundProps:"currentFrame",ease:k.Linear.easeNone,onUpdate:function(){e.drawCurrentFrame()}})}},{key:"transitionOut",value:function(){var e=this;return k.TweenLite.killTweensOf(this),this.currentFrame=230,k.TweenLite.to(this,1.2,{currentFrame:0,roundProps:"currentFrame",ease:k.Linear.easeNone,onUpdate:function(){e.drawCurrentFrame()}})}},{key:"peak",value:function(e){var t=this;return k.TweenLite.killTweensOf(this),this.videoElement.pause(),this.videoElement.currentTime=0,this.update(),this.peakTween&&(k.TweenLite.killTweensOf(this.peakTween),this.peakTween.kill(),this.peakTween=null),this.peakTween=k.TweenLite.to(this,.6,{currentFrame:e?58:0,roundProps:"currentFrame",ease:k.Linear.easeNone,onStart:function(){e&&k.TweenLite.set(t.wrapper,{visibility:"visible"})},onUpdate:function(){t.drawCurrentFrame()},onComplete:function(){e||k.TweenLite.set(t.wrapper,{visibility:"hidden"})}}),this.peakTween}},{key:"init",value:function(){this.isInitialized=!0,this.renderer.addImage(this.videoElement,0)}},{key:"update",value:function(){this.renderer.updateImage(this.videoElement,0),this.renderer.draw()}},{key:"drawCurrentFrame",value:function(){this.isInitialized&&(this.lastFrame=this.currentFrame,this.renderer.setUniformFloat("delta",this.currentFrame/255),this.renderer.updateImage(this.videoElement,0),this.renderer.draw())}},{key:"start",value:function(){this.isRunning=!0,this.draw()}},{key:"stop",value:function(){this.isRunning=!1,cancelAnimationFrame(this.requestAnimationFrame)}},{key:"setVideoElement",value:function(e){this.videoElement=e}},{key:"draw",value:function(){var e=this;this.videoElement&&(this.renderer.updateImage(this.videoElement,0),this.renderer.draw()),this.isRunning&&(this.requestAnimationFrame=requestAnimationFrame(function(){return e.draw()}))}},{key:"handleResize",value:function(){this.size.width=this.wrapper.offsetWidth,this.size.height=this.wrapper.offsetHeight;var e=[0,0,16,9];this.isPortrait&&(e=[0,0,9,16]);var t=N()(e,[0,0,this.size.width,this.size.height],"cover");this.container.style.left="".concat(t[0],"px"),this.container.style.top="".concat(t[1],"px"),this.container.style.width="".concat(t[2],"px"),this.container.style.height="".concat(t[3],"px"),this.renderer.updateSize()}},{key:"dispose",value:function(){this.stop(),x()(g()(t.prototype),"dispose",this).call(this)}}]),t}(C.a),B={name:"VideoOverlay",components:{CloseButton:T.a},extends:a.AbstractTransitionComponent,props:{video:s.a.shape({src:s.a.string.isRequired}),isPortrait:s.a.bool.def(!1)},created:function(){this.currentFrame=0,this.disposableManager=new l.DisposableManager},beforeDestroy:function(){this.disposableManager&&this.disposableManager.dispose()},mounted:function(){this.videoPlayer=new u.VideoElement(this.$refs.videoHolder,{loop:!1,muted:!1,playsInline:!0,preloadWithXHR:!1}),this.videoEffectRenderer=new O(this.$refs.canvasHolder,o.cacheManager.get(b.b.IMAGE_EFFECT_MASK.replace("{$versionRoot}",this.$versionRoot)),this.$el,this.isPortrait),this.videoEffectRenderer.setVideoElement(this.videoPlayer.element),this.disposableManager.add(this.videoPlayer),this.disposableManager.add(this.videoEffectRenderer),this.disposableManager.add(new c.DisposableEventListener(window,"resize",r()(this.handleResize.bind(this),100))),this.video&&this.setVideo()},methods:{setVideo:function(){var e=this;this.videoIsLoaded=!1,this.videoIsLoadedPromise=this.videoPlayer.setSrc(this.video),this.videoIsLoadedPromise.then(function(){e.videoIsLoaded=!0,e.videoEffectRenderer.init()})},transitionIn:function(e){var t=this;return this.videoIsLoaded?(this.isOpened=!0,this.allComponentsReady.then(function(){t.transitionController.setupTimeline(a.TimelineType.IN,!0),t.transitionController.transitionIn(e)})):Promise.resolve()},transitionOut:function(e,t){var n=this;return this.transitionController.transitionOut(e,t,!0).then(function(){n.isOpened=!1})},peak:function(e){!this.isOpened&&this.videoIsLoaded&&this.videoEffectRenderer.peak(e)},handleTransitionInStart:function(){var e=this;this.$emit("isOpened"),this.videoIsLoadedPromise.then(function(){return e.startVideo()})},startVideo:function(){this.videoPlayer.replay(),this.videoEffectRenderer.update(),this.videoEffectRenderer.start()},handleTransitionInComplete:function(){},handleTransitionOutStart:function(){this.$emit("isClosed"),this.videoPlayer.pause(),this.videoEffectRenderer.stop()},handleTransitionOutComplete:function(){},handleAllComponentsReady:function(){this.transitionController=new A(this),this.disposableManager.add(new c.DisposableEventListener(this.transitionController,a.TransitionEvent.TRANSITION_IN_START,this.handleTransitionInStart.bind(this))),this.disposableManager.add(new c.DisposableEventListener(this.transitionController,a.TransitionEvent.TRANSITION_IN_COMPLETE,this.handleTransitionInComplete.bind(this))),this.disposableManager.add(new c.DisposableEventListener(this.transitionController,a.TransitionEvent.TRANSITION_OUT_COMPLETE,this.handleTransitionOutComplete.bind(this))),this.disposableManager.add(new c.DisposableEventListener(this.transitionController,a.TransitionEvent.TRANSITION_OUT_START,this.handleTransitionOutStart.bind(this))),this.disposableManager.add(new c.DisposableEventListener(this.videoPlayer.element,"ended",this.handleVideoEnd.bind(this))),this.isReady()},handleVideoEnd:function(){this.$emit("ended")},handleResize:function(){this.videoEffectRenderer&&this.videoEffectRenderer.handleResize()}}};t.a=B},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(31),o=n(7),s=n(35),l=n(0),u=n.n(l),c=n(1),h=n.n(c),d=n(3),f=n.n(d),p=n(2),v=n.n(p),m=n(4),_=n.n(m),g=function(e){function t(){return u()(this,t),f()(this,v()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"onRetry",value:function(){var e=this;return new Promise(function(t){var n=e.parentController;o.TweenLite.to(n.$refs.figure,.5,{autoAlpha:0,onComplete:function(){n.image=null,o.TweenLite.set(n.$refs.figure,{autoAlpha:1}),t()}})})}},{key:"setupTransitionInTimeline",value:function(e,t,n){var i=t.$refs.icon.$el,r=t.$refs.title;e.fromTo(t.$el,1.2,{scale:.5,webkitFilter:"blur(50px)"},{scale:1,webkitFilter:"blur(0px)",ease:o.Expo.easeOut},0),e.fromTo(t.$el,1.2,{display:"none",autoAlpha:0},{autoAlpha:1,display:"block"},0),e.addLabel("afterFrame","-=0.2"),e.staggerFromTo([i,r],.8,{y:20},{y:0,ease:o.Expo.easeOut},.2,"afterFrame"),e.staggerFromTo([i,r],.6,{autoAlpha:0},{autoAlpha:1},.2,"afterFrame")}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,1,{scale:.5,webkitFilter:"blur(50px)",ease:o.Expo.easeIn,pointerEvents:"none"},0),e.to(t.$el,.6,{autoAlpha:0,display:"none"},.4)}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),y=n(474),E=n.n(y),A=function(){function e(){u()(this,e),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return h()(e,[{key:"process",value:function(e,t){var n=this;return new Promise(function(i){var r=e.naturalWidth,a=e.naturalHeight;switch(4<t&&t<9?(n.canvas.width=a,n.canvas.height=r):(n.canvas.width=r,n.canvas.height=a),t){case 2:n.ctx.transform(-1,0,0,1,r,0);break;case 3:n.ctx.transform(-1,0,0,-1,r,a);break;case 4:n.ctx.transform(1,0,0,-1,0,a);break;case 5:n.ctx.transform(0,1,1,0,0,0);break;case 6:n.ctx.transform(0,1,-1,0,a,0);break;case 7:n.ctx.transform(0,-1,-1,0,a,r);break;case 8:n.ctx.transform(0,-1,1,0,0,r)}n.ctx.drawImage(e,0,0);var o=E.a.Sepia(n.ctx.getImageData(0,0,n.canvas.width,n.canvas.height));n.ctx.putImageData(o,0,0),i(n.canvas.toDataURL("image/jpeg"))})}},{key:"dispose",value:function(){this.canvas=null}}]),e}(),T=n(48),b={name:"UploadInstruction",extends:i.AbstractTransitionComponent,props:{title:r.a.string.isRequired,copy:r.a.string.isRequired},data:function(){return{image:null}},beforeDestroy:function(){this.loadImageTask&&this.loadImageTask.dispose(),this.sepiaEffect&&this.sepiaEffect.dispose()},created:function(){this.sepiaEffect=new A},methods:{retry:function(){var e=this;this.transitionController.onRetry().then(function(){e.resetFileInput()})},resetFileInput:function(){this.$refs.fileInput.value=""},onClick:function(){this.resetFileInput()},onFileUpload:function(e){var t,n=this;e.target.files[0].size/1e3/1e3>10?this.$alert({title:this.$t("error.exceedImageFileSize.title"),message:this.$t("error.exceedImageFileSize.message"),confirm:this.$t("error.exceedImageFileSize.confirm")}):(Object(a.getEventBus)().$emit(T.b),function(e,t){var n=new FileReader;n.onload=function(e){if(e.target){var n=e.target,i=new DataView(n.result);if(65496!==i.getUint16(0,!1))return t(-2);for(var r=i.byteLength,a=2;a<r;){if(i.getUint16(a+2,!1)<=8)return t(-1);var o=i.getUint16(a,!1);if(a+=2,65505===o){if(1165519206!==i.getUint32(a+=2,!1))return t(-1);var s=18761===i.getUint16(a+=6,!1);a+=i.getUint32(a+4,s);var l=i.getUint16(a,s);a+=2;for(var u=0;u<l;u+=1)if(274===i.getUint16(a+12*u,s))return t(i.getUint16(a+12*u+8,s))}else{if(65280!==(65280&o))break;a+=i.getUint16(a,!1)}}return t(-1)}},n.readAsArrayBuffer(e)}(e.target.files[0],function(i){console.log(i),n.loadImageTask=new s.LoadImageTask({assets:URL.createObjectURL(e.target.files[0]),onAssetLoaded:function(e){t=e.asset}}),n.loadImageTask.load().then(function(){n.sepiaEffect.process(t,i).then(function(e){n.image=e,Object(a.getEventBus)().$emit(T.a),n.$nextTick(function(){o.TweenLite.fromTo(n.$refs.figure,.8,{autoAlpha:0},{autoAlpha:1}),n.$emit("fileUploaded",e)})})})}))},handleAllComponentsReady:function(){this.transitionController=new g(this),this.isReady()}}};t.a=b},function(e,t,n){"use strict";var i=n(5),r=n(219),a=n(89),o=n.n(a),s=n(60),l=n.n(s),u=n(7),c=n(37),h=n(20),d=n(19),f=n.n(d),p=n(9),v=n(0),m=n.n(v),_=n(1),g=n.n(_),y=n(3),E=n.n(y),A=n(2),T=n.n(A),b=n(4),R=n.n(b),x=function(e){function t(){return m()(this,t),E()(this,T()(t).apply(this,arguments))}return R()(t,e),g()(t,[{key:"onPlayStateChange",value:function(e){var t=[this.parentController.$refs.content,this.parentController.$refs.poster,this.parentController.$refs.title];u.TweenMax.staggerTo(t,.4,{autoAlpha:e?0:1},0),u.TweenMax.to(this.parentController.$refs.videoHolder,.4,{autoAlpha:e?1:0})}},{key:"setupTransitionInTimeline",value:function(e,t,n){e.staggerFromTo(t.$refs.titlePart,.8,{y:20},{y:0,ease:u.Power3.easeOut},.2,0),e.staggerFromTo(t.$refs.titlePart,.8,{autoAlpha:0},{autoAlpha:1,ease:u.Power3.easeOut},.2,0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),k=n(220),P=n(10),w=n.n(P),S=n(33),M=n.n(S),C=n(104),F=n.n(C),N=function(e){function t(){var e;return m()(this,t),(e=E()(this,T()(t).apply(this,arguments))).currentPosition={x:0,y:0},e.targetPosition={x:0,y:0},e.isVisible=!1,e.mouseMoveRaf=0,e.updateButtonPosition=function(t){var n=t.target;e.setVisibility("A"!==n.tagName&&"BUTTON"!==n.tagName),e.targetPosition=e.getPosition(t)},e.tick=function(){e.currentPosition.x=F()(e.currentPosition.x,e.targetPosition.x,.15),e.currentPosition.y=F()(e.currentPosition.y,e.targetPosition.y,.15),u.TweenLite.set(e.options.cursorElement,{x:e.currentPosition.x,y:e.currentPosition.y}),e.tickRaf=requestAnimationFrame(e.tick)},e}return R()(t,e),g()(t,[{key:"attach",value:function(e){this.options=e,this.options.wrapper.style.cursor="none",this.tick()}},{key:"detach",value:function(){this.options.wrapper&&(this.options.wrapper.style.cursor=""),cancelAnimationFrame(this.tickRaf),cancelAnimationFrame(this.mouseMoveRaf)}},{key:"handleMouseEnter",value:function(e){cancelAnimationFrame(this.mouseMoveRaf),this.options.wrapper&&(this.currentPosition=this.getPosition(e)),this.setVisibility(!0)}},{key:"handleMouseLeave",value:function(){cancelAnimationFrame(this.mouseMoveRaf),this.setVisibility(!1)}},{key:"setVisibility",value:function(e){e!==this.isVisible&&(this.isVisible=e,this.options.onVisibilityChange&&this.options.onVisibilityChange(e))}},{key:"handleMouseMove",value:function(e){cancelAnimationFrame(this.mouseMoveRaf),this.mouseMoveRaf=requestAnimationFrame(this.updateButtonPosition.bind(void 0,e))}},{key:"getPosition",value:function(e){if(this.options.wrapper){var t=e.pageX,n=e.pageY,i=this.options.wrapper.getBoundingClientRect(),r=i.top;return{x:t-i.left,y:n-r}}return this.currentPosition}},{key:"dispose",value:function(){this.detach(),cancelAnimationFrame(this.mouseMoveRaf),cancelAnimationFrame(this.tickRaf),w()(T()(t.prototype),"dispose",this).call(this)}}]),t}(M.a),L=n(41),I=n(62),O={name:"HeroVideo",components:{PlayButton:k.a,PrimaryButton:L.a},extends:i.AbstractTransitionComponent,props:{video:p.a.shape({src:p.a.string.isRequired,poster:p.a.string,alt:p.a.string})},data:function(){return{isPlaying:!1}},watch:{video:function(e){this.setVideo(e)},isPlaying:function(e){!f.a.chrome||f.a.mobile||f.a.tablet||(e?this.mouseCursor.detach():this.attachCursor()),this.$emit("playStateChange",e),this.transitionController.onPlayStateChange(e)}},created:function(){this.disposableManager=new c.DisposableManager},beforeDestroy:function(){this.disposableManager&&this.disposableManager.dispose()},mounted:function(){this.videoPlayer=new r.VideoElement(this.$refs.videoHolder,{loop:!1,muted:!1,playsInline:!0,preloadWithXHR:!1}),this.disposableManager.add(this.videoPlayer),this.disposableManager.add(new h.DisposableEventListener(this.videoPlayer.element,"ended",this.handleVideoEnded.bind(this))),this.video&&this.setVideo(),f.a.mobile||f.a.tablet||(this.mouseCursor=new N,this.attachCursor(),this.disposableManager.add(this.mouseCursor)),this.disposableManager.add(new h.DisposableEventListener(window,"resize",l()(this.handleResize.bind(this),100))),this.handleResize(),this.parallaxLayers=this.$el.querySelectorAll("[data-parallax-layer]")},methods:{startMouseMoveTicker:function(){f.a.mobile||f.a.tablet||(this.lerpedMouseMove=new I.a,this.disposableManager.add(new h.DisposableEventListener(u.TweenLite.ticker,"tick",this.tick.bind(this))))},tick:function(){var e=this;this.lerpedMouseMove&&(this.lerpedMouseMove.tick(),(Math.abs(this.lerpedMouseMove.targetX-this.lerpedMouseMove.currentX)>.1||Math.abs(this.lerpedMouseMove.targetY-this.lerpedMouseMove.currentY)>.1)&&this.parallaxLayers.forEach(function(t){return e.setParallaxLayerPosition(t)}))},setParallaxLayerPosition:function(e){var t=parseInt(e.getAttribute("data-parallax-layer"),10);u.TweenLite.set(e,{x:this.lerpedMouseMove.currentX*t*.75,y:this.lerpedMouseMove.currentY*t*.75,transformPerspective:2e3,transformOrigin:"center center"})},handleResize:function(){if(f.a.msedge||f.a.msie){var e=o()([0,0,16,9],[0,0,this.$el.offsetWidth,this.$el.offsetHeight],"cover");this.$refs.videoHolder.style.left="".concat(e[0],"px"),this.$refs.videoHolder.style.top="".concat(e[1],"px"),this.$refs.videoHolder.style.width="".concat(e[2],"px"),this.$refs.videoHolder.style.height="".concat(e[3],"px")}var t=o()([0,0,16,9],[0,0,this.$el.offsetWidth,this.$el.offsetHeight],"cover");this.$refs.poster.style.left="".concat(t[0],"px"),this.$refs.poster.style.top="".concat(t[1],"px"),this.$refs.poster.style.width="".concat(t[2],"px"),this.$refs.poster.style.height="".concat(t[3],"px")},handleVideoEnded:function(){this.isPlaying=this.videoPlayer.isPlaying},attachCursor:function(){var e=this;this.mouseCursor.attach({wrapper:this.$el,cursorElement:this.$refs.playButton.$el,onVisibilityChange:function(t){e.setMouseCursorVisibility(t)}})},setMouseCursorVisibility:function(e){e?this.$refs.playButton.transitionIn():this.$refs.playButton.transitionOut()},handleClick:function(e){var t=e.target;"A"!==t.tagName&&"BUTTON"!==t.tagName&&this.togglePlay()},handleMouseMove:function(e){this.mouseCursor&&this.mouseCursor.handleMouseMove(e)},handleMouseLeave:function(){this.mouseCursor&&this.mouseCursor.handleMouseLeave()},handleMouseEnter:function(e){this.mouseCursor&&this.mouseCursor.handleMouseEnter(e)},setVideo:function(){this.videoIsLoadedPromise=this.videoPlayer.setSrc(this.video)},togglePlay:function(){var e=this;this.videoIsLoadedPromise.then(function(){e.videoPlayer.togglePlay(),e.isPlaying=!e.videoPlayer.isPlaying})},handleAllComponentsReady:function(){this.transitionController=new x(this),this.startMouseMoveTicker(),f.a.mobile&&f.a.tablet||this.setMouseCursorVisibility(!0),this.isReady()}}};t.a=O},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),m=n(16),_=function(e){return{validator:function(t){return null===t||("undefined"===typeof t?!e.required:Object(m.f)(e,t))}}},g={name:"DobInputField",extends:i.AbstractTransitionComponent,props:{year:_(r.a.number.isRequired),month:_(r.a.number.isRequired),day:_(r.a.number.isRequired)},methods:{onChange:function(e){var t=e.target,n=parseInt(t.value,10);this.$emit("input",{value:"number"===typeof n&&n>0?n:"",name:t.name});var i=t.getAttribute("data-next");i&&t.value.length===parseInt(t.getAttribute("maxlength"),10)&&this.$refs[i].focus()},handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=g},function(e,t,n){"use strict";var i=n(5),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=n(7),v=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){e.add(function(){return t.startLoopingAnimation()},0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){e.set(t.$refs.circle,{autoAlpha:0},0),e.staggerFromTo(t.$refs.circle,2,{autoAlpha:1},{autoAlpha:0},.5,3),e.staggerFromTo(t.$refs.circle,3,{scale:1},{scale:1.5,ease:p.Expo.easeOut},.5,3)}}]),t}(i.AbstractTransitionController),m={name:"HeadphonePulse",extends:i.AbstractTransitionComponent,methods:{handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=m},function(e,t,n){"use strict";var i=n(54),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(n(5).AbstractTransitionController),v=n(28),m=n(26),_={name:"PrimarySquareButton",extends:i.a,methods:{onClick:function(){this.$soundManager.play(v.a.CLICK_2,m.a.UI)},handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=_},function(e,t,n){"use strict";var i=n(5),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),v=n(53),m=n(469),_=n(63),g={name:"ThankyouPage",components:{LogoXibalba:v.a,ShareBlock:m.a,PrimaryLink:_.a},extends:i.AbstractPageTransitionComponent,methods:{handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=g},function(e,t,n){"use strict";var i=n(38),r=n.n(i),a=n(5),o=n(37),s=n(20),l=n(45),u=n(7),c=n(19),h=n.n(c),d=n(0),f=n.n(d),p=n(1),v=n.n(p),m=n(3),_=n.n(m),g=n(2),y=n.n(g),E=n(4),A=n.n(E),T=n(15),b=n(14),R=function(e){function t(){return f()(this,t),_()(this,y()(t).apply(this,arguments))}return A()(t,e),v()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){t.$refs.logoXibalba.$el;e.fromTo(t.$el,.6,{autoAlpha:0},{autoAlpha:1},0),e.addLabel("afterLogo","-=0"),e.fromTo(t.$refs.formContent,1,{autoAlpha:0},{autoAlpha:1},"afterLogo"),e.fromTo(t.$refs.formContent,1,{scale:1.2},{scale:1,ease:u.Expo.easeOut},"afterLogo")}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.5,{autoAlpha:0}),e.add(function(){Object(b.a)(T.i).transitionController.setState(n)})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(a.AbstractTransitionController),x=n(467),k=n(53),P=n(103),w=n(216),S=n(41),M=n(40),C=n(62),F=function(e){return"number"===typeof e},N={name:"AgeGatePage",components:{DobInputField:x.a,LogoXibalba:k.a,LogoVictoria:P.a,PrimaryCheckbox:w.a,PrimaryButton:S.a},extends:a.AbstractPageTransitionComponent,computed:r()({},Object(l.d)({rememberMe:function(e){return e.user.rememberMe},year:function(e){return e.user.birthYear},month:function(e){return e.user.birthMonth},day:function(e){return e.user.birthDay},uuid:function(e){return e.ofrenda.uuid}}),Object(l.b)({isAgeAllowed:M.c}),{isValidDate:function(){return F(this.year)&&F(this.month)&&F(this.day)&&this.month<=12&&this.day<=31}}),created:function(){this.disposableManager=new o.DisposableManager,this.today=new Date,this.disposableManager.add(new s.DisposableEventListener(a.FlowManager,a.FlowEvent.START,this.onFlowStart.bind(this)))},beforeDestroy:function(){this.disposableManager&&this.disposableManager.dispose(),this.lerpedMouseMove&&this.lerpedMouseMove.dispose()},methods:{startMouseMoveTicker:function(){h.a.mobile||h.a.tablet||(this.lerpedMouseMove=new C.a,this.disposableManager.add(new s.DisposableEventListener(u.TweenLite.ticker,"tick",this.tick.bind(this))))},tick:function(){this.lerpedMouseMove&&(this.lerpedMouseMove.tick(),(Math.abs(this.lerpedMouseMove.targetX-this.lerpedMouseMove.currentX)>.1||Math.abs(this.lerpedMouseMove.targetY-this.lerpedMouseMove.currentY)>.1)&&u.TweenLite.set([this.$refs.parallaxContent],{x:10*this.lerpedMouseMove.currentX,y:10*this.lerpedMouseMove.currentY,rotationX:5*this.lerpedMouseMove.currentY,rotationY:5*this.lerpedMouseMove.currentX,transformPerspective:2e3,transformOrigin:"center center"}))},onFlowStart:function(e){this.leaveRoute=e.data.to.name,this.disposableManager=new o.DisposableManager,this.disposableManager.add(new s.DisposableEventListener(a.FlowManager,a.FlowEvent.START,this.onFlowStart.bind(this)))},transitionOut:function(e,t,n){return this.transitionController.transitionOut(e,this.leaveRoute,n)},onValueUpdate:function(e){"remember"===e.name&&this.$store.commit(M.g,e.value),"month"===e.name&&this.$store.commit(M.e,e.value),"day"===e.name&&this.$store.commit(M.d,e.value),"year"===e.name&&this.$store.commit(M.f,e.value)},isNumber:function(e){return"number"===typeof e},onSubmit:function(){if(this.isAgeAllowed)console.log(this.uuid),this.$router.push({name:this.uuid?this.RouteNames.OFRENDA:this.RouteNames.HOME});else{var e="agegate.noAccess.title",t="agegate.noAccess.message",n="agegate.noAccess.confirm";this.isValidDate||(e="error.invalidDate.title",t="error.invalidDate.message",n="error.invalidDate.confirm"),this.$alert({title:this.$t(e),message:this.$t(t),confirm:this.$t(n)}),this.$store.commit(M.e,null),this.$store.commit(M.d,null),this.$store.commit(M.f,null)}},handleAllComponentsReady:function(){this.transitionController=new R(this),this.startMouseMoveTicker(),this.isReady()}}};t.a=N},function(e,t,n){"use strict";var i=n(38),r=n.n(i),a=n(5),o=n(45),s=n(37),l=n(31),u=n(20),c=n(0),h=n.n(c),d=n(1),f=n.n(d),p=n(3),v=n.n(p),m=n(2),_=n.n(m),g=n(4),y=n.n(g),E=n(7),A=n(15),T=n(14),b=function(e){function t(){return h()(this,t),v()(this,_()(t).apply(this,arguments))}return y()(t,e),f()(t,[{key:"hideScrollIndicator",value:function(){E.TweenLite.to(this.parentController.$refs.arrowDown,.8,{autoAlpha:0,display:"none"}),E.TweenLite.to(this.parentController.$refs.arrowDown,.8,{y:30,ease:E.Expo.easeOut})}},{key:"setNameVisibility",value:function(e){e&&E.TweenLite.set(this.parentController.$refs.name,{y:30}),E.TweenLite.to(this.parentController.$refs.name,.6,{autoAlpha:e?1:0}),e&&E.TweenLite.to(this.parentController.$refs.name,.8,{y:0,ease:E.Expo.easeOut})}},{key:"setupTransitionInTimeline",value:function(e,t,n){E.TweenLite.set(this.parentController.$refs.name,{autoAlpha:0}),e.from(t.$el,.1,{autoAlpha:0},{autoAlpha:1}),e.fromTo(t.$refs.backLink.$el,.8,{autoAlpha:0},{autoAlpha:1},0),e.fromTo(t.$refs.arrowDown,1,{autoAlpha:0},{autoAlpha:1},.6)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.6,{autoAlpha:0},0),e.add(function(){Object(T.a)(A.i).transitionController.setState(n)})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(a.AbstractTransitionController),R=n(46),x=n(105),k=n(63),P=n(48),w={name:"OfrendaPage",components:{PrimaryLink:k.a},extends:a.AbstractPageTransitionComponent,computed:r()({},Object(o.d)({currentOffset:function(e){return e.ofrenda.currentOffset},ofrendas:function(e){return e.ofrenda.items},pagination:function(e){return e.ofrenda.pagination},uuid:function(e){return e.ofrenda.uuid}})),data:function(){return{name:null}},beforeDestroy:function(){this.showLoaderTimeout&&clearTimeout(this.showLoaderTimeout),this.disposableManager&&this.disposableManager.dispose()},created:function(){this.nameVisibility=!1,this.disposableManager=new s.DisposableManager,this.disposableManager.add(new u.DisposableEventListener(this.$webgl.eventDispatcher,x.a.types.REQUEST,this.handleRequestOfrendasEvent.bind(this))),this.disposableManager.add(new u.DisposableEventListener(this.$webgl.eventDispatcher,x.a.types.CHANGE_NAME,this.handleChangeName.bind(this))),this.disposableManager.add(new u.DisposableEventListener(this.$webgl.eventDispatcher,x.a.types.FIRST_SCROLL,this.handleFirstScrollInteraction.bind(this))),this.disposableManager.add(new u.DisposableEventListener(a.FlowManager,a.FlowEvent.START,this.onFlowStart.bind(this)))},methods:{onFlowStart:function(e){this.leaveRoute=e.data.to.name},transitionOut:function(e,t,n){return this.transitionController.transitionOut(e,this.leaveRoute,n)},sendDataToWebgl:function(e){this.$webgl.setNextOfrendas(e)},handleRequestOfrendasEvent:function(){var e=this;this.isLoading=!0,this.showLoaderTimeout&&clearTimeout(this.showLoaderTimeout),this.showLoaderTimeout=setTimeout(function(){e.isLoading&&Object(l.getEventBus)().$emit(P.b)},1500),this.currentOffset+this.pagination.limit<this.pagination.total?this.$store.commit(R.c,this.currentOffset+this.pagination.limit):this.$store.commit(R.c,0),this.$store.dispatch(R.a,{uuid:this.uuid,offset:this.currentOffset}).then(function(){e.isLoading=!1,Object(l.getEventBus)().$emit(P.a),e.sendDataToWebgl(e.ofrendas[e.currentOffset])})},handleFirstScrollInteraction:function(){this.hasScrolled||(this.transitionController.hideScrollIndicator(),this.hasScrolled=!0)},handleChangeName:function(e){var t=e.data.name,n=e.data.visible;this.name=t,n!==this.nameVisibility&&this.transitionController&&this.transitionController.setNameVisibility(n),this.nameVisibility=n},handleAllComponentsReady:function(){this.transitionController=new b(this),this.isReady()}}};t.a=w},function(e,t,n){"use strict";var i=n(5),r=n(31),a=n(9),o=n(0),s=n.n(o),l=n(1),u=n.n(l),c=n(3),h=n.n(c),d=n(2),f=n.n(d),p=n(4),v=n.n(p),m=n(7),_=n(76),g=n.n(_),y=function(e){function t(){return s()(this,t),h()(this,f()(t).apply(this,arguments))}return v()(t,e),u()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){var i=t.$refs.ctaLeft.$el,r=t.$refs.ctaRight.$el;e.add(this.getTimeline("title",g.a.IN),0),e.addLabel("afterTitle","-=1"),e.fromTo(t.$refs.copy,.8,{y:30},{y:0,ease:m.Expo.easeOut,clearProps:"all"},"afterTitle"),e.fromTo(t.$refs.copy,.8,{autoAlpha:0},{autoAlpha:1},"afterTitle"),e.addLabel("afterCopy","-=0.6"),e.fromTo([i,r],.8,{y:30},{y:0,ease:m.Expo.easeOut},"afterCopy"),e.fromTo([i,r],.8,{autoAlpha:0},{autoAlpha:1},"afterCopy"),e.fromTo(t.$refs.shadow,1.2,{autoAlpha:0},{autoAlpha:1},"afterCopy"),e.fromTo(t.$refs.playTrailer,.8,{y:30},{y:0,ease:m.Expo.easeOut,clearProps:"all"},"afterCopy+=0.2"),e.fromTo(t.$refs.playTrailer,.8,{autoAlpha:0},{autoAlpha:1},"afterCopy+=0.2")}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),E=n(41),A=n(77),T=n(112),b={name:"IntroOptions",components:{PrimaryButton:E.a,TextReveal:A.a},extends:i.AbstractTransitionComponent,props:{title:a.a.arrayOf(a.a.string).isRequired,copy:a.a.string.isRequired,ctaLeft:a.a.string.isRequired,ctaRight:a.a.string.isRequired},methods:{openVideoOverlay:function(){Object(r.getEventBus)().$emit(T.a)},handleAllComponentsReady:function(){this.transitionController=new y(this),this.isReady()}}};t.a=b},function(e,t,n){"use strict";var i=n(9),r=n(5),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=n(7),m=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"changeVisibility",value:function(e){v.TweenLite.to(this.parentController.$el,.6,{autoAlpha:e?1:0})}},{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(r.AbstractTransitionController),_=n(29),g={name:"LogoXibalba",components:{ImageSequence:n(464).a},props:{isHidden:i.a.bool.def(!1),isSequence:i.a.bool.def(!1),size:i.a.oneOf([_.a.SMALL,_.a.MEDIUM,_.a.LARGE]).def(_.a.MEDIUM)},extends:r.AbstractTransitionComponent,computed:{logoSize:function(){return _.a[this.size].toLowerCase()}},methods:{play:function(){return this.$refs.imageSequence.play()},handleImageSequenceReady:function(){},handleAllComponentsReady:function(){this.transitionController=new m(this),this.isReady()}}};t.a=g},function(e,t,n){"use strict";var i=n(38),r=n.n(i),a=n(5),o=n(45),s=n(0),l=n.n(s),u=n(1),c=n.n(u),h=n(3),d=n.n(h),f=n(2),p=n.n(f),v=n(4),m=n.n(v),_=function(e){function t(){return l()(this,t),d()(this,p()(t).apply(this,arguments))}return m()(t,e),c()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$el,.5,{autoAlpha:0},{autoAlpha:1}),e.add(this.getTimeline("heroVideo",a.TransitionDirection.IN),0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.5,{autoAlpha:0})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(a.AbstractTransitionController),g=n(479),y=n(53),E={name:"TeaserPage",components:{HeroVideo:g.a,LogoXibalba:y.a},extends:a.AbstractPageTransitionComponent,data:function(){return{video:null}},computed:r()({},Object(o.d)({deviceState:function(e){return e.app.deviceState}})),created:function(){this.setVideo()},methods:{setVideo:function(){var e=this.deviceState<this.DeviceState.MEDIUM;this.video={src:"".concat(this.$versionRoot,"video/teaser/").concat(e?"hero-portrait":"hero",".mp4"),poster:"".concat(this.$versionRoot,"image/teaser/hero.jpg"),alt:this.$t("teaser.hero.alt")}},handleVideoPlayStateChange:function(e){this.$refs.logoXibalba.transitionController.changeVisibility(!e)},handleAllComponentsReady:function(){this.transitionController=new _(this),this.isReady()}}};t.a=E},function(e,t,n){"use strict";var i=n(5),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),v={name:"WebglPage",extends:i.AbstractPageTransitionComponent,mounted:function(){},methods:{handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=v},function(e,t,n){"use strict";var i=n(54),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(n(5).AbstractTransitionController),v=n(28),m=n(26),_={name:"PrimaryLink",extends:i.a,methods:{onClick:function(){this.$soundManager.play(v.a.CLICK_3,m.a.UI)},handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=_},function(e,t,n){"use strict";var i=n(5),r=n(19),a=n.n(r),o=n(20),s=n(37),l=n(7),u=n(0),c=n.n(u),h=n(1),d=n.n(h),f=n(3),p=n.n(f),v=n(2),m=n.n(v),_=n(4),g=n.n(_),y=n(110),E=n(15),A=n(14),T=function(e){function t(){return c()(this,t),p()(this,m()(t).apply(this,arguments))}return g()(t,e),d()(t,[{key:"changeTitleVisibility",value:function(e){var t=this.parentController.$refs.title.$el;e?this.parentController.$refs.title["".concat(e?"transitionIn":"transitionOut")]():(l.TweenLite.to(t,1,{scale:.5,y:20,ease:l.Expo.easeIn}),l.TweenLite.to(t,.6,{autoAlpha:0,delay:.4}))}},{key:"backToImageStep",value:function(){this.parentController.$refs.enterPhotoInformation.transitionOut(),this.parentController.$refs.uploadInstruction.retry()}},{key:"gotoFormStep",value:function(){var e=this;this.parentController.$refs.uploadInstruction.transitionOut(),this.parentController.$refs.enterPhotoInformation.transitionOut(),this.changeTitleVisibility(!1),l.TweenLite.delayedCall(.6,function(){e.parentController.$refs.uploadForm.transitionIn()})}},{key:"gotoConfirmedStep",value:function(){var e=this;this.parentController.$refs.uploadForm.transitionOut(),l.TweenLite.delayedCall(.6,function(){e.parentController.$refs.uploadConfirmed.transitionIn()})}},{key:"gotoPhotoInformationStep",value:function(){this.parentController.$refs.enterPhotoInformation.transitionIn()}},{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$refs.backLink.$el,.8,{autoAlpha:0},{autoAlpha:1},0),e.add(this.getTimeline("title",y.TransitionDirection.IN),0),e.add(this.getTimeline("uploadInstruction",y.TransitionDirection.IN),.6),e.fromTo(t.$refs.shadow,1.2,{autoAlpha:0},{autoAlpha:1},.6)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.6,{autoAlpha:0},0),e.add(function(){Object(A.a)(E.i).transitionController.setState(n)})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),b=n(473),R=n(475),x=n(476),k=n(53),P=n(62),w=n(77),S=n(477),M=n(63),C={name:"UploadPhotoPage",components:{LogoXibalba:k.a,UploadInstruction:b.a,EnterPhotoInformation:x.a,UploadConfirmed:R.a,UploadForm:S.a,TextReveal:w.a,PrimaryLink:M.a},extends:i.AbstractPageTransitionComponent,data:function(){return{image:null,offerName:null}},created:function(){this.disposableManager=new s.DisposableManager,this.disposableManager.add(new o.DisposableEventListener(i.FlowManager,i.FlowEvent.START,this.onFlowStart.bind(this)))},beforeDestroy:function(){this.disposableManager&&this.disposableManager.dispose(),this.lerpedMouseMove&&this.lerpedMouseMove.dispose()},methods:{onFlowStart:function(e){this.leaveRoute=e.data.to.name,this.disposableManager=new s.DisposableManager,this.disposableManager.add(new o.DisposableEventListener(i.FlowManager,i.FlowEvent.START,this.onFlowStart.bind(this)))},transitionOut:function(e,t,n){return this.transitionController.transitionOut(e,this.leaveRoute,n)},onFlowCompleted:function(){this.$router.push({name:this.RouteNames.OFRENDA})},onImageAccepted:function(){this.transitionController.gotoFormStep()},onImageDeclined:function(){console.log("onImageDeclined"),this.transitionController.backToImageStep()},onFormCompleted:function(){this.transitionController.gotoConfirmedStep()},onValueUpdate:function(e){this[e.name]=e.value},onImageSelected:function(e){this.image=e,this.transitionController.gotoPhotoInformationStep()},startMouseMoveTicker:function(){a.a.tablet||a.a.mobile||(this.lerpedMouseMove=new P.a,this.disposableManager.add(new o.DisposableEventListener(l.TweenLite.ticker,"tick",this.tick.bind(this))))},tick:function(){this.lerpedMouseMove&&(this.lerpedMouseMove.tick(),(Math.abs(this.lerpedMouseMove.targetX-this.lerpedMouseMove.currentX)>.1||Math.abs(this.lerpedMouseMove.targetY-this.lerpedMouseMove.currentY)>.1)&&l.TweenLite.set([this.$refs.parallaxConent],{x:10*this.lerpedMouseMove.currentX,y:10*this.lerpedMouseMove.currentY,rotationX:5*this.lerpedMouseMove.currentY,rotationY:5*this.lerpedMouseMove.currentX,transformPerspective:2e3,transformOrigin:"center center"}))},handleAllComponentsReady:function(){this.transitionController=new T(this),this.startMouseMoveTicker(),this.isReady()}}};t.a=C},function(e,t,n){"use strict";var i=n(54),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(n(5).AbstractTransitionController),v=n(28),m=n(26),_={name:"PrimaryButton",extends:i.a,methods:{onClick:function(){this.$soundManager.play(v.a.CLICK_2,m.a.UI)},handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=_},function(e,t,n){"use strict";var i=n(60),r=n.n(i),a=n(5),o=n(19),s=n.n(o),l=n(20),u=n(37),c=n(7),h=n(0),d=n.n(h),f=n(1),p=n.n(f),v=n(3),m=n.n(v),_=n(2),g=n.n(_),y=n(4),E=n.n(y),A=n(15),T=n(14),b=n(36),R=function(e){function t(){return d()(this,t),m()(this,g()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"showOptions",value:function(){var e=this.parentController;c.TweenLite.to(e.$refs.logoXibalba.$el,1.6,{yPercent:0,scale:.2,ease:c.Expo.easeInOut}),c.TweenLite.delayedCall(.9,function(){e.$refs.introOptions.transitionIn()})}},{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$el,.6,{autoAlpha:0},{autoAlpha:1},0),e.set(t.$refs.logoXibalba.$el,{yPercent:150},0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){switch(n){case b.a.AGE_GATE:e.add(function(){Object(T.a)(A.i).transitionController.setState(b.a.AGE_GATE)}),e.to(t.$el,.6,{autoAlpha:0},0);break;case b.a.UPLOAD_PHOTO:e.add(function(){Object(T.a)(A.i).transitionController.setState(b.a.UPLOAD_PHOTO)}),e.to(t.$el,.6,{autoAlpha:0},.4),e.to(t.$el,1,{scale:1.2,ease:c.Expo.easeIn},0);break;case b.a.OFRENDA:default:e.add(function(){Object(T.a)(A.i).transitionController.setState(b.a.OFRENDA)}),e.to(t.$el,.6,{autoAlpha:0},.4),e.to(t.$el,1,{yPercent:-20,ease:c.Expo.easeIn},0)}}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(a.AbstractTransitionController),x=n(53),k=n(465),P=n(62),w={name:"HomePage",components:{LogoXibalba:x.a,IntroOptions:k.a},extends:a.AbstractPageTransitionComponent,created:function(){this.disposableManager=new u.DisposableManager,this.disposableManager.add(new l.DisposableEventListener(a.FlowManager,a.FlowEvent.START,this.onFlowStart.bind(this)))},beforeDestroy:function(){this.disposableManager&&this.disposableManager.dispose(),this.lerpedMouseMove&&this.lerpedMouseMove.dispose()},methods:{handleIntroOptionsReady:function(){this.setHorizon()},onFlowStart:function(e){this.leaveRoute=e.data.to.name},transitionOut:function(e,t,n){return this.transitionController.transitionOut(e,this.leaveRoute,n)},startMouseMoveTicker:function(){s.a.mobile||s.a.tablet||(this.lerpedMouseMove=new P.a,this.disposableManager.add(new l.DisposableEventListener(c.TweenLite.ticker,"tick",this.tick.bind(this))))},tick:function(){this.lerpedMouseMove&&(this.lerpedMouseMove.tick(),(Math.abs(this.lerpedMouseMove.targetX-this.lerpedMouseMove.currentX)>.1||Math.abs(this.lerpedMouseMove.targetY-this.lerpedMouseMove.currentY)>.1)&&c.TweenLite.set([this.$refs.introOptions.$el],{x:10*this.lerpedMouseMove.currentX,y:10*this.lerpedMouseMove.currentY,rotationX:5*this.lerpedMouseMove.currentY,rotationY:5*this.lerpedMouseMove.currentX,transformPerspective:2e3,transformOrigin:"center center"}))},handleAllComponentsReady:function(){var e=this;this.transitionController=new R(this),this.$refs.logoXibalba.play().then(function(){e.transitionController.showOptions()}),this.disposableManager.add(new l.DisposableEventListener(window,"resize",r()(this.handleResize.bind(this),100))),this.startMouseMoveTicker(),this.isReady()},setHorizon:function(){var e=this.$refs.introOptions.$el.getBoundingClientRect();this.$webgl.setHorizon(e.bottom/window.innerHeight)},handleResize:function(){this.setHorizon()}}};t.a=w},function(e,t,n){"use strict";var i=n(54),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(n(5).AbstractTransitionController),v={name:"DasharrayCircleButton",extends:i.a,methods:{handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=v},function(e,t,n){"use strict";var i=n(9),r=n(5),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=n(7),m=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){var i=t.$el.querySelectorAll(".js-word-inner"),r=t.$el.querySelectorAll(".line.left .js-line-inner"),a=t.$el.querySelectorAll(".line:not(.left) .js-line-inner");e.fromTo(i,1.2,{xPercent:120},{xPercent:0,ease:v.Expo.easeOut},0),e.fromTo(t.$el,.8,{autoAlpha:0},{autoAlpha:1},0),e.fromTo(a,1.2,{xPercent:-120},{xPercent:0,ease:v.Expo.easeOut},.5),e.fromTo(r,1.2,{xPercent:120},{xPercent:0,ease:v.Expo.easeOut},.5),e.fromTo([r,a],.8,{autoAlpha:0},{autoAlpha:1},.5)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,1,{autoAlpha:0})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(r.AbstractTransitionController),_={name:"TextReveal",extends:r.AbstractTransitionComponent,props:{title:i.a.arrayOf(i.a.string).isRequired},mounted:function(){this.$el.querySelectorAll(".word").forEach(function(e){e.innerHTML='<span class="word-inner js-word-inner">'.concat(e.innerHTML,"</span>")}),this.$el.querySelectorAll(".line").forEach(function(e){e.innerHTML='<span class="line-inner js-line-inner"></span>'})},methods:{handleAllComponentsReady:function(){this.transitionController=new m(this),this.isReady()}}};t.a=_},function(e,t,n){"use strict";var i=n(5),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=n(7),v=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){var r=t.$el.querySelectorAll(".js-link");e.add(this.getTimeline("shareList",i.TransitionDirection.IN),0),e.staggerFromTo(r,.6,{autoAlpha:0},{autoAlpha:1},.2,0),e.staggerFromTo(r,.8,{y:20},{y:0,clearProps:"all",ease:p.Expo.easeOut},.2,0),e.addLabel("afterMenu","-=0.6"),e.fromTo(t.$refs.disclaimer,.6,{autoAlpha:0},{autoAlpha:1},"afterMenu"),e.fromTo(t.$refs.disclaimer,.8,{y:20},{y:0,clearProps:"all",ease:p.Expo.easeOut},"afterMenu")}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),m=n(63),_=n(222),g={name:"SiteFooter",components:{PrimaryLink:m.a,ShareList:_.a},extends:i.AbstractTransitionComponent,methods:{handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=g},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=n(7),m=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$el,.001,{autoAlpha:0,pointerEvents:"none",display:"none"},{autoAlpha:1,pointerEvents:"all",display:"block"},0);var i=t.$refs.inputField.$el,r=t.$refs.ctaSubmit.$el,a=t.$refs.ctaRetry.$el;e.staggerFromTo([i,r,a],.8,{y:40},{y:0,ease:v.Expo.easeOut,clearProps:"all"},.2,0),e.staggerFromTo([i,r,a],.6,{autoAlpha:0},{autoAlpha:1,clearProps:"all"},.2,0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.6,{autoAlpha:0,pointerEvents:"none",display:"none"})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),_=n(218),g=n(63),y=n(41),E={name:"EnterPhotoInformation",components:{PrimaryInputField:_.a,PrimaryButton:y.a,PrimaryLink:g.a},extends:i.AbstractTransitionComponent,props:{offerName:r.a.string.isRequired,inputPlaceholder:r.a.string.isRequired,submit:r.a.string.isRequired,retry:r.a.string.isRequired},methods:{onSubmit:function(){var e=this;this.$validator.validateAll().then(function(t){t?e.$emit("submit"):e.handleError(e.$validator.errors.items)})},handleError:function(e){var t=this,n=e.map(function(e){return t.$t("global.form.placeholder.".concat(e.field))}).join(", ");this.$alert({title:this.$t("error.validation.title"),message:this.$t("error.validation.message",{fields:n}),confirm:this.$t("error.global.confirm")})},onValueUpdate:function(e){this.$emit("onValueUpdate",e)},onRetry:function(){this.$emit("retry")},handleAllComponentsReady:function(){this.transitionController=new m(this),this.isReady()}}};t.a=E},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=n(7),m=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"showStartButton",value:function(){var e=this.parentController.$refs.startButton.$el;v.TweenMax.to(this.parentController.$refs.percentage,.8,{scale:1.8,ease:v.Expo.easeOut}),v.TweenMax.to(this.parentController.$refs.percentage,.5,{scale:1,autoAlpha:0,ease:v.Expo.easeOut,delay:.6});v.TweenMax.fromTo(e,.8,{y:30},{y:0,delay:.8,ease:v.Expo.easeOut,clearProps:"all"}),v.TweenMax.fromTo(e,1,{autoAlpha:0},{autoAlpha:1,delay:.8})}},{key:"setupTransitionInTimeline",value:function(e,t,n){e.add(function(){return t.startLoopingAnimation()},0);var i=t.$refs.headphonePulse.$el,r=t.$refs.copy,a=t.$refs.startButton.$el,o=t.$refs.percentage;e.set(a,{autoAlpha:0}),e.staggerFromTo([i,r,o],1,{autoAlpha:0},{autoAlpha:1},.3,0),e.staggerFromTo([i,r,o],.8,{y:30},{y:0,ease:v.Expo.easeOut,clearProps:"all"},.3,0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.8,{autoAlpha:0,display:"none"},0),e.add(function(){return t.$refs.headphonePulse.stopLoopingAnimation()},0)}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){e.add(function(){return t.$refs.headphonePulse.startLoopingAnimation()},0)}}]),t}(i.AbstractTransitionController),_=n(103),g=n(41),y=n(499),E={name:"Preloader",components:{LogoVictoria:_.a,PrimaryButton:g.a,HeadphonePulse:y.a},extends:i.AbstractTransitionComponent,props:{progress:r.a.number.isRequired.def(0)},watch:{progress:function(){this.progress>=100&&this.transitionController.showStartButton()}},methods:{handleAllComponentsReady:function(){this.transitionController=new m(this),this.isReady()}}};t.a=E},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=n(7),m=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){var r=t.$refs.copy,a=t.$refs.cta.$el;e.fromTo(t.$el,.6,{autoAlpha:0,pointerEvents:"none",display:"none"},{autoAlpha:1,pointerEvents:"all",display:"block"},0),e.add(this.getTimeline("title",i.TransitionDirection.IN),0),e.addLabel("afterTitle","-=0.8"),e.staggerFromTo([r,a],.8,{yPercent:30},{yPercent:0,ease:v.Expo.easeOut,clearProps:"all"},.2,"afterTitle"),e.staggerFromTo([r,a],.6,{autoAlpha:0},{autoAlpha:1},.2,"afterTitle"),e.fromTo(t.$refs.shadow,1.2,{autoAlpha:0},{autoAlpha:1},.6)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.6,{pointerEvents:"none",autoAlpha:0,display:"none"},0)}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),_=n(41),g=n(77),y={name:"UploadConfirmed",components:{PrimaryButton:_.a,TextReveal:g.a},extends:i.AbstractTransitionComponent,props:{title:r.a.string.isRequired,copy:r.a.string.isRequired,cta:r.a.string.isRequired},methods:{handleAllComponentsReady:function(){this.transitionController=new m(this),this.isReady()}}};t.a=y},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$el,.6,{autoAlpha:0,display:"none"},{autoAlpha:1,display:"block"})}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),m={name:"InfiniteLoader",extends:i.AbstractTransitionComponent,props:{isActive:r.a.bool.isRequired},watch:{isActive:function(e){e?this.transitionIn():this.transitionOut()}},methods:{handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=m},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),m={name:"ShareBlock",components:{DasharrayCircleButton:n(470).a},extends:i.AbstractTransitionComponent,props:{shareUrl:r.a.string},methods:{getShareUrl:function(){return this.shareUrl||"".concat(window.location.protocol,"//").concat(window.location.host)},handleTwitterShareClick:function(){this.$twitterSharer.share({url:this.getShareUrl()})},handleFacebookShareClick:function(){this.$facebookSharer.share({url:this.getShareUrl()})},handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=m},function(e,t,n){"use strict";var i=n(9),r=n(54),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=n(5),m=n(7),_=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$el,.5,{scale:0},{scale:1,ease:m.Power3.easeOut})}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.5,{scale:0,ease:m.Power3.easeOut})}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(v.AbstractTransitionController),g=n(29),y={name:"PlayButton",props:{isPlaying:i.a.bool,size:i.a.oneOf(Object.values(g.a)).def(g.a.MEDIUM)},extends:r.a,methods:{handleAllComponentsReady:function(){this.transitionController=new _(this),this.isReady()}}};t.a=y},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),m={name:"PrimaryInputField",extends:i.AbstractTransitionComponent,props:{name:r.a.string.isRequired,placeholder:r.a.string,value:r.a.string,type:r.a.string.def("text"),isInvalid:r.a.bool.def(!1),maxlength:r.a.number,tdType:r.a.string},data:function(){return{internalValue:""}},watch:{value:function(e){this.internalValue=e},internalValue:function(e){e===this.internalValue&&this.$emit("input",{value:e,name:this.name})}},mounted:function(){null!==this.value&&(this.internalValue=this.value)},methods:{handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=m},function(e,t,n){"use strict";var i=n(5),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),v={name:"OrientationMessage",extends:i.AbstractTransitionComponent,methods:{handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=v},function(e,t,n){"use strict";var i=n(54),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(n(5).AbstractTransitionController),v=n(28),m=n(26),_={name:"CloseButton",extends:i.a,methods:{onClick:function(){this.$soundManager.play(v.a.CLICK_1,m.a.UI)},handleAllComponentsReady:function(){this.transitionController=new p(this),this.isReady()}}};t.a=_},function(e,t,n){"use strict";var i=n(38),r=n.n(i),a=n(5),o=n(45),s=n(9),l=n(0),u=n.n(l),c=n(1),h=n.n(c),d=n(3),f=n.n(d),p=n(2),v=n.n(p),m=n(4),_=n.n(m),g=function(e){function t(){return u()(this,t),f()(this,v()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(a.AbstractTransitionController),y=n(79),E=n(28),A=n(26),T={name:"HamburgerButton",extends:a.AbstractTransitionComponent,props:{isDisabled:s.a.bool.def(!1)},computed:r()({},Object(o.d)({menuIsOpen:function(e){return e.app.menuIsOpen}})),methods:{toggleMenu:function(){this.$soundManager.play(E.a.CLICK_1,A.a.UI),this.$store.commit(y.b,!this.menuIsOpen)},handleAllComponentsReady:function(){this.transitionController=new g(this),this.isReady()}}};t.a=T},function(e,t,n){"use strict";var i=n(5),r=n(9),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),m=n(29),_=n(28),g=n(26),y={name:"PrimaryCheckbox",extends:i.AbstractTransitionComponent,props:{name:r.a.string.isRequired,value:r.a.bool,staticValue:r.a.string,label:r.a.string.isRequired,size:r.a.oneOf([m.a.SMALL,m.a.MEDIUM,m.a.LARGE]).def(m.a.MEDIUM),tdType:r.a.string},data:function(){return{checked:null}},computed:{checkboxSize:function(){return m.a[this.size].toLowerCase()}},watch:{checked:function(e){this.$soundManager.play(_.a.CLICK_1,g.a.UI);var t=!0===e||null;t!==this.value&&this.$emit("input",{value:t,name:this.name})},value:function(e){this.checked=e}},mounted:function(){null!==this.value&&(this.checked=this.value)},methods:{handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=y},function(e,t,n){"use strict";var i=n(5),r=n(7),a=n(19),o=n.n(a),s=n(88),l=n.n(s),u=n(102),c=n.n(u),h=n(31),d=n(0),f=n.n(d),p=n(1),v=n.n(p),m=n(3),_=n.n(m),g=n(2),y=n.n(g),E=n(4),A=n.n(E),T=function(e){function t(){return f()(this,t),_()(this,y()(t).apply(this,arguments))}return A()(t,e),v()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$el,.001,{display:"none",autoAlpha:0},{display:"block",autoAlpha:1},0),e.fromTo(t.$refs.mask,.4,{autoAlpha:0},{autoAlpha:1},0),e.fromTo(t.$refs.innerContent,.3,{scale:0},{scale:1,ease:r.Back.easeOut},0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.5,{autoAlpha:0,display:"none"}),e.to(t.$refs.innerContent,.2,{scale:0,ease:r.Back.easeOut},0)}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),b=n(41),R=n(62),x={name:"Notification",components:{PrimaryButton:b.a},extends:i.AbstractTransitionComponent,mixins:[h.componentMixin],watch:{notification:function(e){var t=this;e?this.$nextTick(function(){t.transitionController.setupTimeline(i.TimelineType.IN,!0),t.transitionIn()}):this.transitionOut()}},created:function(){this.disposableManager=new c.a},beforeDestroy:function(){this.disposableManager&&this.disposableManager.dispose(),this.lerpedMouseMove&&this.lerpedMouseMove.dispose(),this.tickerEvent&&this.tickerEvent.dispose()},methods:{handleTransitionOutStart:function(){this.lerpedMouseMove&&this.lerpedMouseMove.dispose(),this.tickerEvent&&this.tickerEvent.dispose()},handleTransitionInStart:function(){this.startMouseMoveTicker(),this.$refs.buttons.forEach(function(e){return e.transitionIn()})},handleAllComponentsReady:function(){var e=this;this.transitionController=new T(this),this.disposableManager.add(new l.a(this.transitionController,i.TransitionEvent.TRANSITION_IN_START,this.handleTransitionInStart.bind(this))),this.disposableManager.add(new l.a(this.transitionController,i.TransitionEvent.TRANSITION_OUT_START,this.handleTransitionOutStart.bind(this))),this.isReady(),this.$router.afterEach(function(){e.transitionOut()})},handleButtonClick:function(e){var t=this;this.transitionOut().then(function(){return t.resolve(e.value)})},startMouseMoveTicker:function(){o.a.tablet||o.a.mobile||(this.lerpedMouseMove=new R.a,this.tickerEvent=new l.a(r.TweenLite.ticker,"tick",this.tick.bind(this)))},tick:function(){this.lerpedMouseMove&&(this.lerpedMouseMove.tick(),(Math.abs(this.lerpedMouseMove.targetX-this.lerpedMouseMove.currentX)>.1||Math.abs(this.lerpedMouseMove.targetY-this.lerpedMouseMove.currentY)>.1)&&r.TweenLite.set([this.$refs.parallaxContainer],{x:10*this.lerpedMouseMove.currentX,y:10*this.lerpedMouseMove.currentY,rotationX:5*this.lerpedMouseMove.currentY,rotationY:5*this.lerpedMouseMove.currentX,transformPerspective:2e3,transformOrigin:"center center"}))}}};t.a=x},function(e,t,n){"use strict";var i=n(17),r=n.n(i),a=n(5),o=n(9),s=n(31),l=n(0),u=n.n(l),c=n(1),h=n.n(c),d=n(3),f=n.n(d),p=n(2),v=n.n(p),m=n(4),_=n.n(m),g=n(7),y=function(e){function t(){return u()(this,t),f()(this,v()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){e.fromTo(t.$el,1,{autoAlpha:0},{autoAlpha:1},0),e.fromTo(t.$el,1,{scale:1.2,display:"none"},{scale:1,display:"flex",ease:g.Expo.easeOut},0),e.add(this.getTimeline("title",a.TransitionDirection.IN),"-=0.6")}},{key:"setupTransitionOutTimeline",value:function(e,t,n){e.to(t.$el,.6,{autoAlpha:0,display:"none"},.4),e.to(t.$el,1,{scale:.5,ease:g.Expo.easeIn},0)}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(a.AbstractTransitionController),E=n(53),A=n(216),T=n(41),b=n(218),R=n(217),x=n(40),k=n(77),P=n(48),w={name:"UploadForm",components:{LogoXibalba:E.a,PrimaryCheckbox:A.a,PrimaryButton:T.a,PrimaryInputField:b.a,TextReveal:k.a},extends:a.AbstractPageTransitionComponent,props:{title:o.a.arrayOf(o.a.string).isRequired,copy:o.a.string.isRequired,submit:o.a.string.isRequired,image:o.a.string,offerName:o.a.string},data:function(){return{firstName:null,lastName:null,email:null,terms:null,commercial:null}},methods:{onValueUpdate:function(e){this[e.name]=e.value},onSubmit:function(){var e=this;this.$trackingManager.trackEvent(r()({},this.TrackingProvider.GTM,{event:"trackEvent",eventCategory:"formulario",eventAction:"click",eventLabel:"aceptar"})),this.terms&&this.$validator.validateAll().then(function(t){t?(Object(s.getEventBus)().$emit(P.b),e.$el.style.pointerEvents="none",R.b.saveProfile({offerName:e.offerName,image:e.image,firstName:e.firstName,lastName:e.lastName,email:e.email,dateOfBirth:e.$store.getters[x.b],acceptTerms:e.terms,acceptCommercial:e.commercial}).then(function(t){console.log(t),Object(s.getEventBus)().$emit(P.a),e.$el.style.pointerEvents="all",e.$emit("formCompleted")}).catch(function(t){e.handleError(t.error.fields,"error.form.validation"===t.error.code),Object(s.getEventBus)().$emit(P.a),e.$el.style.pointerEvents="all"})):e.handleError(e.$validator.errors.items,!0)})},handleError:function(e,t){var n,i=this,r="error.global.title",a="error.global.message";t&&(r="error.validation.title",a="error.validation.message",n=e.map(function(e){return i.$t("global.form.placeholder.".concat(e.field))}).join(", ")),this.$alert({title:this.$t(r),message:this.$t(a,{fields:n}),confirm:this.$t("error.global.confirm")})},handleAllComponentsReady:function(){this.transitionController=new y(this),this.isReady()}}};t.a=w},function(e,t,n){"use strict";var i=n(5),r=n(0),a=n.n(r),o=n(1),s=n.n(o),l=n(3),u=n.n(l),c=n(2),h=n.n(c),d=n(4),f=n.n(d),p=n(7),v=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){var i=t.$el.querySelectorAll(".js-list-item");e.staggerFromTo(i,.6,{autoAlpha:0},{autoAlpha:1},.2,0),e.staggerFromTo(i,.8,{y:-20},{y:0,ease:p.Expo.easeOut,clearProps:"all"},.2,0)}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(i.AbstractTransitionController),m={name:"ShareList",components:{PrimarySquareButton:n(495).a},extends:i.AbstractTransitionComponent,methods:{getShareUrl:function(){return this.shareUrl||window.location.href},shareTwitter:function(){this.$twitterSharer.share({url:this.getShareUrl()})},shareFacebook:function(){this.$facebookSharer.share({url:this.getShareUrl()})},handleAllComponentsReady:function(){this.transitionController=new v(this),this.isReady()}}};t.a=m},function(e,t,n){"use strict";var i=n(7),r=n(5),a=n(9),o=n(0),s=n.n(o),l=n(1),u=n.n(l),c=n(3),h=n.n(c),d=n(2),f=n.n(d),p=n(4),v=n.n(p),m=function(e){function t(){return s()(this,t),h()(this,f()(t).apply(this,arguments))}return v()(t,e),u()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(r.AbstractTransitionController),_={name:"LogoVictoria",props:{isBlurred:a.a.bool.def(!1),isHidden:a.a.bool.def(!1)},extends:r.AbstractTransitionComponent,watch:{isHidden:function(){this.setVisibility()}},mounted:function(){this.setVisibility()},methods:{setVisibility:function(){i.TweenLite.to(this.$el,1,{autoAlpha:this.isHidden?0:1})},handleAllComponentsReady:function(){this.transitionController=new m(this),this.isReady()}}};t.a=_},function(e,t,n){"use strict";var i=n(9),r=n(5),a=n(0),o=n.n(a),s=n(1),l=n.n(s),u=n(3),c=n.n(u),h=n(2),d=n.n(h),f=n(4),p=n.n(f),v=function(e){function t(){return o()(this,t),c()(this,d()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"setupTransitionInTimeline",value:function(e,t,n){}},{key:"setupTransitionOutTimeline",value:function(e,t,n){}},{key:"setupLoopingAnimationTimeline",value:function(e,t,n){}}]),t}(r.AbstractTransitionController),m=n(28),_=n(26),g={name:"MuteButton",extends:r.AbstractTransitionComponent,props:{isMuted:i.a.bool.isRequired},watch:{isMuted:function(){this.setAnimation(),this.$soundManager.play(m.a.CLICK_1,_.a.UI)}},methods:{setAnimation:function(){this.isMuted?this.stopLoopingAnimation():this.startLoopingAnimation()},handleAllComponentsReady:function(){this.transitionController=new v(this),this.setAnimation(),this.isReady()}}};t.a=g},function(e,t,n){"use strict";var i=n(9),r=n(647),a={name:"Icon",props:{name:i.a.string.isRequired},computed:{icon:function(){return r("./".concat(this.name,".svg"))}}};t.a=a},,function(e,t,n){"use strict";t.a={TIMEOUT:"timeOut"}},function(e,t,n){"use strict";(function(e){var i=n(318),r=n(207),a=n(282),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/form/PrimaryCheckbox/PrimaryCheckbox.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n(15),r=n(14),a=n(13);function o(e){return Object(r.a)(i.b).getVariable(a.d.MOCK_API_ENABLED)?"".concat(e,".json"):e}var s={saveProfile:function(e){return Object(r.a)(i.b).getVariable(a.d.MOCK_API_ENABLED)?Object(r.a)(i.d).get(o("saveProfile")):Object(r.a)(i.d).post(o("saveProfile"),e)}},l={getAll:function(e){return Object(r.a)(i.b).getVariable(a.d.MOCK_API_ENABLED)?Object(r.a)(i.d).get(o("getProfiles")):Object(r.a)(i.d).get(o("getProfiles"),{params:e})}}},function(e,t,n){"use strict";(function(e){var i=n(352),r=n(203),a=n(291),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/form/PrimaryInputField/PrimaryInputField.vue",t.a=u.exports}).call(this,n(18)(e))},,function(e,t,n){"use strict";(function(e){var i=n(325),r=n(202),a=n(295),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/PlayButton/PlayButton.vue",t.a=u.exports}).call(this,n(18)(e))},,function(e,t,n){"use strict";(function(e){var i=n(316),r=n(210),a=n(302),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/ShareList/ShareList.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";var i=n(45),r=n(42),a=n(505),o=n(79).d,s=n(40),l=n(46),u={app:o,user:s.h,ofrenda:l.e};r.a.use(i.a);var c=null;t.a=function(){return c||(c=new i.a.Store({modules:u,strict:!1,plugins:[Object(a.a)({storage:window.localStorage,reducer:function(e){return{user:e.user}}})]})),c}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="uniform float delta;\n\nfloat smooth = 2.0;\n\n\nfloat noisehash13(highp vec3 p3) {\n\tp3  = fract(p3 * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv.y = 1.0 - uv.y;\n\n\tvec4 color = texture(iChannel0, uv).rgba;\n\n\tfloat colorGrad = texture(iChannel1, uv).r;\n   float noise = noisehash13( vec3(gl_FragCoord.xyx));\n\n  colorGrad = max(0., colorGrad - smooth * noise / 255.);\n\n\tcolor.rgb *= color.a;\n\tfragColor = color * smoothstep( colorGrad - 1.0 / smooth, colorGrad, (delta * (1.0 + 1.0 / smooth) - 1.0 / smooth));\n}\n"},function(e,t,n){"use strict";var i=n(135),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(137),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(138),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(139),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(140),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(141),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(142),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(143),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(144),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(145),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(146),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(147),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(148),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(149),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(150),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(151),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(152),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(153),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(154),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(155),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(156),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(157),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(158),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(159),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(160),r=n.n(i);t.default=r.a},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\nuniform sampler2D uTexture;\nuniform vec2 uResolution;\nuniform highp float uTime;\n\n//FUNCTIONS\n\nvoid main(void) {\n\tvec3 color;\n\n\t//EFFECTS\n\n\tgl_FragColor = vec4(color, 1);\n}"},function(e,t,n){"use strict";var i=n(161),r=n.n(i);t.default=r.a},,function(e,t,n){"use strict";var i=n(162),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(163),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(164),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(165),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(166),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(167),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(168),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(169),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(170),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(171),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(172),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(173),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=n(174),r=n.n(i);t.default=r.a},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{class:[e.$style.uploadForm],attrs:{novalidate:"","td-campaign-id":"","td-campaign-name":"register"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("TextReveal",{ref:"title",class:[e.$style.title,"heading-03"],attrs:{title:e.title}},[n("div",{ref:"shadow",class:[e.$style.shadow]})]),e._v(" "),n("p",{ref:"copy",class:[e.$style.copy,"copy-02"],domProps:{innerHTML:e._s(e.copy)}}),e._v(" "),n("div",{class:[e.$style.form]},[n("div",{class:[e.$style.fieldRow,e.$style.inputHolder]},[n("PrimaryInputField",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"firstName",class:[e.$style.inputField],attrs:{name:"firstName",value:e.firstName,"td-type":"firstname","is-invalid":e.errors.has("firstName"),"data-vv-name":"firstName",type:"text",placeholder:e.$t("global.form.placeholder.firstName")},on:{input:e.onValueUpdate}}),e._v(" "),n("PrimaryInputField",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"lastName",class:[e.$style.inputField],attrs:{name:"lastName",value:e.lastName,"td-type":"lastname","is-invalid":e.errors.has("lastName"),"data-vv-name":"lastName",type:"text",placeholder:e.$t("global.form.placeholder.lastName")},on:{input:e.onValueUpdate}})],1),e._v(" "),n("div",{class:[e.$style.inputHolder]},[n("PrimaryInputField",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],ref:"email",class:[e.$style.inputField],attrs:{name:"email",value:e.email,"td-type":"email","data-vv-name":"email","is-invalid":e.errors.has("email"),type:"email",placeholder:e.$t("global.form.placeholder.email")},on:{input:e.onValueUpdate}})],1),e._v(" "),n("div",{class:[e.$style.checkboxHolder]},[n("PrimaryCheckbox",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"checkbox",class:[e.$style.checkbox,e.$style.terms],attrs:{name:"terms",value:e.terms,"static-value":"MIDAM_MEX_VICTORIAMUERTOS_TC-PP","td-type":"TC-PP",label:e.submit,"data-vv-name":"terms",size:e.Size.LARGE},on:{input:e.onValueUpdate}}),e._v(" "),n("PrimaryCheckbox",{class:[e.$style.checkbox,e.$style.terms],attrs:{name:"commercial",value:e.commercial,"static-value":"MIDAM_MEX_VICTORIAMUERTOS_MARKETING-ACTIVATION",label:e.$t("register.commercial"),"td-type":"MARKETING-ACTIVATION",size:e.Size.LARGE},on:{input:e.onValueUpdate}})],1),e._v(" "),n("div",{class:[e.$style.buttons]},[n("div",{class:[e.$style.buttonHolder,"graphic-button-holder"]},[n("PrimaryButton",{ref:"submitButton",class:[e.$style.submitButton],attrs:{label:e.$t("register.submit"),type:e.ButtonType.SUBMIT,active:e.terms,title:e.$t("register.submit")}},[n("div",{class:["graphic-wave"]})])],1)])])],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.siteFooter]},[n("ShareList",{ref:"shareList",class:[e.$style.shareList]}),e._v(" "),n("ul",{class:[e.$style.menuList]},[n("li",{class:[e.$style.menuListItem,"js-link"]},[n("PrimaryLink",{attrs:{label:e.$t("footer.menu.terms.label"),type:e.ButtonType.LINK,link:{type:e.LinkType.EXTERNAL_BLANK,target:e.$versionRoot+"doc/terms.pdf"},title:e.$t("footer.menu.terms.label")}})],1),e._v(" "),n("li",{class:[e.$style.menuListItem,"js-link"]},[n("PrimaryLink",{attrs:{label:e.$t("footer.menu.privacy.label"),type:e.ButtonType.LINK,link:{type:e.LinkType.EXTERNAL_BLANK,target:e.$t("footer.menu.privacy.target")},title:e.$t("footer.menu.privacy.label")}})],1),e._v(" "),n("li",{class:[e.$style.menuListItem,"js-link"]},[n("PrimaryLink",{attrs:{label:e.$t("footer.menu.beers.label"),type:e.ButtonType.LINK,link:{type:e.LinkType.EXTERNAL_BLANK,target:e.$t("footer.menu.beers.target")},title:e.$t("footer.menu.beers.label")}})],1),e._v(" "),n("li",{class:[e.$style.menuListItem,"js-link"]},[n("PrimaryLink",{attrs:{label:e.$t("footer.menu.contact.label"),type:e.ButtonType.LINK,link:{type:e.LinkType.EXTERNAL_BLANK,target:e.$t("footer.menu.contact.target")},title:e.$t("footer.menu.contact.label")}})],1)]),e._v(" "),n("hr"),e._v(" "),n("p",{ref:"disclaimer",class:[e.$style.disclaimer,"copy-03"],domProps:{innerHTML:e._s(e.$t("footer.disclaimer"))}})],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t,n=this,i=n.$createElement,r=n._self._c||i;return r("ul",{class:[n.$style.shareList]},[r("li",{class:[n.$style.listItem,"js-list-item"]},[n._v("\n    compartir\n  ")]),n._v(" "),r("li",{class:[n.$style.listItem,"js-list-item"]},[r("PrimarySquareButton",{directives:[{name:"track",rawName:"v-track",value:(e={},e[n.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"compartir",eventAction:"click",eventLabel:"twitter"},e),expression:"{\n        [TrackingProvider.GTM]: {\n          event: 'trackEvent',\n          eventCategory: 'compartir',\n          eventAction: 'click',\n          eventLabel: 'twitter'\n        }\n      }"}],class:[n.$style.button],attrs:{icon:"twitter",type:n.ButtonType.ACTION},on:{click:n.shareTwitter}})],1),n._v(" "),r("li",{class:[n.$style.listItem,"js-list-item"]},[r("PrimarySquareButton",{directives:[{name:"track",rawName:"v-track",value:(t={},t[n.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"compartir",eventAction:"click",eventLabel:"facebook"},t),expression:"{\n        [TrackingProvider.GTM]: {\n          event: 'trackEvent',\n          eventCategory: 'compartir',\n          eventAction: 'click',\n          eventLabel: 'facebook'\n        }\n      }"}],class:[n.$style.button],attrs:{icon:"facebook",type:n.ButtonType.ACTION},on:{click:n.shareFacebook}})],1)])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.notification,"abs-fill"]},[n("div",{ref:"mask",class:[e.$style.mask,"abs-fill"]}),e._v(" "),n("div",{ref:"parallaxContainer",class:[e.$style.parallaxContainer,"abs-fill"]},[n("div",{ref:"innerContent",class:[e.$style.innerContent,"abs-center"]},[n("div",{class:[e.$style.background,"abs-fill"]}),e._v(" "),n("h3",{class:[e.$style.title,"heading-03"],domProps:{innerHTML:e._s(e.title)}}),e._v(" "),n("p",{class:[e.$style.copy,"copy-02"],domProps:{innerHTML:e._s(e.message)}}),e._v(" "),n("div",{class:[e.$style.buttonHolder]},e._l(e.buttons,function(t){return n("PrimaryButton",{key:t.label,ref:"buttons",refInFor:!0,class:[e.$style.button],attrs:{label:t.label,type:e.ButtonType.ACTION,title:t.label},on:{click:function(n){return e.handleButtonClick(t)}}})}),1)])])])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:[e.$style.primaryCheckbox,e.$style["is-"+e.checkboxSize],"checkbox"],attrs:{for:e.name}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],attrs:{id:e.name,name:e.name,"td-type":e.tdType,type:"checkbox"},domProps:{value:e.staticValue,checked:Array.isArray(e.checked)?e._i(e.checked,e.staticValue)>-1:e.checked},on:{change:function(t){var n=e.checked,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=e.staticValue,o=e._i(n,a);i.checked?o<0&&(e.checked=n.concat([a])):o>-1&&(e.checked=n.slice(0,o).concat(n.slice(o+1)))}else e.checked=r}}}),e._v(" "),n("div",{class:[e.$style.container,"container"]},[n("div",{class:[e.$style.element,"element"]},[n("Icon",{class:[e.$style.icon,"icon"],attrs:{name:"checkmark"}})],1),e._v(" "),n("span",{class:[e.$style.text,"text","copy-02"],domProps:{innerHTML:e._s(e.label)}})])])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.uploadInstruction]},[n("div",{class:[e.$style.container,"abs-fill"]},[n("div",{class:[e.$style.content]},[e.image?n("figure",{ref:"figure",class:[e.$style.figure,"abs-fill"]},[n("img",{class:[e.$style.image],attrs:{src:e.image}})]):e._e(),e._v(" "),n("label",{class:[e.$style.fileUpload,"abs-fill"],attrs:{for:"image"}},[n("input",{ref:"fileInput",attrs:{id:"image",name:"image",type:"file",accept:".jpg, .png"},on:{click:e.onClick,change:e.onFileUpload}})]),e._v(" "),n("Icon",{ref:"icon",class:[e.$style.uploadIcon],attrs:{name:"upload"}}),e._v(" "),n("p",{ref:"title",class:[e.$style.title,"copy-03"],domProps:{innerHTML:e._s(e.title)}})],1)])])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this.$createElement,n=this._self._c||t;return n("button",{class:[this.$style.hamburgerButton,"button",(e={},e[this.$style.isActive]=this.menuIsOpen,e[this.$style.isDisabled]=this.isDisabled,e)],on:{click:this.toggleMenu}},[n("span")])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:["abs-fill",this.$style.orientationMessage]},[t("Icon",{class:this.$style.icon,attrs:{name:"rotate"}})],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{class:[t.$style.infiniteLoader,(e={},e[t.$style.isActive]=t.isActive,e)]},[i("div",{class:[t.$style.loader,"abs-center"]},t._l(4,function(e){return i("div",{key:e,ref:"line",refInFor:!0,class:[t.$style.line]})}),0)])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.dobInputField]},[n("div",{class:[e.$style.inputField,e.$style.dayInput]},[n("input",{ref:"day",class:[e.$style.input,"input-field"],attrs:{type:"tel",maxlength:"2",name:"day","data-next":"month","td-type":"dayOfBirth",placeholder:e.$t("global.form.placeholder.day"),autocomplete:"off"},domProps:{value:e.day},on:{input:e.onChange}})]),e._v(" "),n("div",{class:[e.$style.inputField,e.$style.monthInput]},[n("input",{ref:"month",class:[e.$style.input,"input-field"],attrs:{type:"tel",maxlength:"2",name:"month","td-type":"monthOfBirth","data-next":"year",placeholder:e.$t("global.form.placeholder.month"),autocomplete:"off"},domProps:{value:e.month},on:{input:e.onChange}})]),e._v(" "),n("div",{class:[e.$style.inputField,e.$style.yearInput]},[n("input",{ref:"year",class:[e.$style.input,"input-field"],attrs:{type:"tel",maxlength:"4",name:"year","td-type":"yearOfBirth",placeholder:e.$t("global.form.placeholder.year"),autocomplete:"off"},domProps:{value:e.year},on:{input:e.onChange}})])])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t,n=this,i=n.$createElement,r=n._self._c||i;return r("div",{class:[n.$style.shareBlock]},[r("DasharrayCircleButton",{directives:[{name:"track",rawName:"v-track",value:(e={},e[n.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"thank you page",eventAction:"compartir",eventLabel:"facebook"},e),expression:"{\n      [TrackingProvider.GTM]: {\n        event: 'trackEvent',\n        eventCategory: 'thank you page',\n        eventAction: 'compartir',\n        eventLabel: 'facebook'\n      }\n    }"}],ref:"facebook",class:[n.$style.facebookButton],attrs:{icon:"facebook",title:"facebook",type:n.ButtonType.ACTION},on:{click:n.handleFacebookShareClick}}),n._v(" "),r("div",{class:[n.$style.divider]},[r("span",{class:[n.$style.copy,"copy-03"]},[n._v("Compartir")])]),n._v(" "),r("DasharrayCircleButton",{directives:[{name:"track",rawName:"v-track",value:(t={},t[n.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"thank you page",eventAction:"compartir",eventLabel:"twitter"},t),expression:"{\n      [TrackingProvider.GTM]: {\n        event: 'trackEvent',\n        eventCategory: 'thank you page',\n        eventAction: 'compartir',\n        eventLabel: 'twitter'\n      }\n    }"}],ref:"twitter",class:[n.$style.twitterButton],attrs:{icon:"twitter",title:"twitter",type:n.ButtonType.ACTION},on:{click:n.handleTwitterShareClick}}),n._v(" "),r("div",{class:[n.$style.splatterRight,"graphic-splatter"]}),n._v(" "),r("div",{class:[n.$style.splatterLeft,"graphic-splatter"]}),n._v(" "),r("div",{class:[n.$style.leafLeft,"graphic-leaf"]}),n._v(" "),r("div",{class:[n.$style.leafRight,"graphic-leaf"]})],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this.$createElement,n=this._self._c||t;return n("button",{ref:"button",class:[this.$style.playButton,"button",(e={},e[this.$style.isPlaying]=this.isPlaying,e)],attrs:{title:this.title||"",type:"button"},on:{click:this.handleClick}},[n("div",{class:[this.$style.outline]})])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{class:[t.$style.uploadConfirmed]},[i("TextReveal",{ref:"title",class:[t.$style.title,"heading-03"],attrs:{title:t.title}},[i("div",{ref:"shadow",class:[t.$style.shadow]})]),t._v(" "),i("p",{ref:"copy",class:[t.$style.copy,"copy-02"],domProps:{innerHTML:t._s(t.copy)}}),t._v(" "),i("PrimaryButton",{directives:[{name:"track",rawName:"v-track",value:(e={},e[t.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"thank you page",eventAction:"click",eventLabel:"visita la ofrenda"},e),expression:"{\n      [TrackingProvider.GTM]: {\n        event: 'trackEvent',\n        eventCategory: 'thank you page',\n        eventAction: 'click',\n        eventLabel: 'visita la ofrenda'\n      }\n    }"}],ref:"cta",class:[t.$style.button],attrs:{label:t.cta,type:t.ButtonType.ACTION,title:t.cta},on:{click:function(e){return t.$emit("click")}}})],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.preloader,"abs-fill"]},[n("LogoVictoria",{ref:"backgroundLogo",class:[e.$style.logoVictoria]}),e._v(" "),n("div",{class:[e.$style.logoHolder,e.$style.row]},[n("LogoVictoria",{ref:"logo",class:[e.$style.logo],attrs:{"is-blurred":!0}})],1),e._v(" "),n("div",{class:[e.$style.content,e.$style.row]},[n("HeadphonePulse",{ref:"headphonePulse",class:[e.$style.headphonePulse]}),e._v(" "),n("p",{ref:"copy",class:[e.$style.copy,"copy-02"],domProps:{innerHTML:e._s(e.$t("preloader.copy"))}}),e._v(" "),n("PrimaryButton",{ref:"startButton",class:[e.$style.startButton],attrs:{label:e.$t("preloader.start"),title:e.$t("preloader.start"),type:e.ButtonType.ACTION,disabled:e.progress<100},on:{click:function(t){return e.$emit("continue")}}})],1),e._v(" "),n("div",{class:[e.$style.percentageHolder,e.$style.row]},[n("div",{ref:"percentage",class:[e.$style.percentage,"copy-01"]},[e._v("\n      "+e._s(e.progress)+" %\n    ")])])],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{class:[t.$style.enterPhotoInformation,"abs-fill"]},[i("div",{class:[t.$style.siteFrame]},[i("div",{class:[t.$style.container]},[i("PrimaryInputField",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"inputField",class:[t.$style.inputField],attrs:{name:"offerName",value:t.offerName,maxlength:30,"is-invalid":t.errors.has("offerName"),"data-vv-name":"offerName",type:"text",placeholder:t.inputPlaceholder},on:{input:t.onValueUpdate}}),t._v(" "),i("div",{class:[t.$style.buttonHolder]},[i("PrimaryButton",{directives:[{name:"track",rawName:"v-track",value:(e={},e[t.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"formulario",eventAction:"click",eventLabel:"subir foto"},e),expression:"{\n            [TrackingProvider.GTM]: {\n              event: 'trackEvent',\n              eventCategory: 'formulario',\n              eventAction: 'click',\n              eventLabel: 'subir foto'\n            }\n          }"}],ref:"ctaSubmit",class:[t.$style.button],attrs:{label:t.submit,type:t.ButtonType.SUBMIT,title:t.submit},on:{click:t.onSubmit}}),t._v(" "),i("PrimaryLink",{ref:"ctaRetry",class:[t.$style.button],attrs:{label:t.retry,type:t.ButtonType.ACTION,title:t.retry},on:{click:t.onRetry}})],1)],1)])])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.videoOverlay,"abs-fill"]},[n("div",{class:[e.$style.videoHolder,"abs-fill"]},[n("div",{ref:"videoHolder",class:["abs-fill"]}),e._v(" "),n("div",{ref:"canvasHolder",class:[e.$style.canvasHolder,"abs-fill"]})]),e._v(" "),n("CloseButton",{ref:"closeButton",class:[e.$style.closeButton],attrs:{type:e.ButtonType.ACTION},on:{click:e.transitionOut}})],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("button",{ref:"button",class:[t.$style.muteButton,"button",(e={},e[t.$style.isMuted]=t.isMuted,e)],attrs:{type:"button"},on:{click:function(e){return t.$emit("click")}}},[i("div",{class:[t.$style.container]},t._l(4,function(e){return i("div",{key:e,ref:"line",refInFor:!0,class:[t.$style.line]})}),0)])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{class:[e.$style.textReveal]},[e._l(e.title,function(t,i){return n("div",{key:i,ref:"titlePart",refInFor:!0,class:[e.$style.titlePart,"title-part"],domProps:{innerHTML:e._s(t)}})}),e._v(" "),e._t("default")],2)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.homePage]},[n("LogoXibalba",{ref:"logoXibalba",class:[e.$style.logoXibalba],attrs:{size:e.Size.LARGE,"is-sequence":!0}}),e._v(" "),n("IntroOptions",{ref:"introOptions",class:[e.$style.introOptions],attrs:{title:e.$store.getters.translation.home.title,copy:e.$t("home.copy"),"cta-left":e.$t("home.ctaLeft"),"cta-right":e.$t("home.ctaRight")},on:{isReady:e.handleIntroOptionsReady}})],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t,n,i=this,r=i.$createElement,a=i._self._c||r;return a("div",{class:[i.$style.primaryButton,(e={},e[i.$style.isInactive]=!i.active,e[i.$style.isDisabled]=i.disabled,e)]},[i.type===i.ButtonType.LINK?a("a",{ref:"button",class:[i.$style.button,"button",(t={},t["is-disabled"]=i.disabled,t)],attrs:{href:i.target,title:i.title||""},on:{click:i.handleClick}},[i.icon?a("Icon",{class:[i.$style.icon,i.$style[i.icon]],attrs:{name:i.icon}}):i._e(),i._v(" "),a("span",{class:i.$style.label,domProps:{innerHTML:i._s(i.label)}})],1):a("button",{ref:"button",class:[i.$style.button,"button",(n={},n["is-disabled"]=i.disabled,n)],attrs:{title:i.title||"",type:i.type===i.ButtonType.SUBMIT?"submit":"button"},on:{click:i.handleClick}},[i.icon?a("Icon",{class:[i.$style.icon,i.$style[i.icon]],attrs:{name:i.icon}}):i._e(),i._v(" "),a("span",{class:i.$style.label,domProps:{innerHTML:i._s(i.label)}})],1),i._v(" "),i._t("default")],2)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement;return(t._self._c||n)("Icon",{class:[t.$style.logoVictoria,(e={},e[t.$style.isBlurred]=t.isBlurred,e[t.$style.isVisible]=!t.isHidden,e)],attrs:{name:"logo-victoria"},on:{click:function(e){return t.$router.push({name:t.RouteNames.HOME})}}})},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t,n=this,i=n.$createElement,r=n._self._c||i;return r("div",{class:[n.$style.heroVideo,(e={},e[n.$style.isPlaying]=n.isPlaying,e)],on:{click:n.handleClick,mouseenter:n.handleMouseEnter,mouseleave:n.handleMouseLeave,mousemove:n.handleMouseMove}},[r("div",{ref:"videoHolder",class:[n.$style.videoHolder,"abs-fill"]}),n._v(" "),r("div",{ref:"poster",class:[n.$style.poster,"abs-fill"],style:{backgroundImage:"url("+n.video.poster+")"}}),n._v(" "),r("PlayButton",{ref:"playButton",class:[n.$style.playButton],attrs:{"is-playing":n.isPlaying,type:n.ButtonType.ACTION}}),n._v(" "),r("h1",{ref:"title",class:[n.$style.title]},n._l(n.$store.getters.translation.teaser.hero.title,function(e,t){return r("div",{key:t,ref:"titlePart",refInFor:!0,class:[n.$style.titlePart],domProps:{innerHTML:n._s(e)}})}),0),n._v(" "),r("div",{class:[n.$style.shade]}),n._v(" "),r("div",{ref:"content",class:[n.$style.content]},[r("div",{class:[n.$style.buttonHolder,"graphic-button-holder"]},[r("div",{class:[n.$style.copy,"copy-02"]},n._l(n.$store.getters.translation.teaser.hero.copy,function(e,t){return r("p",{key:t,ref:"copyLine",refInFor:!0,class:[n.$style.copyLine],domProps:{innerHTML:n._s(e)}})}),0),n._v(" "),r("PrimaryButton",{directives:[{name:"track",rawName:"v-track",value:(t={},t[n.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"home",eventAction:"click",eventLabel:"vamos"},t),expression:"{\n          [TrackingProvider.GTM]: {\n            event: 'trackEvent',\n            eventCategory: 'home',\n            eventAction: 'click',\n            eventLabel: 'vamos'\n          }\n        }"}],ref:"primaryButton",class:[n.$style.primaryButton],attrs:{label:n.$t("teaser.hero.cta"),type:n.ButtonType.LINK,link:{type:n.LinkType.INTERNAL,target:{name:n.RouteNames.REGISTER}},active:!0,title:n.$t("teaser.hero.cta")}},[r("div",{class:["graphic-wave"]}),n._v(" "),r("div",{class:["splatter-right","graphic-splatter"]}),n._v(" "),r("div",{class:["splatter-left","graphic-splatter"]}),n._v(" "),r("div",{ref:"dasharrayCircle",class:["graphic-dasharray-circle"]})])],1)])],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.uploadPhotoPage]},[n("LogoXibalba",{ref:"logoXibalba",class:[e.$style.logoXibalba],attrs:{size:e.Size.SMALL,background:!1}}),e._v(" "),n("PrimaryLink",{ref:"backLink",class:[e.$style.backLink],attrs:{label:e.$t("uploadPhoto.back"),type:e.ButtonType.LINK,link:{type:e.LinkType.INTERNAL,target:{name:e.RouteNames.HOME}},title:e.$t("uploadPhoto.back")}}),e._v(" "),n("TextReveal",{ref:"title",class:[e.$style.title],attrs:{title:e.$store.getters.translation.uploadPhoto.title}},[n("div",{ref:"shadow",class:[e.$style.shadow]})]),e._v(" "),n("div",{ref:"parallaxConent",class:[e.$style.parallaxContent,"abs-fill"]},[n("UploadConfirmed",{ref:"uploadConfirmed",class:[e.$style.uploadConfirmed,"abs-center"],attrs:{title:e.$store.getters.translation.uploadPhoto.confirmed.title,copy:e.$t("uploadPhoto.confirmed.copy"),cta:e.$t("uploadPhoto.confirmed.cta")},on:{click:e.onFlowCompleted}}),e._v(" "),n("UploadInstruction",{ref:"uploadInstruction",class:[e.$style.uploadInstruction],attrs:{title:e.$t("uploadPhoto.instruction.title"),copy:e.$t("uploadPhoto.instruction.copy")},on:{fileUploaded:e.onImageSelected}}),e._v(" "),n("EnterPhotoInformation",{ref:"enterPhotoInformation",class:[e.$style.enterPhotoInformation],attrs:{"input-placeholder":e.$t("uploadPhoto.enterPhotoInformation.placeholder"),submit:e.$t("uploadPhoto.enterPhotoInformation.submit"),retry:e.$t("uploadPhoto.enterPhotoInformation.retry"),"offer-name":e.offerName},on:{onValueUpdate:e.onValueUpdate,submit:e.onImageAccepted,retry:e.onImageDeclined}}),e._v(" "),n("UploadForm",{ref:"uploadForm",class:[e.$style.uploadForm],attrs:{title:e.$store.getters.translation.register.title,copy:e.$t("register.copy"),submit:e.$t("register.terms"),image:e.image,"offer-name":e.offerName},on:{formCompleted:e.onFormCompleted}})],1)],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.teaserPage]},[n("div",{class:[e.$style.shades,"shades"]}),e._v(" "),n("LogoXibalba",{ref:"logoXibalba",class:[e.$style.logoXibalba],attrs:{background:!1}}),e._v(" "),n("HeroVideo",{ref:"heroVideo",class:[e.$style.heroVideo],attrs:{video:e.video},on:{playStateChange:e.handleVideoPlayStateChange}})],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.primaryLink]},[e.type===e.ButtonType.LINK?n("a",{ref:"button",class:[e.$style.button,"button"],attrs:{href:e.target,title:e.title||""},domProps:{innerHTML:e._s(e.label)},on:{click:e.handleClick}}):n("button",{ref:"button",class:[e.$style.button,"button"],attrs:{title:e.title||"",type:"submit"},domProps:{innerHTML:e._s(e.label)},on:{click:e.handleClick}})])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("h1",{class:[t.$style.logoXibalba,t.$style["is-"+t.logoSize],(e={},e[t.$style.isStatic]=!t.isSequence,e)],on:{click:function(e){return t.$router.push({name:t.RouteNames.HOME})}}},[i("span",{class:[t.$style.text]},[t._v("chingones hasta en la muerte - Xibalba")]),t._v(" "),t.isSequence?i("ImageSequence",{ref:"imageSequence",class:[t.$style.sequence,"abs-fill"],attrs:{sequence:{startCount:0,frameCount:50,source:t.$versionRoot+"image-sequence/logo-xibalba/logo_sequence_15fps_{frame}.png",padCount:5,fps:15,loop:!1,loopTimeout:0,objectFit:"contain"},"auto-load":!0},on:{isReady:t.handleImageSequenceReady}}):t._e()],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:[this.$style.webglPage]})},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t,n=this,i=n.$createElement,r=n._self._c||i;return r("div",{class:[n.$style.introOptions]},[r("TextReveal",{ref:"title",class:[n.$style.title],attrs:{title:n.title}},[r("div",{ref:"shadow",class:[n.$style.shadow]})]),n._v(" "),r("p",{ref:"copy",class:[n.$style.copy,"copy-02"],domProps:{innerHTML:n._s(n.copy)}}),n._v(" "),r("div",{ref:"buttonHolder",class:[n.$style.buttonHolder]},[r("PrimaryButton",{directives:[{name:"track",rawName:"v-track",value:(e={},e[n.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"home",eventAction:"click",eventLabel:"haz tu ofrenda"},e),expression:"{\n        [TrackingProvider.GTM]: {\n          event: 'trackEvent',\n          eventCategory: 'home',\n          eventAction: 'click',\n          eventLabel: 'haz tu ofrenda'\n        }\n      }"}],ref:"ctaLeft",class:[n.$style.button],attrs:{icon:"plus",label:n.ctaLeft,type:n.ButtonType.LINK,link:{type:n.LinkType.INTERNAL,target:{name:n.RouteNames.UPLOAD_PHOTO}},title:n.ctaLeft}}),n._v(" "),r("PrimaryButton",{directives:[{name:"track",rawName:"v-track",value:(t={},t[n.TrackingProvider.GTM]={event:"trackEvent",eventCategory:"home",eventAction:"click",eventLabel:"visita la ofrenda"},t),expression:"{\n        [TrackingProvider.GTM]: {\n          event: 'trackEvent',\n          eventCategory: 'home',\n          eventAction: 'click',\n          eventLabel: 'visita la ofrenda'\n        }\n      }"}],ref:"ctaRight",class:[n.$style.button],attrs:{icon:"eye",label:n.ctaRight,title:n.ctaRight,type:n.ButtonType.LINK,link:{type:n.LinkType.INTERNAL,target:{name:n.RouteNames.OFRENDA}}}})],1),n._v(" "),r("div",{ref:"playTrailer",class:[n.$style.playTrailer,"copy-03"],on:{click:n.openVideoOverlay}},[r("Icon",{class:[n.$style.icon],attrs:{name:"play-button"}}),n._v("\n    "+n._s(n.$t("home.playTrailer"))+"\n  ")],1)],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.ofrendaPage]},[n("PrimaryLink",{ref:"backLink",class:[e.$style.backLink],attrs:{label:e.$t("uploadPhoto.back"),type:e.ButtonType.LINK,link:{type:e.LinkType.INTERNAL,target:{name:e.RouteNames.HOME}},title:e.$t("uploadPhoto.back")}}),e._v(" "),n("h3",{ref:"name",class:[e.$style.name,"heading-03"],domProps:{innerHTML:e._s(e.name)}}),e._v(" "),n("span",{ref:"arrowDown",class:[e.$style.arrowDown]},[n("svg",{attrs:{viewBox:"0 0 14.3 16.1"}},[n("path",{staticClass:"st0",attrs:{d:"M14.3,0L7.1,7.1L0,0"}}),e._v(" "),n("path",{staticClass:"st0",attrs:{d:"M14.3,9l-7.1,7.1L0,9"}})])])],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.thankyouPage]},[n("LogoXibalba",{ref:"logoXibalba",class:[e.$style.logoXibalba],attrs:{background:!1}}),e._v(" "),n("h1",{class:[e.$style.title,"heading-03"],domProps:{innerHTML:e._s(e.$t("thankyou.title"))}}),e._v(" "),n("p",{class:[e.$style.copy,"copy-02"],domProps:{innerHTML:e._s(e.$t("thankyou.copy"))}}),e._v(" "),n("PrimaryLink",{ref:"backLink",class:[e.$style.backLink],attrs:{label:e.$t("thankyou.backLink"),type:e.ButtonType.LINK,link:{type:e.LinkType.INTERNAL,target:{name:e.RouteNames.HOME}},title:e.$t("thankyou.backCta")}}),e._v(" "),n("div",{class:[e.$style.shareBlockWrapper]},[n("ShareBlock",{ref:"shareBlock",class:[e.$style.shareBlock]})],1)],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.primarySquareButton,e.$style[e.icon]]},[e.type===e.ButtonType.LINK?n("a",{ref:"button",class:[e.$style.button,"button"],attrs:{href:e.target,title:e.title||""},on:{click:e.handleClick}},[n("Icon",{class:[e.$style.icon,e.$style["icon-"+e.icon],"abs-center"],attrs:{name:e.icon}})],1):n("button",{ref:"button",class:[e.$style.button,"button"],attrs:{title:e.title||"",type:"submit"},on:{click:e.handleClick}},[n("Icon",{class:[e.$style.icon,e.$style["icon-"+e.icon],"abs-center"],attrs:{name:e.icon}})],1)])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.headphonePulse]},[e._l(2,function(t){return n("span",{key:t,ref:"circle",refInFor:!0,class:[e.$style.circle]})}),e._v(" "),n("Icon",{class:[e.$style.icon,"abs-center"],attrs:{name:"headphones"}})],2)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{class:[e.$style.ageGatePage],attrs:{novalidate:"","td-campaign-id":"","td-campaign-name":"register"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("div",{ref:"parallaxContent",class:[e.$style.innerContent]},[n("LogoVictoria",{ref:"logoVictoria",class:[e.$style.logoVictoria]}),e._v(" "),n("div",{ref:"formContent"},[n("LogoXibalba",{ref:"logoXibalba",class:[e.$style.logoXibalba],attrs:{background:!0,"is-sequence":!1}}),e._v(" "),n("h2",{class:[e.$style.title,"heading-03"],domProps:{innerHTML:e._s(e.$t("agegate.title"))}}),e._v(" "),n("p",{class:[e.$style.copy,"copy-02"],domProps:{innerHTML:e._s(e.$t("agegate.copy"))}}),e._v(" "),n("DobInputField",{ref:"dobInputField",class:[e.$style.dobInputField],attrs:{year:e.year,month:e.month,day:e.day},on:{input:e.onValueUpdate}}),e._v(" "),n("div",{class:[e.$style.checkboxHolder]},[n("PrimaryCheckbox",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[e.$style.checkbox,e.$style.rememberCheckbox],attrs:{name:"remember",value:e.rememberMe,label:e.$t("agegate.remember"),"data-vv-name":"remember"},on:{input:e.onValueUpdate}})],1),e._v(" "),n("p",{class:[e.$style.disclaimer,"copy-03"],domProps:{innerHTML:e._s(e.$t("agegate.disclaimer"))}}),e._v(" "),n("div",{class:[e.$style.buttonHolder,"graphic-button-holder"]},[n("PrimaryButton",{ref:"submitButton",class:[e.$style.submitButton],attrs:{label:e.$t("agegate.submit"),type:e.ButtonType.SUBMIT,active:e.isValidDate,title:e.$t("agegate.submit")}},[n("div",{class:["graphic-wave"]}),e._v(" "),n("div",{class:["splatter-right","graphic-splatter"]}),e._v(" "),n("div",{class:["splatter-left","graphic-splatter"]}),e._v(" "),n("div",{class:["leaf-left","graphic-leaf"]}),e._v(" "),n("div",{class:["leaf-right","graphic-leaf"]})])],1)],1)],1)])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this.$createElement,t=this._self._c||e;return t("button",{ref:"button",class:[this.$style.closeButton,"button"],attrs:{title:this.title||"",type:"button"},on:{click:this.handleClick}},[t("span",{class:this.$style.icon})])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"container",class:this.$style.imageSequence},[t("canvas",{staticClass:"abs-fill"})])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{class:[e.$style.icon],domProps:{innerHTML:e._s(e.icon)},on:{click:function(t){return e.$emit("click")}}})},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.dasharrayCircleButton,e.$style[e.icon]]},[e.type===e.ButtonType.LINK?n("a",{ref:"button",class:[e.$style.button,"button"],attrs:{href:e.target,title:e.title||""},on:{click:e.handleClick}},[n("Icon",{class:[e.$style.icon,e.$style["icon-"+e.icon],"abs-center"],attrs:{name:e.icon}})],1):n("button",{ref:"button",class:[e.$style.button,"button"],attrs:{title:e.title||"",type:"button"},on:{click:e.handleClick}},[n("Icon",{class:[e.$style.icon,e.$style["icon-"+e.icon],"abs-center"],attrs:{name:e.icon}})],1)])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{class:[t.$style.app,(e={},e[t.$style.menuIsOpen]=t.menuIsOpen,e)]},[t.showPreloader?i("Preloader",{attrs:{progress:t.appLoadProgress},on:{isReady:t.handlePreloaderReady,continue:t.continueToSite}}):t._e(),t._v(" "),i("LogoVictoria",{ref:"logoVictoria",class:[t.$style.logoVictoria],attrs:{"is-blurred":!0,"is-hidden":t.hideVictoriaLogo}}),t._v(" "),i("div",{class:[t.$style.scrollWrapper]},[i("div",{class:[t.$style.scrollContainer]},[i("transition",{on:{leave:t.onLeave}},[t.applicationLoaded?i("router-view",{ref:"page",class:[t.$style.page]}):t._e()],1),t._v(" "),i("SiteFooter",{ref:"siteFooter"})],1)]),t._v(" "),i("Notification"),t._v(" "),i("div",{ref:"background",class:[t.$style.background]}),t._v(" "),i("HamburgerButton",{ref:"hamburgerButton",class:[t.$style.hamburgerButton],attrs:{"is-disabled":t.disableMenuButton}}),t._v(" "),i("ShareList",{ref:"shareList",class:[t.$style.shareList]}),t._v(" "),i("div",{ref:"playTrailer",class:[t.$style.playTrailer,"copy-03"],on:{mouseenter:function(e){return t.peakVideoOverlay(!0)},mouseleave:function(e){return t.peakVideoOverlay(!1)},click:t.openVideoOverlay}},[i("Icon",{class:[t.$style.icon],attrs:{name:"play-button"}}),t._v("\n    "+t._s(t.$t("home.playTrailer"))+"\n  ")],1),t._v(" "),i("MuteButton",{class:[t.$style.muteButton],attrs:{"is-muted":t.muted},on:{click:function(e){return t.$store.commit(t.TOGGLE_SOUND)}}}),t._v(" "),t.applicationLoaded?i("VideoOverlay",{ref:"videoOverlay",class:[t.$style.videoOverlay],attrs:{video:{src:t.$versionRoot+"video/teaser/"+(t.deviceState<t.DeviceState.LARGE?"hero-portrait":"hero")+".mp4"},"is-portrait":t.deviceState<t.DeviceState.LARGE},on:{isReady:t.handleVideoOverlayReady,isOpened:t.onVideoOpened,isClosed:t.onVideoClosed}}):t._e(),t._v(" "),i("InfiniteLoader",{attrs:{"is-active":t.showInfiniteLoader},on:{isReady:t.handleInfiniteLoaderIsReady}}),t._v(" "),i("OrientationMessage")],1)},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";var i=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{class:[t.$style.primaryInputField,(e={},e[t.$style.isInvalid]=t.isInvalid,e)]},["checkbox"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.internalValue,expression:"internalValue"},{name:"filter-input",rawName:"v-filter-input"}],ref:"input",class:[t.$style.input,"input-field"],attrs:{id:t.name,"td-type":t.tdType,title:t.name,name:t.name,maxlength:t.maxlength,autocomplete:"off",placeholder:t.placeholder,type:"checkbox"},domProps:{value:t.internalValue,checked:Array.isArray(t.internalValue)?t._i(t.internalValue,t.internalValue)>-1:t.internalValue},on:{change:function(e){var n=t.internalValue,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=t.internalValue,o=t._i(n,a);i.checked?o<0&&(t.internalValue=n.concat([a])):o>-1&&(t.internalValue=n.slice(0,o).concat(n.slice(o+1)))}else t.internalValue=r}}}):"radio"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.internalValue,expression:"internalValue"},{name:"filter-input",rawName:"v-filter-input"}],ref:"input",class:[t.$style.input,"input-field"],attrs:{id:t.name,"td-type":t.tdType,title:t.name,name:t.name,maxlength:t.maxlength,autocomplete:"off",placeholder:t.placeholder,type:"radio"},domProps:{value:t.internalValue,checked:t._q(t.internalValue,t.internalValue)},on:{change:function(e){t.internalValue=t.internalValue}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.internalValue,expression:"internalValue"},{name:"filter-input",rawName:"v-filter-input"}],ref:"input",class:[t.$style.input,"input-field"],attrs:{id:t.name,"td-type":t.tdType,title:t.name,name:t.name,maxlength:t.maxlength,autocomplete:"off",placeholder:t.placeholder,type:t.type},domProps:{value:t.internalValue,value:t.internalValue},on:{input:function(e){e.target.composing||(t.internalValue=e.target.value)}}})])},r=[];i._withStripped=!0,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"version/1571836555246/image/candle_flame.6b00c36.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_a_albedo.d752338.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_a_albedo_transparency.c7b7808.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_b_albedo.c5cd7d2.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_b_albedo_transparency.2125a30.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_c_albedo.429d811.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_c_albedo_transparency.8879471.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/perlin_doNotCompress.29074b0.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/petals.457526e.png"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/portrait_default.ce49298.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAKElEQVQI12P8XyXGwMDAwMvIIMjIwMvIwCfHIKLDIGbExAAB/xnQAAB4hQN083vZzgAAAABJRU5ErkJggg=="},,,,,,,,,,function(e,t,n){"use strict";(function(e){var i=n(349),r=n(213),a=n(273),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/Icon/Icon.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(332),r=n(193),a=n(279),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/page/HomePage/HomePage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(348),r=n(176),a=n(274),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/ImageSequence/ImageSequence.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(341),r=n(186),a=n(278),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/content/landing/IntroOptions/IntroOptions.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(346),r=n(184),a=n(283),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/page/AgeGatePage/AgeGatePage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(323),r=n(180),a=n(280),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/form/DobInputField/DobInputField.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(343),r=n(183),a=n(287),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/page/ThankyouPage/ThankyouPage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(324),r=n(201),a=n(285),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/ShareBlock/ShareBlock.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(350),r=n(194),a=n(284),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/DasharrayCircleButton/DasharrayCircleButton.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(340),r=n(189),a=n(288),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/page/WebglPage/WebglPage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(336),r=n(191),a=n(294),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/page/UploadPhotoPage/UploadPhotoPage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(319),r=n(178),a=n(289),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/content/upload-photo/UploadInstruction/UploadInstruction.vue",t.a=u.exports}).call(this,n(18)(e))},,function(e,t,n){"use strict";(function(e){var i=n(326),r=n(199),a=n(290),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/content/upload-photo/UploadConfirmed/UploadConfirmed.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(328),r=n(197),a=n(292),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/content/upload-photo/EnterPhotoInformation/EnterPhotoInformation.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(314),r=n(209),a=n(293),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/content/upload-photo/UploadForm/UploadForm.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(337),r=n(188),a=n(297),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/page/TeaserPage/TeaserPage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(335),r=n(179),a=n(296),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/content/HeroVideo/HeroVideo.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(342),r=n(185),a=n(299),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/page/OfrendaPage/OfrendaPage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nattribute vec3 aPos;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\n\nvoid main(void) {\n\tvUV = aUV0;\n\tgl_Position = vec4(aPos, 1.0);\n}"},function(e,t){e.exports="uniform float _VignetteBoost;\nuniform float _VignetteReduction;\n\nvec3 vignette(vec2 uv, vec3 color) {\n\treturn max(0., _VignetteBoost - dot(uv -= .5, uv) * _VignetteReduction) * color;\n}\n"},function(e,t){e.exports="uniform float _SmokeEdgeStrength;\nuniform highp float _SmokeEdgeTime;\nuniform highp float _SmokeEdgeXOffset;\nuniform sampler2D _SmokeEdgeTex;\n\nvec3 smokeedge(vec2 uv, vec3 color) {\n\tvec2 q = uv;\n\tfloat alpha = 1.0 - pow(16.0*q.x*q.y*(1.0-q.x)*(1.0-q.y),0.2);\n\n\tvec2 p = uv - .5;\n\tp.x += _SmokeEdgeXOffset;\n\n\tfloat a = atan(p.y,p.x)  * (1./3.1415927);\n\tfloat r = length(p);\n\tuv = vec2( 0.3/r + 0.01*_SmokeEdgeTime + a, a ) * vec2(1., 2.);\n\tuv += .5 * texture2D(_SmokeEdgeTex, uv + .01 * uTime).rg;\n\tuv += .5 * texture2D(_SmokeEdgeTex, uv - .02 * uTime).ga;\n\tfloat n = max(0., texture2D(_SmokeEdgeTex, uv).r - .2);\n\n\tcolor += min(n * n * pow(alpha, 1.5) * .8, .5) * _SmokeEdgeStrength;\n\n\treturn color;\n}\n"},function(e,t){e.exports="uniform float _AddTextureOffset;\nuniform float _AddTextureScale;\nuniform float _AddTextureStrength;\n\nuniform sampler2D _AddTextureTex;\nuniform vec2 _AddTextureTexSize;\n\nvec3 addtexture(vec2 uv, vec3 color) {\n\tuv = gl_FragCoord.xy * (_AddTextureScale / _AddTextureTexSize);\n\tcolor += texture2D(_AddTextureTex, uv).rgb * _AddTextureStrength + _AddTextureOffset;\n\n\treturn max(vec3(0), color);\n}"},,function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\nuniform sampler2D uTexture;\n\nuniform vec2 _BloomSourceTexelSize;\nuniform float _BloomThreshold;\n\nvec3 prefilter (vec3 c) {\n\tfloat brightness = max(c.r, max(c.g, c.b));\n\tfloat contribution = max(0., brightness - _BloomThreshold);\n\tcontribution /= max(brightness, 0.00001);\n\treturn c * contribution;\n}\n\nvec3 ts(vec2 uv) {\n\tvec3 c = texture2D(uTexture, uv).xyz;\n\tif(_BloomThreshold < 5.) {\n\t\tc = prefilter(c);\n\t}\n\treturn c;\n}\n\nvoid main(void) {\n\tvec4 o = _BloomSourceTexelSize.xyxy * vec2(-1, 1).xxyy;\n\tvec3 s = ts(vUV + o.xy) + ts(vUV + o.zy) + ts(vUV + o.xw) + ts(vUV + o.zw) ;\n\tgl_FragColor = vec4(s * 0.25, 1);\n}"},function(e,t){e.exports="uniform sampler2D _BloomSource;\nuniform vec2 _BloomSourceTexelSize;\nuniform float _BloomStrength;\nuniform float _BloomPow;\n\nvec3 bloomts(vec2 uv) {\n\treturn texture2D(_BloomSource, uv).xyz;\n}\n\nvec3 bloom(vec2 uv, vec3 color) {\n\tcolor = texture2D(uTexture, vUV).xyz;\n\tvec4 o = _BloomSourceTexelSize.xyxy * vec2(-1, 1).xxyy;\n\t//upscale filter\n\tvec3 s = bloomts(vUV + o.xy) + bloomts(vUV + o.zy) + bloomts(vUV + o.xw) + bloomts(vUV + o.zw);\n\tvec3 bloom = s * 0.25;\n\n\tbloom = pow(bloom, vec3(_BloomPow));\n\n\treturn color + bloom * _BloomStrength;\n}"},function(e,t){e.exports="uniform float _FxaaStrength;\n\nfloat fxaagetlumi(vec3 col){\n    return dot(col,vec3(0.299, 0.587, 0.114));\n}\nvec3 fxaasample(sampler2D _Tex,vec2 uv){\n    vec3 e = vec3(1./uResolution.xy,0.);\n\n    float reducemul = 0.125;// 1. / 8.;\n    float reducemin = 0.0078125;// 1. / 128.;\n\n    vec3 Or = texture2D(_Tex,uv).rgb;\n    vec3 LD = texture2D(_Tex,uv - e.xy).rgb;\n    vec3 RD = texture2D(_Tex,uv + vec2( e.x,-e.y)).rgb;\n    vec3 LT = texture2D(_Tex,uv + vec2(-e.x, e.y)).rgb;\n    vec3 RT = texture2D(_Tex,uv + e.xy).rgb;\n\n    float Or_Lum = fxaagetlumi(Or.rgb);\n    float LD_Lum = fxaagetlumi(LD.rgb);\n    float RD_Lum = fxaagetlumi(RD.rgb);\n    float LT_Lum = fxaagetlumi(LT.rgb);\n    float RT_Lum = fxaagetlumi(RT.rgb);\n\n    float min_Lum = min(Or_Lum,min(min(LD_Lum,RD_Lum),min(LT_Lum,RT_Lum)));\n    float max_Lum = max(Or_Lum,max(max(LD_Lum,RD_Lum),max(LT_Lum,RT_Lum)));\n\n    //x direction,-y direction\n    vec2 dir = vec2((LT_Lum+RT_Lum)-(LD_Lum+RD_Lum),(LD_Lum+LT_Lum)-(RD_Lum+RT_Lum));\n    float dir_reduce = max((LD_Lum+RD_Lum+LT_Lum+RT_Lum)*reducemul*0.25,reducemin);\n    float dir_min = 1./(min(abs(dir.x),abs(dir.y))+dir_reduce);\n    dir = min(vec2(_FxaaStrength),max(-vec2(_FxaaStrength),dir*dir_min)) * e.xy;\n\n    //------\n    vec3 resultA = 0.5*(texture2D(_Tex,uv-0.166667*dir).rgb+texture2D(_Tex,uv+0.166667*dir).rgb);\n    vec3 resultB = resultA*0.5+0.25*(texture2D(_Tex,uv-0.5*dir).rgb+texture2D(_Tex,uv+0.5*dir).rgb);\n    float B_Lum = fxaagetlumi(resultB.rgb);\n\n    //return resultA;\n    if(B_Lum < min_Lum || B_Lum > max_Lum) {\n        return resultA;\n    } else {\n        return resultB;\n    }\n}\n\n\nvec3 fxaa(vec2 uv, vec3 color) {\n\treturn fxaasample( uTexture, uv );\n}"},,,,,function(e,t,n){"use strict";(function(e){var i=n(351),r=n(175),a=n(313),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/App/App.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(315),r=n(196),a=n(303),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/layout/SiteFooter/SiteFooter.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(344),r=n(182),a=n(301),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/PrimarySquareButton/PrimarySquareButton.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(317),r=n(208),a=n(304),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/Notification/Notification.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(320),r=n(206),a=n(305),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/HamburgerButton/HamburgerButton.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(327),r=n(198),a=n(307),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/Preloader/Preloader.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(345),r=n(181),a=n(306),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/HeadphonePulse/HeadphonePulse.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(329),r=n(177),a=n(309),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/VideoOverlay/VideoOverlay.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(347),r=n(205),a=n(308),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/CloseButton/CloseButton.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(330),r=n(212),a=n(310),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/button/MuteButton/MuteButton.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(321),r=n(204),a=n(311),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/layout/OrientationMessage/OrientationMessage.vue",t.a=u.exports}).call(this,n(18)(e))},function(e,t,n){"use strict";(function(e){var i=n(322),r=n(200),a=n(312),o=n(12),s={},l=!1;e.hot,e.hot;var u=Object(o.a)(r.a,i.a,i.b,!1,function(e){l||(s.$style=a.default.locals||a.default,Object.defineProperty(this,"$style",{configurable:!0,get:function(){return s.$style}}))},null,null);u.options.__file="src/component/general/InfiniteLoader/InfiniteLoader.vue",t.a=u.exports}).call(this,n(18)(e))},,,,,function(e,t,n){n(510),e.exports=n(819)},function(e,t,n){"use strict";n.r(t);n(511),n(513),n(514),n(517),n(518),n(357),n(231),n(521),n(522),n(524),n(525),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(558),n(560),n(365),n(366),n(367),n(561),n(562),n(369),n(563),n(564),n(372),n(373),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(375),n(573),n(379),n(576),n(577),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(380),n(591),n(593),n(594),n(595),n(596),n(597),n(598),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(613),n(614),n(383),n(386),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(626),n(627),n(628),n(629),n(630),n(631),n(632),n(633),n(634),n(635),n(636),n(637),n(390),n(638);t.default={}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){!function(t){var n="Modernizr"in t,i=t.Modernizr;!function(e,t,n){function i(e,t){return typeof e===t}function r(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):h?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(){var e=t.body;return e||((e=r(h?"svg":"body")).fake=!0),e}var o=[],s={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){o.push({name:e,fn:t,options:n})},addAsyncTest:function(e){o.push({name:null,fn:e})}},l=function(){};l.prototype=s,l=new l;var u=[],c=t.documentElement,h="svg"===c.nodeName.toLowerCase(),d=s._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];s._prefixes=d;var f=s.testStyles=function(e,n,i,o){var s,l,u,h,d="modernizr",f=r("div"),p=a();if(parseInt(i,10))for(;i--;)(u=r("div")).id=o?o[i]:d+(i+1),f.appendChild(u);return(s=r("style")).type="text/css",s.id="s"+d,(p.fake?p:f).appendChild(s),p.appendChild(f),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(t.createTextNode(e)),f.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",h=c.style.overflow,c.style.overflow="hidden",c.appendChild(p)),l=n(f,e),p.fake?(p.parentNode.removeChild(p),c.style.overflow=h,c.offsetHeight):f.parentNode.removeChild(f),!!l};l.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var i=["@media (",d.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");f(i,function(e){n=9===e.offsetTop})}return n}),function(){var e,t,n,r,a,s;for(var c in o)if(o.hasOwnProperty(c)){if(e=[],(t=o[c]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=i(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)1===(s=e[a].split(".")).length?l[s[0]]=r:(!l[s[0]]||l[s[0]]instanceof Boolean||(l[s[0]]=new Boolean(l[s[0]])),l[s[0]][s[1]]=r),u.push((r?"":"no-")+s.join("-"))}}(),function(e){var t=c.className,n=l._config.classPrefix||"";if(h&&(t=t.baseVal),l._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}l._config.enableClasses&&(t+=" "+n+e.join(" "+n),h?c.className.baseVal=t:c.className=t)}(u),delete s.addTest,delete s.addAsyncTest;for(var p=0;p<l._q.length;p++)l._q[p]();e.Modernizr=l}(t,document),e.exports=t.Modernizr,n?t.Modernizr=i:delete t.Modernizr}(window)},function(e,t,n){},,,,,function(e,t,n){var i={"./checkmark.svg":648,"./eye.svg":649,"./facebook.svg":650,"./headphones.svg":651,"./logo-victoria.svg":652,"./play-button.svg":653,"./plus.svg":654,"./rotate.svg":655,"./twitter.svg":656,"./upload.svg":657};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=647},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 16"><path class="cls-1" d="M0 8.933s4.475 7.517 4.687 7.052S15 0 15 0L4.819 11.058z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 10"><path d="M8.5 0C4.9 0 1.7 2 0 5c1.7 3 4.9 5 8.5 5 3.6 0 6.8-2 8.5-5-1.7-3-4.9-5-8.5-5z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 36"><path class="cls-1" d="M17.022 19.6l.8-6.419h-6.126v-4.09c0-1.853.494-3.116 3.048-3.116H18V.252A42.122 42.122 0 0 0 13.241 0C8.532 0 5.308 2.983 5.308 8.46v4.721H0V19.6h5.308V36h6.386V19.6h5.328z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 50 47.6" xml:space="preserve"><path class="st0" d="M50 39.9h-4V29.2C46 7 35.4 4 25 4S4 7 4 29.2v10.7H0V29.2C0 9.3 7.9 0 25 0s25 9.3 25 29.2v10.7z"></path><path class="st0" d="M7.3 25.9h2.1c2.9 0 5.2 2.4 5.2 5.4v10.8c0 3-2.3 5.4-5.2 5.4H7.3V25.9zM42.7 25.9h-2.1c-2.9 0-5.2 2.4-5.2 5.4v10.8c0 3 2.3 5.4 5.2 5.4h2.1V25.9z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97 62"><path data-name="Shape 1 copy 2" d="M25.988 59.79c.109-.11.214-.22.312-.32v-.01a4.959 4.959 0 0 0 1.314-2.15c-1.522 1.39-2.4 1.88-3.479 1.85a2.946 2.946 0 0 1-.9-.16c.011.03.022.05.033.08-1.421-.44-1.544-1.99-.02-3.63.014-.02.028-.03.043-.05.063-.07.133-.13.2-.2a8.147 8.147 0 0 1 .679-.61 65.342 65.342 0 0 1 10.785-6.3c2.174-1.01 4.663-2.04 7-3.01 10.059-4.2 21.643-7.54 31.86-11.4 2.392-.9 5.1-1.87 7.354-2.92 4.175-1.95 7.784-4.17 9.934-6.41.14-.15.28-.3.4-.44a9.883 9.883 0 0 0 2.05-3.33 2.429 2.429 0 0 0-.26-2.18 1.037 1.037 0 0 1 .1.04c-.62-1.01-2.01-1.32-3.23-.14s-1.98 3.13-3.067 4.56a4.022 4.022 0 0 1-.562.65.985.985 0 0 1-.1.09c-.017.01-.035.03-.051.04-.882.7-1.035-.59.214-2.92l3.935-8.1h.02l.46-.94-3.943.91c-.1.02-.423.71-.732 1.06-.416.84-.092-.11-.745-.34-1.324-.55-3.555-.39-5.63 1.44a31.534 31.534 0 0 0-4.864 6.55c-.344.6-3.388 6.26-5.17 7.13 0 .01 0 .02-.007.03a.667.667 0 0 1-.953-.14c-.7-1.01 3.455-8.17 5.016-10.79h.02l.36-.6h-.019l.215-.35-1.338.33a.108.108 0 0 1-.052-.02l-2.4.6-3.182 5.91-2.371 3.36a22.749 22.749 0 0 1-2.926 3.38 4.766 4.766 0 0 1-.577.5.047.047 0 0 1 0 .01c-1.254.93-1.421-.34-.587-1.9l4.882-8.28a3.353 3.353 0 0 0 .357-.88h.034c.115-.51-.043-.92-1.058-.59-.889.3-2.806 1.15-3.735 1.42a.013.013 0 0 1-.014.01v.03a.035.035 0 0 0-.028.01.792.792 0 0 1-.968-.92 3.553 3.553 0 0 0-.094-1.37h.058c-.577-1.94-3.431.6-3.34 2.67a1.941 1.941 0 0 0 1.244 1.44c.076.17-1.233 3.01-2.065 3.21-.38.1-.206-.86-.206-1 0-1.08-1.445-3.69-5.4-.85l-.453.33c-.832.25-3.1 3.19-4.846 6.27-.808 1.5-2.921 5.19-5.337 7.05l-.1.06a.041.041 0 0 1-.011.02c-1 .59-1.61.32-.864-1.23l4.29-9.02a2.4 2.4 0 0 1 .545-.76 5.386 5.386 0 0 1 2.059-.88c.033-.05.1-.17.19-.32h.02c.2-.34.476-.83.5-.92-.157.04-.364.08-.586.13l-.017.03c-.327.07-.693.13-1.036.21s-.361-.35-.051-.94l2.527-5.57.027-.01.429-.94-3.835.93-3.467 7.05c-.295.64-1.644.86-2.591 1.1 0 0-.458 1.13-.531 1.25 1.01-.25 2-.63 1.728-.01-1.857 4.18-6.337 10.83-9.936 13.46a2.116 2.116 0 0 1-1.332.48v.05a.973.973 0 0 1-.943-1.38 34.6 34.6 0 0 1 4.813-9.77c.039-.04.081-.08.124-.12.641-.63 1.7-1.01 2 0a.244.244 0 0 0-.074-.04c.01.03.021.05.03.08-.362-.29-1.012.01-1.6.57-.035.04-.071.07-.106.11l-.057.06c-.788.86-1.372 2.15-.792 3.01.455.62 1.408.74 2.311-.12l.085-.09c.016-.02.032-.03.048-.05a5.01 5.01 0 0 0 .737-1.13 4.066 4.066 0 0 0 .3-2.47 2.057 2.057 0 0 0-.332-.79c.034.02.065.03.1.05a1.935 1.935 0 0 0-2.3-.77c-4.76 1.28-7.393 7.17-9.705 11.04a27.264 27.264 0 0 1-2.057 3.17 3.789 3.789 0 0 1-.833.72.152.152 0 0 1-.006.02c-1.025.64-1.3-.45-.8-1.49l4.5-9.32h.025l.347-.72a.026.026 0 0 0-.024.01l.092-.2-.774.19a.2.2 0 0 1-.074-.02l-3.079.74L15.683 42c-1.306 2.56.749 6.04 3.676 3.71.079-.04.217-.2.278-.24.122-.09.252-.2.384-.32a11.157 11.157 0 0 0 .991-1.15.231.231 0 0 0 .048-.05 51.628 51.628 0 0 0 3.2-5.05 7.689 7.689 0 0 0-.374 2.2c.175 1.98 1.769 2.96 3.913 2.17a13.44 13.44 0 0 0 4.425-3.03 24.233 24.233 0 0 0 3.837-5.14s-.044.08-.1.21l.147-.26a4.505 4.505 0 0 0-.5 2.07c-.017 2.78 2 3.41 3.618 2.61a8.772 8.772 0 0 0 2.539-1.86 16.892 16.892 0 0 0 2.608-3.58.032.032 0 0 1 .029-.01.075.075 0 0 1 .014-.03c.078-.1.284-.02.263.21-.136 1.81 2.332 4.01 5.358 1.82a9.637 9.637 0 0 0 .923-.78c2.8-2.74 4.158-7.33 4.158-7.26h.028a.2.2 0 0 1 .015-.04 3.093 3.093 0 0 0 1.493-.86c1.358-1.34 2.312-3.66 2.649-4.03.008-.01.014-.01.022-.02a.077.077 0 0 0 .022-.03c3.569-2.09 3.77-1.63 2.612-.34-1.443 1.61-2.775 3.38-4.161 5.16-2.905 3.71-2.026 6.74 1.109 5.76a9.816 9.816 0 0 0 3.957-2.55 41.009 41.009 0 0 0 3.037-3.58.034.034 0 0 0 0 .01c.014-.01.031-.04.044-.05a2.941 2.941 0 0 0 .748 2.93c1.1.92 2.627.34 3.968-1.03a10.111 10.111 0 0 0 .889-1.08c.021-.03.045-.05.068-.08l1.63-2.18c.029-.04.058-.09.088-.13l.081-.11a1.152 1.152 0 0 1 .182-.24c.136-.16.322-.2.485.61a2.7 2.7 0 0 0 1.831 2.29c.767.28 2.219-.13 3.5-1.36a6.917 6.917 0 0 0 .508-.56 27.342 27.342 0 0 0 2.408-3.29.172.172 0 0 1 .081-.13c.061-.11.066-.03.066.43 0 2.66 2.852 3.06 4.759 1.02.693-.76 2.2-3.21 3.36-4.78a2.7 2.7 0 0 1 .29-.35.138.138 0 0 1 .03-.04c.05-.04.09-.09.13-.12.97-.89 1.73.5 1.21 1.41a15.877 15.877 0 0 1-3.55 4.25.035.035 0 0 0-.01.02c-.1.07-.2.15-.29.22-.05.03-.09.07-.14.1a8 8 0 0 1-.812.56c-.71.43-1.414.82-2.122 1.2h-.047c-4.89 2.57-9.978 4.01-18.5 6.55-7.168 2.13-14.369 4.04-20.436 5.91A165.68 165.68 0 0 0 27.975 46c-5.712 2.51-10.507 4.98-11.819 8.44-1.2 3.15-.553 5.05.572 6.14a5.1 5.1 0 0 0 2.9 1.4 8.238 8.238 0 0 0 6.026-1.87.287.287 0 0 1 .066-.05c.1-.09.2-.18.292-.27m27.91-32.21c.674.41-2.454 6.92-4.694 7.97a1.17 1.17 0 0 1-.382.11v.04c-.941.17-1.522-.94-.405-3.32a50.037 50.037 0 0 1 3.757-6.97 6.594 6.594 0 0 1 .722-.83c1.032-1 1.86-1.04 1.1-.15-.9 1.06-.866 2.68-.1 3.15m26.111-2.68a3.514 3.514 0 0 1-1.243.92v.03c-.994.39-1.394-.58-.555-2.29a63.053 63.053 0 0 1 3.837-6.53 7.713 7.713 0 0 1 .683-.86l.054-.06c.072-.07.144-.15.216-.22 1.409-1.36 2.655-1.14 2 .52a28.768 28.768 0 0 1-4.992 8.49M25.62 28.4a1.016 1.016 0 0 0-.093-.2.232.232 0 0 1 .076.03c-.328-.78-1.433-1.04-2.558-.57-1.193.52-1.939 1.65-1.675 2.53.248.89 1.427 1.2 2.618.7a3.149 3.149 0 0 0 1.088-.76 1.868 1.868 0 0 0 .544-1.73m-14.3 11.17a35.067 35.067 0 0 1 2.356-3.56 93.81 93.81 0 0 1 9.884-11.24c4.665-4.49 9.407-6.4 14.1-8.45a111.646 111.646 0 0 1 11.174-3.65c4.683-1.44 8.745-2.25 11.571-3.1 3.8-1.15 6.666-2.76 8.11-4.74.059-.08.12-.16.173-.24a1.026 1.026 0 0 1 .065-.1 5.029 5.029 0 0 0 .748-2.27c.023-.08.036-.18.055-.26A5.422 5.422 0 0 0 69.232 0c-.139 6.69-11.013 8.67-23.619 9.95-9.438.96-16.715 3.75-22.959 10.84C14.689 29.87 8.532 40.09 5.99 45.8a7.683 7.683 0 0 1-.425.83.138.138 0 0 0-.026.04c-.015.02-.031.05-.045.07-.254.4-.435.51-.547.44-.331-.11-.461-1.81-.4-2.82a44 44 0 0 1 5.756-17.51c.015-.02.028-.05.042-.07a9.37 9.37 0 0 0 2.8-.57 6.308 6.308 0 0 0 3.09-2.11 1.5 1.5 0 0 0 .231-1.39c.031.01.056.03.086.04-.327-1.07-2.3-1.38-5.27.64a10.779 10.779 0 0 1-1.1.77c-.251.06-1.254.07-1.519.1-2.32.26-5.462 1.08-6.42 4.69 1.585-1.99 5.626-2.08 6.461-2.17-.014.02-.028.05-.044.07-.26.42-.517.85-.771 1.28-3.341 5.6-6.142 11.4-7.367 16.02-.692 2.72-.986 6.26 1.838 8.34a5.855 5.855 0 0 0 1.392.76.777.777 0 0 0 1.065-.46 18.463 18.463 0 0 0 .773-1.69 123.153 123.153 0 0 1 5.739-11.53m.633-15.28a.109.109 0 0 0 .011-.01h-.011c1.812-1.74 3.191-1.53 3.394-1.19a.252.252 0 0 1 .04.13 1.364 1.364 0 0 1-1.03.71 5.667 5.667 0 0 1-2.4.36m63.923-10.97a1.013 1.013 0 0 0-.092-.2.232.232 0 0 1 .076.03c-.329-.78-1.433-1.04-2.558-.57-1.193.52-1.94 1.65-1.675 2.53.247.89 1.426 1.2 2.618.7a3.141 3.141 0 0 0 1.086-.76 1.866 1.866 0 0 0 .545-1.73m18.54 13.52v-.9h.5a.407.407 0 0 1 .29.07.426.426 0 0 1 .09.3v.21a1.355 1.355 0 0 0 .02.2 1.038 1.038 0 0 1 .03.12h.54v-.06a.176.176 0 0 1-.09-.13 1.041 1.041 0 0 1-.01-.21v-.16a.7.7 0 0 0-.07-.36.435.435 0 0 0-.23-.18.454.454 0 0 0 .28-.22.727.727 0 0 0 .04-.57.761.761 0 0 0-.12-.19.634.634 0 0 0-.23-.16.887.887 0 0 0-.37-.06h-1.15v2.3h.48zm0-1.28v-.62h.57a.474.474 0 0 1 .23.04.275.275 0 0 1 .14.28.26.26 0 0 1-.14.26.567.567 0 0 1-.25.04h-.55zm-1.85.11a2.23 2.23 0 1 0 2.23-2.19 2.217 2.217 0 0 0-2.23 2.19m4.07 0a1.835 1.835 0 1 1-1.84-1.8 1.829 1.829 0 0 1 1.84 1.8" fill="#fff" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20"><image data-name="Rectangle 743" width="20" height="20" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAQAAAAngNWGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfjCgkLBQbz/So2AAABvUlEQVQoz3WSz0tUURTHP+++cealMlRM469xBkZyJTSL6UFCQYNlLqJNgSC0EYJKW7VQoZVE/0G0iFoaIkQE0aKFCDFECytbiNWAP1GRVxBB6ei3hW+uk0znru653/s93/M9xxE2Ivj4ZEhwkYBZnjBNufLoWKDPIHGipGmhFQf4xiseMl9hATAMcIUdyswwTQnIconrJEjxnU1UYbzGZTxe8IzdAyW4FPDYYJ0lQOiqlvRJ50WNk9JZtatRoIgWJQ3VhCF0Um3KyKC8An2WG6Yzih4CGt3QfXUb0gQ8ttpyDOKHLe7HHqukyBu6WOB1lZdN9PGAcxibe88yJUOOdUpVnUbZ5Bh3maIQ5rZ4yrzhB7/Ys8DfQJw66nEtZ4wTNERYw6OZFavoOE1sc4939nuWESYNKxyh0zJ2kOc5tylWVemhgyQ6rQn1ywnNyOnoIXtczamsXuRqXD1K/tfwW9rSsmIIdapRzWqvCbugtxrTGbF/9XRHj9RnBVRmMqSihtUtFM5gm58kKRAQY5VF6mjDZ5Q048xR/HdxT/GHHTxukiUAIrTwhgm+Vi8uwEccEogZssQJ+MBLvhyY9Bddk/OqK0BXNgAAAABJRU5ErkJggg=="></image></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 5H7V0H5v5H0v2h5v5h2V7h5z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 89.3 55.6" xml:space="preserve"><path class="st0" d="M56.2 7.7v42.9c0 2.8 2.3 5 5.2 5h22.7c2.9 0 5.2-2.2 5.2-5V7.7c0-2.8-2.3-5-5.2-5H61.4c-2.9 0-5.2 2.3-5.2 5zM61.7 9h22v40.4h-22V9zM45.2 25.6H4.7c-2.6 0-4.7 2.1-4.7 4.7v20.6c0 2.6 2.1 4.7 4.7 4.7h40.6c2.6 0 4.7-2.1 4.7-4.7V30.3c-.1-2.6-2.2-4.7-4.8-4.7zm-1.1 5v20H5.8v-20h38.3zM53.4 5.3L46.6 0l.4 3.6c-10.2 2.5-17.3 10.6-17.3 20h5c0-6.8 5.2-12.9 12.9-14.9l.4 3.5 5.4-6.9z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 28"><path class="cls-1" d="M11.32 28c13.59 0 21.02-10.773 21.02-20.115q0-.459-.03-.913A14.609 14.609 0 0 0 36 3.311a15.245 15.245 0 0 1-4.24 1.113A7.215 7.215 0 0 0 35.01.513a15.248 15.248 0 0 1-4.69 1.716 7.55 7.55 0 0 0-5.4-2.233 7.234 7.234 0 0 0-7.38 7.069 6.592 6.592 0 0 0 .19 1.611A21.274 21.274 0 0 1 2.51 1.29a6.772 6.772 0 0 0-1 3.554 6.992 6.992 0 0 0 3.28 5.885 7.552 7.552 0 0 1-3.34-.885v.09a7.153 7.153 0 0 0 5.92 6.931 7.652 7.652 0 0 1-3.33.121 7.355 7.355 0 0 0 6.9 4.911 15.273 15.273 0 0 1-9.18 3.026 15.836 15.836 0 0 1-1.76-.1A21.6 21.6 0 0 0 11.32 28"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 30 24"><image data-name="Vector Smart Object1" width="30" height="24" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfjCgQKMi/S4KCEAAABx0lEQVQ4y53TP0jVURQH8M99PlLTJ0FRlokRSIVLYdIQQQQRhGRbQYvUZDQ0F+TY2Bi01NgUREuEgUEtDgk2qARhlmBk+Q+e+p7+TkuIvax8nfHc7+fcy71c/lLRH/3+r+JGTMVsXP8f2htjMRLj8SWuVUsvxlgMxWA8j/cxHVc2T+U2pefdUVBWNKdom5txbos4Lrhvt0llE/YryHnhbnRuAccZj7X6qGRBwV4Npu1R1hdHKrOpgp7wUr0hA1olXXaZU5KZNKPkXhrdmM5XDCvptmBNh0Yn1SuhaNEtJXmrv4YrcBr+eYIul0wZdsyqUWtpZMu3jR7JIWdtN6Cjcsd/4RZLkkYfLFrUXB3OWZKhTpslUR3+bloTjpqRyarDRUWf8MZBTdo3D+X/gJMG3zTJ7NBi5x9wPCL1/tZ/oEG9BSGv2dfK5ajTbS1FeJs6VVlR55aUN2ugWgpqtOc9tBI1aa1q3KEn57ucg1XTA3os5I075Wn0ebf+mpmyVYGkRu2Gn5cpC8kBT/AsxU6vHf5l6lUTQq02p3UrrPenvVJQq6jbvCGXE9HmtuMarFiSmZdXI6m3T0ImlC2bU5SzbMVngyaMpuUflBKo7XfRKPcAAAAASUVORK5CYII="></image></svg>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i={"./default/default.fs.glsl":759,"./default/default.vs.glsl":760};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=758},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\n\nuniform sampler2D uTexture;\t\n\nvoid main(void) {\n\tgl_FragColor = texture2D(uTexture, vUV);\n}"},function(e,t){e.exports="attribute vec3 aPos;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\n\nvoid main(void) {\n\tvUV = aUV0;\n\tgl_Position = vec4(aPos, 1.0);\n}"},function(e,t,n){var i={"./candle_flame.png":442,"./ofrenda_a_albedo.png":443,"./ofrenda_a_albedo_transparency.png":444,"./ofrenda_b_albedo.png":445,"./ofrenda_b_albedo_transparency.png":446,"./ofrenda_c_albedo.png":447,"./ofrenda_c_albedo_transparency.png":448,"./perlin_doNotCompress.png":449,"./petals.png":450,"./portrait_default.png":451,"./ramp.png":452};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=761},function(e,t,n){e.exports=n.p+"version/1571836555246/image/background.dc5c6ae.jpg"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAEAAQADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDmbOHJBrrNLQYFc/YwnI44rqLCPaBQBolwi0RXAJqpdNhapx3GxuTQBsS3HOKau11qoJFlXOau2sWRQBj6nCNpwK5u4sy4JxXeXVkJVrOOmYz8tAHnt5phaM8c1ztzpzRk5Feo3ljtJwtcxqdpgn5aAOFazdm6VHJZFB0rq47Ik/dol0zcM7aAOKdNlMWTBrb1Ox8pScVgEYNAF6GXkVs2tzgDmucR8VajuSvegDpl1AIeTU8eqYYYNcqZ2ZutWYpsEc0Aei6XqIZRk1tHUlROtec2eoeXjmtIal5nG6gDrH1xVGCaRNcjP8Qri7m5J6GqiXjBupoA7a51hCDg1ivK1zIfSslZ2kI5rodLtgyZIoAw7yBkyccVz94vJrvdStlCkYrkNQtsEnFAHPSKaiZTitP7OT2p/wBiyOlAGOARUqVee0C9qgEOG6UAWLZSxFblkmMVl2qYIroLSMED1oA7bToMkZFbjBYIsg81nxMtume9VLrUS2RmgCW7vsZGayZdQA71SvL3k81iz3fzdaAO1sL/AHgc10VndcCvMbC/ZJBzxXY6bfiRQM0AdcJN5FXY7ZZVHHNY9o5ciumsEXaM0AZV1o29chawr7w0ZFJ2c16THAr44pz6ar/wigDyG28MuJDuTj6Uy80NozwnFevf2Qn90VQvdD8wHCfpQB4BrulsFbC1wV5atFIeK+hfEehLDbsSvP0rx/XbHYWwtAHHqpLU9srSspRjxTGYkUAPWXFWElqhk5qQNigDSW4x3q/a3Oe9YIYmr1sTQBqS3BJqIMSaRUZq0LWy3gZFAFrT4/MAGOa7HSbV1UccVjadYhMECuysFCxAEdqAMPVogua5i5gD5Brs9TtzI59KwZ7PBoAwBYDsKa9oV7VvLCqLzUTxK3SgDAaz3dqgaxweldRHZ7h0q3HpKyDkc0AchFbHI4roNPtsKCetaqaDg5C1dg03y+1AEFzf54BrIub3BPNQXM5B61mzz7s80AOuLgu3Ws+V8HOabJNtPWqc9xnoaAL8NzhsZrrNDuMkZNcFC+ec1u6fetEQAaAPWbCfpzXTWVwMjmvKbLWygA3V02maw8jjnigD022ugMc1pxXIauMs7wuBzW5az9OaAOiQhqWRQR0qpbT7hVotkUAYes6VHeQMCOcV414n8MskzgJxXvUnQ5rkvEFkkwJCjNAHztf6AIlJK81zN3bCIkV6/wCIrJYoXOMV5Xqi4dqAMXvT1GTTcfNVuCAsRigBscJJ6Vq2lseOKuWNgrKMjmujsNHDgfLzQBlW9kWxxW/p+nkkDbW5p3h/cRla6ez0BUIO2gDGsdFY4OOK0bmFbSHrg1siI2/G3gVzWvXeM80AZdzebmPNZ00oYmq8tyDk5qq1z70ANuZypqOO5U96oXtxk8GqButnegDrobhcDmte0nTAOa4SDUMgc1r2uoYHWgDt1uF29qhlu1Wufi1L1ao5L0u2M8UAYty2RWXM2M81enbC1kXEvWgCpcTHNUnlOakmfJNVGOTQBZin2nrVyO9K9DWSOtPDGgDpbW/JxzXU6TqhUqM15/ay4wK6Gwl6HNAHrmk6gHC5NdNb3oGOa8t0m9aPGTXTQagxIweKAPRbO9BxzWqlyGHWuBtNQKgc1t2uoZAy1AHQXFwFSsG/nVkNF5fjZw1YNxeFgeaAOa8SBZkcV5Tq9oA7Yr1HVTv3Vw2q2ZdiQKAOJaDDdOa3tG0xp2GRxUsOkF3BIrs9D0sRqOKAG6foAypxXUWelLCoOKvWNn04rYW0GzpQBkRS/Z3AxxXQWV2jqOlYt3aEZIFUEupbZu+KAOqvmRoyRivOvEk6jcAa1L3X2VCua4fVruS5lJycUAZ013jPNVWuic81FOCDVR5NtAEV3dkOeaoyXQbvTbxiWJFUCTmgDVhugg61oRaiAvXmubDGnpIwIoA7CzuJJnznitUHArmtMuSoANbSzl6AKt9uTIrKkTeD611V9aK+eKx5bUIDQBzdxEVJqoTWtexnnisplIPNAAi5p4jJNSQpmrkNvubpQAtrb7sV0Nhak4qjBasrAgcV0umwk4yKANGxtjgV0VpBtUZqpZxAAcVsQJkUAV7m+S1Tk4NQw+I+waqmt25cEiuNkme2n5bjNAHpdvqMl04GcirzxZjrjdI1ZAq/NzXV212JkzmgDMv7ckGufuLTJORXX3YBU1hXC8mgDIitVU9K6HSo8EcVSht93NbdhCFI4oA3rNMY4rXSMFelZ1oDkVvQQgxjigDHvIPlPFYF3bZzxXbyWZY8jiqM2khj0oA86vdJMgyAayLnRisZOK9Pm0oAcLWdc6TuQ/LQB5Fd6eVJyKwL23MbGvUdW0vYG+WvPtYhZHPHFAHPtEHFVpLUA9KvqpB6VILdpO1AGKYDnpVqOzLjgc1sRaYW7VpWmkndyOKAMK3gaIjIroLSMNGDV3+yAe1TQWLRNjHFAFuaEMDWLew7c1vytWXe4ZSKAOYliMjkY4rLu7Yo/SunEQBNULy0aRuBQBmWcSvgd614bYDBqvbWhjfkVrQRksBQBds7dXA45rdsbbBAxVawtRwa6C2gAxQBNFDgCp2ulgTk0vCrWJqU2M80AQ6pqgIbBrhtRvN8p5rQ1K5PzYNcxcyncSaAOj0ac7hlq7W11NIYxlq8qsr9oXHpWyNW3KPmoA9HXUln4zUU2DyK4m11cqw5Nb9rqPnKAaAN+yjLsK3IYQmKwbCUgj0rprTbIB60AaVipOK6K0X5RWNbIEArYtX4AoAuEDFRlQR0qUnikAFAFV7fd2qB7HKnitIDmpdgK0AcFrWmgqwxXlfiHTiJGAXvXvV/Y+bniuK1nw+jEkgZoA8osdFEo5WrsmjLCOFrs4NIWFulR3tiCOBQByUNkPSr0dvs7VbNsYznFHSgBgUAdKa6jFOZsGm7sigClI1ZtwCTV+ZsVRc5agCq0dEcBdulbNpYidOnNadnobF87eKAMSPTQw+7QbHymziutOmiIdKyL+PZmgCK0lEYArUhvABXOiTFWIp8Dk0AatxqW04zxWDqWpBsjNR313gHmucvLpmJ60AaMVo97Lx0NJqeiLDDkDmo9J1HySAa6FLebU5FwMqaAORtdK8xMbeafJo0yMMKcV6bpvhYq6kpxW63hJHUHZ+lAHl+naGZFBYGtlbBbYD1rqZ9K+xNgLgVi6iQtAFjTjkgV1unQng1w+m3QDgE13elzK0Y5oA02mEYFXbO5yAaoTKrLUIult064oA6J7sBetQfb+etctcaxg/e4qsdZGOG5oA7iO9B6mtCCdWHWuBtNSZ3BLcV0FrfADrQBo3135ZNclrOpAA81b1bUwM/NXAazqRdiAaANF9XX1qNbwztiuTN0Seta1jLkCgDTnTIqjImKutJxUEmGFAGfIKiLYFWZE4qqwxQBVijadqdJp7A5xRp0hDDNdHFGkyjpQBT0qHbgEV1lpCCowKpWemgEECuitLYKvSgDLu7fAPFcrqsBOcCu6u4iSQBWBqFnuU8UAcN5ByaYyFa2prbYx4rNuwEWgDPFk91LjHFQ3ujeWMla2tNnUHmug+yw30OMDNAHmkdgwlGAeteieFLRm2grVyz8LJIc7a6zRNB+yyDjigC7CqwRD5easxXSlcHFX5tPUpWDextAxx0oAo626FSRivP9VfrXUavefIRmuGv7gsxz0oApLeNDJkGuo0TXiCqs1cbNhhRaXBhk68UAeu/2xG0Wd3auZ1TXykpG7j61ysuusi4VjWLeam85PJoA6p9eLv96pYtS3nO6uFW5Yd6uQXzr3oA72DV2RgM8Vu22uAx8tXmsN+WPJrQjvyq43UAdHq2sk5w1c9cXHnrnPNVpZWmbrSolACwxlmrbtUCKKo20YrRjwtAFgvTc0xmFN3jHWgCK5lCrWa1zmp7xwcjNZTvg0Ab4sxbxZxg1Pp9w3mAHpWzfWBKnC1RhtBFyRzQB0lhMOK3YCDjFcjaSlSBXS2MuVFAGg8IdelYeo25GeK6BW4qjexbwaAOC1HCZ4rmb2UEEV3Op2AfNchqloIkJxzQBn2b4Nb1jemFhk8VyS3iwE5pJdYwODQB6xYa5GuORXRWetK5GCK8JtNfZWALV1mla4TjLUAeq3GtBU+9WFf6ukqHkZrmLnWN4+/WPdauAD89AF/UZjIx54rk9Tk2E0tzrB3H5qxtQ1ISqRnmgCrNfFWPNVm1E+tUbiUkmqLSndQB11iEu1AJ5rSXQ95ziuf0O5COM16LoiG8dRjigDj7nR5In4U4pIdNcnoa9JvNF3EYSqZ0pYhytAHDSwiBenNMSQmuov8AS1cEgVhy2RiJoAbHLtFW45A1UAvNWoBg0AacD7alkuQoqgZgtQzXCletAE8+qCNetJDqqsvWuc1CU84NU4L3ZxmgDpLm/BkwDWlZWi3cO4DmuVtFe6nB5IzXougWWI1GKAPRJNOWReRWLeadsfgcV15xiqk9qso6UAc9Z6cGI4rchtBCnSp7S2EfUVPMQFoAzZZWSovtBYHNSzoWNU5iI0PrQBga3qAiJArk7q5FyjAjmtzVbd7iUkdKzGs1ijJI5oA43ULYhiRWLKGXiuwvIg2RWBeQKpNAFG0idnzWgbya0PB4qmbhYI+OtZd3qTykigDoJPETbMbqoNrDyNktWC0pYdaYrkd6ANie+Lc5qm1wW71TMhPekD80AX1QSCo5LQ5yBTIbjawrfsUjuQBxQBSsE2MvHNeueCLV5ihK8Vz2meGY51VgOa9b8I6KlpCoK80AWpNNyBle1Yt/Yhc4Fd3cQhV6VzepqApoA8/1FDGTXM3z9a67V+QcVyV0m4nNAGO8u005LwAdaWeEEms+f92DigC9LeArwaoyXRGeazZLhlbrxUEl1u4zQBNdXZfjNQwrvIqGJTLJW/YadllNAG14dtC7L8ter6LpwWJTjmuS8OWUabTjmvRtOCqoFAFmykacgk8VqmAba47RNUzgE11cNx5gHPFAA/yCq7nIq5IAwqq6gKaAMyeQoTmsW+vAM81f1SbYDiuTvLgsxoAJrz5jWZeXQKmiV855rJvJTyKAKl1NjJrn72YsTV68nwDzWDPPknmgCrdMSDzWewqzNLVZmyKAGKMmhgR0pVPNWUi3igCoAaXFXTb47VGYfagCqODWxpV0Y5V54rNaLFSW7GOQUAexeF78O6LmvY9Bw6KfavnvwpdYlQ5r3Xw3eK0K4PagDqLwDyzXF6xLtLDNdNf3WIjg9q8/1q8be1AGRekOTmucvtig461cu77Zkk1g3V4JSeaAM25kKufSqM53r71pvEJV96jFicdKAOcmiPNUXjIaukurMrzismeLB6UAV7Vtjium0y6G4A1z0cfPStK0yhBoA9G07Uo4Yxg811emauWA5ryqylYsOeK6ywvBEgGeaALOjX+COa7ex1P5QCa8u0y4C4rqLO8xjmgDuRqAJ608SGbp0rAt5t4FbFpKAOTQBS1O23KTXNS2OSSRXZ3IEnQisS7jVCeRQBw+ogwuQKwp5d2a6fWVRicYzXLzoFBoAw9QzzWDKeTW/eAsSKw7iMqxNAFCU1BU0vWoD1oAepAq5DKAKoino2DQBqLlzUy24NVbaTOK1bdS5xQBmTQbW6VEICTnFdH/AGaZSMCtex8OeYoyvNAGZ4fZ4ZF4OK9f8MX7bVGa5Oy8OCLB211Ok2ptmFAHZmQzLyeMVymuQLlsVsi72Dk1h6jJ57kg0AcXf227Nc7cQmNjXWallCeK5u73NnigCCBuas7+apxgqeam3UAW5LdZouBzWNc6XgkkVuWr5GKmktjL2oA5NbAhs4qYW23tXSrpuBytQTWQTnFAFKzTZitNZwg61n/cNRmQlqANWxjxg10VkhJFY9oqgAGuj02MEg0AbFmm0c1V1HV/sTHDVFe3wtRw2K4PxBrm9yA1AHV/8JmqEhmqtP4qSYn5q8vk1Hcx+amjUCP4jQB2N/q3mycNVJrgSrWAl35h61o27bqAHzRhgTWLewnnAroGXIqrPbh1xigDknj5quy4NbdzZFWJxWbLDg9KAKuKAvNSFCDSqpzQBZtl5FdFpsRZhxWNZQlmFdrpFkCq8UAadhaK2Miup02xHHy1X03T+AcV0tpbCMA0AQSQiNelVvtHl1p3EeQawLs7HPNAE8l4W4zUlpA1w/I4rNgUySDmuz0a0UoOOaAOe1LQw67ttcpqGmrGh+XmvXr2zzHwK4rWNPJ3fLQB5nLEVY01Fya2b2xKuflqj5GD0oAdbrhhW7aQ78cVlQxHI4ro9LiPGRQA2aALHwKxblCM8V1k9uWHSsW8tsA8UAczJGSx4quYiGrZkt/aqz2/tQBUvNRNo/WrNj4uWJcFqw9cGScVzDyFCeaAO21TxSJyfnrlr3UFnyc5JrIklZjyai3c9aAJWkJbrT1fjrUG6gNQBoQTYIrbsp84rnIBk1vWKgAUAbsY30kqYNPt2+UU+XkUAZF1EWNZM8OD0rdm7iqUsQYUAYZh56U9Lck9K01tgau21gCRmgCLTbMlhgV6Bodj8q5FZulaYp2kAV2un2ixIDQBK0qWsY9adDqqnjNVNRAIIrGabyuhoA6G51IAfernL/UgWPNULq/fnmsC8vGZic0AdVY6jiUfNxXf6HqClV+avELe/dHHJrrdI1qSPbgmgD2qFvPPOCKrX+lRyg8Cud0nXtyAFua6iyma6OT0oA5C+8NB8kLXPT6B5Tn5a9ektN46VlXWkByTgUAeXDSiH6Vs2doIkHFb9xpQjbpVYwhBigDOn+UGsW8Oc1vzqCDWTcxLg0AYhTJqtKmK0JQFqnMRigDk9VQMCa5G8XDGur1CTINczdoSScUAZhzTQDmphExbpVqK0J7UAVFTNKyYq81sUHSq0gxxQA2F9presJM4rAjU7q2rIYAoA34ZMYqxvDLVCNhirKH3oAbKgxms+4cIDVq5l2g81iXdzknmgCYXoWtGxvN5HNcsZSWrRspthHNAHe6fqJiYDPFdfp16ZgOeK8thuzuHNdbpGqBUC55oA6XUX44NYki7wa0RuuMEnipksQaAOVu4iAawrpDnpXc31iFBNc3f2yjOBQBlW8AfHFa0BWADms5ZRCOnNQSXbFuKAO+0i7XK/NXpegXYaNRXhuk3rb1HNeseGrtfLXJ5oA755wI6x73UPLBOaivL4LFw3auS1LVwNwL0AaF5q+SeayjqO5jk1zN1q/zH5qx5ddKyfe4oA7iW7U9DVGWUNmueh1cSLndVhbzcM7qAFvHKscGs55SRU1zOG71RklAFAGM9q07Y7UyfRx5XTmtO0+8K2oLD7QRkcUAcIukkfw1qWekBhytdp/YAJBAq/b6KqrjbQB5lqdmIgQFrAFjJLIcKcV7HfeGklBJFUF8MxxqcKM0AeWPp8kZ+6avWkRA5Fdrd6MiggqKyJbNYQQBQBjyytEaYt+c4zT76MgGsgnDUAXp7pn71l3LkmnPJiqzvuoARTV22as/PNWoXxigDctznFb+nNtIOa5i3nAAras5zgUAdpbX21QM1oxahkda5KG54q7DcH1oA2ru7DLjNZjwCdelPSJp268Vq29mFXpQByd1pTZyBVE2BU8ivQHs1ZelUH0wGTOOKAKGhaOJGBIrrYFfT2GDxVS0aOzj4xkVn6lreMjNAGnqevtHGQWrhtS10yMcPTNT1QSxkA81x93cNvPNAG2dRLk5as+7vADnNZQuyOpqvcXO/oaANmDU2To1aS6yRHgNzXGpMQetWEnPrQB1Sam8h5NWFnL965q3mORWzay7gKAP/2Q=="},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_a_albedo.1f84869.jpg"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_b_albedo.8e55547.jpg"},function(e,t,n){e.exports=n.p+"version/1571836555246/image/ofrenda_c_albedo.1a67183.jpg"},function(e,t,n){var i={"./ofrenda_a.json":[820,1],"./ofrenda_b.json":[821,2],"./ofrenda_c.json":[822,3]};function r(e){if(!n.o(i,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=i[e],r=t[0];return n.e(t[1]).then(function(){return n.t(r,3)})}r.keys=function(){return Object.keys(i)},r.id=767,e.exports=r},function(e,t,n){var i={"./bloomBlur/bloomBlur.fs.glsl":769,"./bloomBlur/bloomBlur.vs.glsl":770,"./bloomComposite/bloomComposite.fs.glsl":771,"./bloomComposite/bloomComposite.vs.glsl":772,"./candleFlame/candleFlame.fs.glsl":773,"./candleFlame/candleFlame.vs.glsl":774,"./motionblur/motionblur.fs.glsl":775,"./motionblur/motionblur.vs.glsl":776,"./ofrenda/ofrenda.fs.glsl":777,"./ofrenda/ofrenda.vs.glsl":778,"./ofrendaPortrait/ofrendaPortrait.fs.glsl":779,"./ofrendaPortrait/ofrendaPortrait.vs.glsl":780,"./particle/particle.fs.glsl":781,"./particle/particle.vs.glsl":782,"./path/path.fs.glsl":783,"./path/path.vs.glsl":784,"./simplestep.glsl":785,"./smoothstep.glsl":272,"./tonemap/tonemap.fs.glsl":786,"./tonemap/tonemap.vs.glsl":787,"./valleyParticles/valleyParticles.fs.glsl":788,"./valleyParticles/valleyParticles.vs.glsl":789};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=768},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\n\nuniform sampler2D uTexture;\t\nuniform vec2 uSourceTexelSize;\nuniform float uDownScale;\nuniform float uThreshold;\n\nvec3 prefilter (vec3 c) {\n\tfloat brightness = max(c.r, max(c.g, c.b));\n\t//float brightness = dot(c, vec3(0.2126, 0.7152, 0.0722));\n\tfloat contribution = max(0., brightness - uThreshold);\n\tcontribution /= max(brightness, 0.00001);\n\treturn c * contribution;\n}\n\nvec3 ts(vec2 uv)\n{\n\tvec3 c = texture2D(uTexture, uv).xyz;\n\tif(uThreshold < 5.)c = prefilter(c);\n\treturn c;\n}\n\nvoid main(void) {\n\t//float eps = mix(0.5, 1., uDownScale);\n\tvec4 o = uSourceTexelSize.xyxy * vec2(-1, 1).xxyy;\n\tvec3 s = ts(vUV + o.xy) + ts(vUV + o.zy) + ts(vUV + o.xw) + ts(vUV + o.zw) ;\n\tgl_FragColor.xyz = s * 0.25;\n\n\tgl_FragColor.w = 1.;\n}"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nattribute vec3 aPos;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\n\nvoid main(void) {\n\tvUV = aUV0;\n\tgl_Position = vec4(aPos, 1.0);\n}"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\n\nuniform sampler2D uTexture;\t\nuniform sampler2D uSource;\nuniform vec2 uSourceTexelSize;\nuniform float uBloomAmount;\nuniform float uShowBloomBuffer;\nuniform float uPow;\n\nvec3 ts(vec2 uv)\n{\n\treturn texture2D(uTexture, uv).xyz;\n}\n\nvoid main(void) {\n\n\tvec3 source = texture2D(uSource, vUV).xyz;\n\tvec4 o = uSourceTexelSize.xyxy * vec2(-1, 1).xxyy;\n\t//upscale filter\n\tvec3 s = ts(vUV + o.xy) + ts(vUV + o.zy) + ts(vUV + o.xw) + ts(vUV + o.zw);\n\tvec3 bloom = s * 0.25;\n\n\t//probably not accurate, but it results in more glow and less color burn\n//\tbloom = sqrt(bloom);\n\tbloom = pow(bloom, vec3(uPow));\n\n\tgl_FragColor.xyz = bloom* uBloomAmount;\n\tif(uShowBloomBuffer < 0.5)gl_FragColor.xyz += source;\n\n\tgl_FragColor.w = 1.;\n}"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nattribute vec3 aPos;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\n\nvoid main(void) {\n\tvUV = aUV0;\n\tgl_Position = vec4(aPos, 1.0);\n}"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision highp float;\n#endif\n\nvarying vec2 vUV;\n\nuniform float _Time;\nuniform float _Animate;\nuniform float _CandleDistort;\nuniform float _SwayOffset;\n\nuniform sampler2D _Flame;\nuniform sampler2D _Noise;\n\nvoid main() {\n\tvec2 uv = vUV + vec2(sin(_Time * 1.11 + cos(_Time * 1.67) * 0.81 + _SwayOffset) * 0.4 * pow(vUV.y, 3.0), 0.0);\n\tfloat noise1 = texture2D(_Noise, (uv + vec2(0.0, -_Time * 0.3)) * 0.5).r;\n\tfloat noise2 = texture2D(_Noise, (uv + vec2(_Time * 0.2, _Time * -0.1)) * 0.25).r;\n\tfloat extra = (noise1 * noise2) * 4.0;\n\n\tuv.y += (abs(fract(_Time * 0.31) - 0.5)) * step(0.1, vUV.y) * (1.0 - step(0.35, vUV.y)) * extra * 0.1;\n\tuv.y *= _CandleDistort;\n\tvec4 flame = texture2D(_Flame, uv).rgba;\n\n\tvec3 col = flame.rgb;\n\tgl_FragColor = vec4(col * _Animate, 1.0);\n}\n"},function(e,t){e.exports="attribute vec3 aPos;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\n\nuniform mat4 _ViewProjection;\nuniform mat4 _View;\nuniform vec3 _CenterPos;\nuniform vec2 _Scale;\nuniform float _Time;\n\nvoid main() {\n\tvUV = aUV0;\n\n\tvec2 local = aPos.xy;\n\tlocal.y = local.y * 0.5 + 0.5;\n\n\tvec3 camRight \t= vec3(_View[0][0], _View[1][0], _View[2][0]);\n\tvec3 camUp \t\t= vec3(_View[0][1], _View[1][1], _View[2][1]);\n\tvec3 worldPos \t= _CenterPos + (local.x * camRight * _Scale.x + local.y * camUp * _Scale.y);\n\n\tgl_Position = _ViewProjection * vec4(worldPos, 1.0);\n}\n"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nuniform sampler2D uTexture;\nuniform sampler2D _Texture;\n// uniform float _Opacity;\n\nuniform float _MotionWeight;\nuniform highp float _Time;\n\nvarying vec2 vUV;\n\nhighp float hash13(highp vec3 p3) {\n  p3  = fract(p3 * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main(void) {\n\tvec3 history = texture2D(uTexture, vUV).rgb;\n\tvec3 new = texture2D(_Texture, vUV).rgb;\n\n//  new *= _Opacity;\n\n\thighp float h = hash13(vec3(gl_FragCoord.xy, _Time));\n\tgl_FragColor = vec4(mix(history, new, _MotionWeight) + (h-.5)*(1./255.), 1);\n}\n"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nattribute vec3 aPos;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\n\nvoid main(void) {\n\tvUV = aUV0;\n\tgl_Position = vec4(aPos, 1.0);\n}"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\nvarying vec3 vNormal;\nvarying vec3 vWorldPos;\n\nuniform float _Animate;\nuniform highp float _Time;\n\nuniform sampler2D _BakedColorTex;\n\nuniform int _LightCount;\n\nuniform vec3 \t_LightPos[16];\nuniform float _LightRadius[16];\nuniform float _LightDistort[16];\n\nvoid main() {\n\tvec4 col = texture2D(_BakedColorTex, vUV);\n\n  if (col.a < 1./255.) {\n    discard;\n  } else {\n    vec3 N = normalize(vNormal);\n    float l = 0.0;\n\n    for (int i = 0; i < 16; ++i) {\n      if (i >= _LightCount)\n        break;\n      vec3 delta = _LightPos[i] - vWorldPos;\n\n      float distance = length(delta) + _LightDistort[i] * 0.15;\n      vec3 L = normalize(delta);\n      float intensity =  (.75 + .25*sin(_Time*2. + _LightPos[i].x*314.5 +  _LightPos[i].z*211.2)  + _LightDistort[i]*.25);\n      float diffuse = max(dot(L, N) * intensity, 0.0);\n\n      l +=  .3 * diffuse * (1.0 - smoothstep(_LightRadius[i] * 0.5, _LightRadius[i], distance));\n    }\n\n    gl_FragColor = vec4(col.rgb * ((.8 + sqrt(l))  * _Animate), col.a);\n\t}\n}\n"},function(e,t){e.exports="attribute vec3 aPos;\nattribute vec3 aNormal;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\nvarying vec3 vNormal;\nvarying vec3 vWorldPos;\n\nuniform mat4 _ModelViewProjection;\nuniform mat4 _Model;\n\nvoid main() {\n\tvNormal = aNormal;\n\tvUV = aUV0;\n\n\tvec3 pos = (_Model * vec4(aPos, 1.0)).xyz;\n  vWorldPos = pos;\n\n\tgl_Position = _ModelViewProjection * vec4(aPos, 1.0);\n}\n"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\nvarying vec3 vNormal;\n\nuniform float _Animate;\nuniform sampler2D _PortraitTex;\n\nvoid main() {\n  const float aspect = (376.) / 512.;\n  vec2 uv = vUV;\n  uv.x = (uv.x - .5) * aspect + .5;\n\tvec4 col = texture2D(_PortraitTex, uv);\n\n\tgl_FragColor = vec4(col.rgb * (_Animate * .75), col.a); // a little bit darker to counter bloom effect and match ofrenda\n}\n"},function(e,t){e.exports="attribute vec3 aPos;\nattribute vec3 aNormal;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\nvarying vec3 vNormal;\n\nuniform mat4 _ModelViewProjection;\nuniform mat4 _Model;\n\nvoid main() {\n\tvNormal = aNormal;\n\tvUV = aUV0;\n\n\tgl_Position = _ModelViewProjection * vec4(aPos, 1.0);\n}\n"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nuniform sampler2D _Texture;\n\nvarying vec2 vUV;\n\nvarying float vBlur;\nvarying float vAlpha;\nvarying float vDepth;\nvarying float vFog;\n\nvoid main(void) {\n\tvec2 uv0 = vUV;\n\tvec2 uv1 = vUV;\n\n\tfloat f = clamp(sqrt(vBlur) * 2., 0.75, 3.);\n\n\tuv0.y += .75 - .25 * floor(f);\n\tuv1.y += .75 - .25 * floor(f+1.);\n\n\tvec4 col0 = texture2D(_Texture, uv0);\n\tvec4 col1 = texture2D(_Texture, uv1);\n\n\tvec4 col = mix(col0*col0, col1*col1, fract(f));\n\n\tfloat alpha = sqrt(col.a) * vAlpha;\n\tvec3 color = sqrt(col.rgb * vFog);\n\n\tgl_FragColor = vec4(color * alpha, alpha);\n}"},function(e,t){e.exports="attribute vec3 aPos;\nattribute vec2 aUV0;\n\nuniform float _Aspect;\nuniform float _Time;\nuniform vec3 _CamPos;\n\nuniform mat4 _Model;\nuniform mat4 _ViewProjection;\n\nuniform float _FocalDepth;\nuniform float _FocalLength;\nuniform float _FStop;\nuniform float _FSize;\nuniform float _FAlphaPow;\n\nuniform float _Size;\nuniform float _Flip;\nuniform float _XOffset;\nuniform float _Fade;\nuniform float _Rotation;\n\nvarying vec2 vUV;\nvarying float vBlur;\nvarying float vAlpha;\nvarying float vDepth;\nvarying float vFog;\n\nfloat calculateBlur( float depth ) {\n\tif( depth <= 0. ) return 0.;\n\n\tfloat CoC = 0.03;//circle of confusion size in mm (35mm film = 0.03mm)\n\n\tfloat f = _FocalLength; //focal length in mm\n\tfloat d = _FocalDepth*1000.0; //focal plane in mm\n\tfloat o = depth*1000.0; //depth in mm\n\n\tfloat a = (o*f)/(o-f);\n\tfloat b = (d*f)/(d-f);\n\tfloat c = (d-f)/(d*_FStop*CoC);\n\n\tfloat blur = abs(a-b)*c;\n\n\treturn max(blur, 0.);\n}\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\n\nvoid main(void) {\n\tvUV = aUV0;\n\n\tvUV.y *= .25;\n\n\tif (_Flip > .5) {\n\t\tvUV.x = 1.-vUV.x;\n\t}\n\tvUV.x *= .25;\n\tvUV.x += _XOffset;\n\n\tvec4 pos = _Model * vec4(0,0,0,1);\n\tvec4 projpos = _ViewProjection * pos;\n\tfloat depth = abs(pos.z - _CamPos.z);\n\n\tvDepth = depth;\n\tvBlur = calculateBlur(depth);\n//\tvBlur = .5 + .5 * sin(_Time);\n\n\tvec2 off = rotate2d(_Rotation) * (aUV0-.5);\n\tprojpos.xy += off * vec2(2./_Aspect, 2.) * min(_Size + vBlur * _FSize * _Size, _Size * 4.);\n\n\tvAlpha = exp(-vBlur * _FAlphaPow) * _Fade;\n\tvFog = smoothstep(2.5, 1., vDepth) * smoothstep(2.9, 2.8, abs(pos.x));\n\n\tgl_Position = projpos;\n}\n"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision highp float;\n#endif\n\nvarying vec2 vUV;\nvarying vec2 vGridPos;\nvarying vec3 vWorldPos;\nvarying float vBlur;\nvarying float vDepth;\nvarying float vAlpha;\n\nuniform vec3 _CamPos;\nuniform float _FadeStart;\nuniform float _FadeEnd;\n\nuniform sampler2D _Texture;\n\nvoid main() {\n\tfloat l = length(vUV * 2.0 - 1.0);\n\tfloat circle = 1.0 - smoothstep(0.0, 1.0, l);\n\n\tfloat seed = vGridPos.y * 13.11 + vGridPos.x * 1.13;\n\n\tfloat idx = mod(seed, 4.0);\n\n\tvec2 uv0 = vUV;\n\tuv0 *= .25;\n\tuv0.x += .25 * floor(idx);\n  vec2 uv1 = uv0;\n\n\tfloat f = clamp(sqrt(vBlur) * 2., 0.75, 3.);\n\n\tuv0.y += .25 * floor(f);\n\tuv1.y += .25 * floor(f+1.);\n\n\tvec4 col0 = texture2D(_Texture, uv0);\n\tvec4 col1 = texture2D(_Texture, uv1);\n\n\tvec4 col = mix(col0*col0, col1*col1, fract(f));\n\n//\tcol.rgb *= (pow(_Color, vec3(2.2)) + vec3(0.1 * sin(seed), 0.05 * cos(seed), 0.0));\n//\tcol.rgb *= 2.0;\n\n\tfloat d = length(_CamPos - vWorldPos);\n\tfloat alpha = col1.a * vAlpha * (1.0 - smoothstep(_FadeStart, _FadeEnd, d));\n\n\tgl_FragColor = vec4(sqrt(col.rgb), alpha);\n}\n"},function(e,t){e.exports="attribute vec3 aPos;\nattribute vec2 aUV0;\nattribute vec2 aUV1;\n\nvarying vec2 vUV;\nvarying vec2 vGridPos;\nvarying vec3 vWorldPos;\nvarying float vBlur;\nvarying float vAlpha;\nvarying float vDepth;\n\nuniform mat4 _ViewProjection;\nuniform float _ParticleSize;\nuniform float _PathWidth;\nuniform float _PathHeight;\nuniform float _Time;\nuniform float _Progress;\nuniform float _PathSpeed;\nuniform float _PointFrequency;\nuniform float _SpeedModifier;\n\nuniform float _NoiseScale;\nuniform float _XOffsetScale;\nuniform float _YOffsetScale;\nuniform float _ZOffsetScale;\nuniform float _Aspect;\nuniform vec3 _CamPos;\n\n\nuniform float _FocalDepth;\nuniform float _FocalLength;\nuniform float _FStop;\nuniform float _FSize;\nuniform float _FAlphaPow;\n\nuniform sampler2D _Noise;\n\nconst int PATH_SEGMENT_COUNT = 100;\nuniform vec2 _Path[PATH_SEGMENT_COUNT];\n\nint modI(float a,float b) {\n    float m=a-floor((a+0.5)/b)*b;\n    return int(floor(m+0.5));\n}\n\nfloat linearToDiscrete(float v, float f)\n{\n\tfloat discrete = floor(v * f) / f;\n\treturn discrete;\n}\n\nvec2 rotate2D(vec2 v, float angle)\n{\n\tfloat c = cos(angle);\n\tfloat s = sin(angle);\n\n\tvec2 rotated;\n\trotated.x = v.x * c - v.y * s;\n\trotated.y = v.x * s + v.y * c;\n\n\treturn rotated;\n}\n\n\nfloat calculateBlur( float depth ) {\n\tif( depth <= 0. ) return 0.;\n\n\tfloat CoC = 0.03;//circle of confusion size in mm (35mm film = 0.03mm)\n\n\tfloat f = _FocalLength; //focal length in mm\n\tfloat d = _FocalDepth*1000.0; //focal plane in mm\n\tfloat o = depth*1000.0; //depth in mm\n\n\tfloat a = (o*f)/(o-f);\n\tfloat b = (d*f)/(d-f);\n\tfloat c = (d-f)/(d*_FStop*CoC);\n\n\tfloat blur = abs(a-b)*c;\n\n\treturn max(blur, 0.);\n}\n\nvoid main() {\n\tvGridPos = aUV1;\n\tvUV = aUV0;\n\n\tfloat t = _Time * 0.05;\n\n\tvec2 gridPos = vGridPos;\n\tfloat discreteT = linearToDiscrete(_Progress * 1.0, _PointFrequency * 0.5); // This needs to match the frequency of valleyParticles on gridPos Y so it updates at exactly the next spot of valleyParticles so they appear still.\n\tgridPos.y += discreteT;\n\tfloat yPos = mod(gridPos.y, 1.0);\n\n\tvGridPos = gridPos;\n\n\t// noise\n\tvec4 noise = texture2D(_Noise, gridPos * _NoiseScale) * 2.0 - 1.0;\n\n\tfloat fIndex = yPos * float(PATH_SEGMENT_COUNT);\n\tfloat iIndex = floor(fIndex);\n\tfloat dFrac  = fIndex - float(iIndex);\n\tvec2 pathA  = _Path[modI(iIndex, \t\tfloat(PATH_SEGMENT_COUNT))];\n\tvec2 pathB  = _Path[modI(iIndex + 1.0, \tfloat(PATH_SEGMENT_COUNT))];\n\tvec2 pathOffset = mix(pathA, pathB, dFrac);\n\n\t// per-particle placement\n\tfloat xOffset = noise.r * _XOffsetScale;\n\tfloat yOffset = noise.g * _YOffsetScale;\n\tfloat zOffset = noise.b * _ZOffsetScale;\n\t// per-particle animation\n\tfloat seed = (gridPos.x + yPos) * 13.17;\n\tfloat deltaZ = 1.0 - (abs(_CamPos.z - gridPos.y * _PathHeight) / _PathHeight);\n\t// TODO: replace sine-based noise w/ curl/simplex noise for more organic like (firefly) particle movement\n\tfloat xAnim = gridPos.x * deltaZ * 0.5 + sin(t + seed * 137.17) * noise.r * 4.5;\n\tfloat yAnim = cos(t + seed * 152.17) * noise.g * 1.3;\n\tfloat zAnim = sin(t + seed * 313.51) * noise.b * 4.7;\n\n\n  float speedModifier = _SpeedModifier * smoothstep(20., 0., abs(gridPos.y * _PathHeight - _CamPos.z));\n  float p = mix(9., 8., speedModifier);\n\n  yAnim *= 1. + 2. * speedModifier;\n  xAnim *= 1. + 4. * speedModifier;\n  zAnim *= 1. + 2. * speedModifier;\n\n\tvec3 centerPos = vec3(sign(gridPos.x)*(pow(abs(gridPos.x), p) * 8. + pathOffset.x) * _PathWidth + xOffset + xAnim, pathOffset.y + yOffset + yAnim, gridPos.y * _PathHeight + zOffset + zAnim);\n\n\t// per-particle settings\n\n\tfloat rotation \t= seed + xAnim * 1.17 + yAnim * 2.19 - zAnim * 3.17;\n\n\t// screen-space billboardingspos\n\tvec4 screenPos = _ViewProjection * vec4(centerPos, 1.0);\n\n\tfloat depth = abs(centerPos.z - _CamPos.z);\n\n  vDepth = depth;\n  vBlur = calculateBlur(depth);\n  vAlpha = exp(-vBlur * _FAlphaPow) * (1. + fract(seed));\n\n  float scale = (_ParticleSize * .5 +  _ParticleSize * noise.b * 0.5);\n  scale = min(scale * 4., scale + scale * vBlur * _FSize);\n\n\tscreenPos.xy += rotate2D(aPos.xy, rotation) * vec2(scale * _Aspect, scale);\n\n\tvWorldPos = centerPos;\n\tgl_Position = screenPos;\n}\n"},function(e,t){e.exports="uniform float delta;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv.y = 1.0 - uv.y;\n\n\tvec4 color = texture(iChannel0, uv).rgba;\n\tfloat colorGrad = texture(iChannel1, uv).r;\n\n\tcolor.rgb *= color.a;\n\tfragColor = color * (delta >= colorGrad ? 1.0 : 0.0);\n}\n"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nvarying vec2 vUV;\n\nuniform sampler2D uTexture;\t\nuniform float uType;\nuniform float _Opacity;\n\nvoid main(void) {\n\tvec3 color = texture2D(uTexture, vUV).xyz;\n\n\tgl_FragColor = vec4(color, _Opacity);\n}\n"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision mediump float;\n#endif\n\nattribute vec3 aPos;\nattribute vec2 aUV0;\n\nvarying vec2 vUV;\n\nvoid main(void) {\n\tvUV = aUV0;\n\tgl_Position = vec4(aPos, 1.0);\n}"},function(e,t){e.exports="#ifdef GL_ES\n\tprecision highp float;\n#endif\n\nvarying vec2 vUV;\nvarying vec2 vGridPos;\nvarying vec3 vWorldPos;\nvarying float vOpacity;\n\nuniform sampler2D _ColorRamp;\n\nuniform vec3 _Color;\nuniform float _Time;\nuniform float _FadeSpatialFrequency;\nuniform float _FadeTemporalFrequency;\nuniform vec3 _CamPos;\n\nvoid main() {\n\tfloat l = length(vUV * 2.0 - 1.0);\n\tfloat fade = (sin(_Time * _FadeTemporalFrequency + (vGridPos.x * 37.13 + vGridPos.y * 41.93) * _FadeSpatialFrequency) * 0.5 + 0.5) * 0.5;\n\tfloat circle = 1.0 - smoothstep(0., 1., l); // add max(0.01) for OS X devices as it sometimes flips the smoothstep.\n\n  circle *= vOpacity * fade;\n\n\tvec2 colorUV = fract(vec2(vGridPos.x * 11.21 + vGridPos.y * 3.93, 0.5));\n\tvec3 color = texture2D(_ColorRamp, colorUV).rgb; // * _Color;\n\n//\tcolor *= (1.0 - _IntroAnim) * (1.0 - _IntroAnim) * (1.0 - _IntroAnim);\n\n\tgl_FragColor = vec4(min(color * circle, vec3(1)), clamp(circle, 0., 1.));\n}\n"},function(e,t){e.exports="attribute vec3 aPos;\nattribute vec2 aUV0;\nattribute vec2 aUV1;\n\nvarying vec2 vUV;\nvarying vec2 vGridPos;\nvarying vec3 vWorldPos;\nvarying float vOpacity;\n\nuniform mat4 _ViewProjection;\nuniform mat4 _Model;\nuniform vec3 _CamPos;\nuniform float _ParticleSize;\nuniform float _ParticleSpread;\nuniform float _Height;\nuniform float _Time;\nuniform float _Aspect;\nuniform float _ScreenWidth;\nuniform float _IntroAnim;\nuniform float _IntroScale;\nuniform float _IntroAnim;\n\nuniform float _NoiseScale;\nuniform float _NoisePlacement;\n\nuniform sampler2D _HeightField;\n\n// Simplex 2D noise\n//\nvec3 permute(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }\n\nfloat snoise(vec2 v){\n  const vec4 C = vec4(0.211324865405187, 0.366025403784439,\n           -0.577350269189626, 0.024390243902439);\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n  i = mod(i, 289.0);\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n  + i.x + vec3(0.0, i1.x, 1.0 ));\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),\n    dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nvoid main() {\n\tvGridPos = aUV1;\n\tvUV = aUV0;\n\n\tfloat noise = snoise(vGridPos * _NoiseScale);\n\tvGridPos.xy += (1.0 + _IntroAnim * 0.1) * noise * _NoisePlacement;\n\n\t// height\n\tfloat height = texture2D(_HeightField, vGridPos.xy * 0.5 + 0.5).r;\n\n\t// position generation\n\tfloat yOffset = height * _Height;// + sin(_Time + vGridPos.x * 13.17 + vGridPos.y * 9.18 + height * 41.1) * 0.05;\n\tvec3 centerPos = vec3(vGridPos.x, yOffset, vGridPos.y);\n\n\tvWorldPos = (_Model * vec4(centerPos, 1.0)).xyz;\n\n  vWorldPos.y = mix(vWorldPos.y, _CamPos.y - 4., smoothstep(500., 100., distance(vWorldPos.xz, _CamPos.xz)));\n\n\tvec4 screenPos = _ViewProjection * vec4(vWorldPos, 1.0);\n\tfloat screenSize = _ParticleSize / screenPos.w;\n\n\tfloat d = length(_CamPos - vWorldPos);\n\tvOpacity = _IntroScale * min(1., 5. *(1.0 - _IntroAnim) * (1.0 - _IntroAnim) * (1.0 - _IntroAnim) * screenSize * (1. + 2. * smoothstep(2000., 100., abs(vWorldPos.x))));\n\n\tscreenSize = max(screenSize, 8.0 / _ScreenWidth);\n\tscreenSize = min(screenSize, 32.0 / _ScreenWidth);\n\tscreenSize *= screenPos.w;\n\n\tvec2 size = aPos.xy * screenSize * vec2(_Aspect, 1.0);\n\tscreenPos.xy += size;\n\n\tgl_Position = screenPos;\n}\n"},,,,,,,function(e,t,n){var i={"./en-gb.json":[823,0]};function r(e){if(!n.o(i,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=i[e],r=t[0];return n.e(t[1]).then(function(){return n.t(r,3)})}r.keys=function(){return Object.keys(i)},r.id=796,e.exports=r},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(641);var i=n(42),r=n(214),a=n.n(r),o=n(460);n(642);n(9).a.sensibleDefaults=!1;var s=n(20),l=n(14),u=n(15),c={bind:function(e,t){e.TrackDirective=new s.DisposableEventListener(e,"click",function(e){e.preventDefault(),Object(l.a)(u.g).trackEvent(t.value)})},unbind:function(e){e.TrackDirective.dispose(),delete e.TrackDirective}},h=n(461),d=n.n(h),f={track:c,filterInput:{update:function(e){e.value=d()(e.value)}}},p={Icon:n(462).a},v=n(300),m=n(13),_=function(){var e=Object(l.a)(u.b),t=e.getProperty(m.b.AVAILABLE_LOCALES).map(function(e){return"string"===typeof e?{code:e,urlPrefix:e,translationKey:e}:e}),n={persistent:!1,defaultCode:e.getProperty(m.b.DEFAULT_LOCALE),languages:t};return{localeEnabled:e.getVariable(m.d.LOCALE_ENABLED),localeRoutingEnabled:e.getVariable(m.d.LOCALE_ROUTING_ENABLED),config:n}},g=n(36);i.a.use(v.a);var y,E,A,T,b,R=null,x=function(){if(!R){var e=_(),t=Object(l.a)(u.b),n=e.localeEnabled&&e.localeRoutingEnabled?Object(r.routeParser)(g.b,t.getProperty(m.b.DEFAULT_LOCALE)):g.b.concat({path:"*",redirect:"/"});(R=new v.a({mode:"history",routes:n,base:t.getVariable(m.d.PUBLIC_PATH)})).beforeEach(function(e,n,i){var r=t.getProperty(m.b.PERSIST_QUERY_PARAMS),a=!1,o=Object.assign({},e.query);r&&r.length>0&&r.forEach(function(e){"undefined"!==typeof n.query[e]&&"undefined"===typeof o[e]&&(o[e]=n.query[e],a=!0)}),a?i({path:e.path,query:o}):i()})}return R},k=n(223),P=n(111),w=n.n(P),S=n(19),M=n.n(S),C=n(31),F=n.n(C),N=n(489),L=n(37),I=n(221),O=n.n(I),B={install:function(e,t){Object.keys(t).forEach(function(n){e.prototype[n]?console.error("Skipping ".concat(n,". ").concat(n," already exists on the Vue prototype")):Object.defineProperty(e.prototype,n,{get:function(){return t[n]}})})}},D=n(38),U=n.n(D),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=U()({},n,t);return e.replace(/:(\w+)/g,function(e,t){return"undefined"!==typeof i[t]?i[t]||"":e}).replace(/\/:(\w+\?+)/g,function(){return""}).replace(/\?/g,function(){return""}).replace(/:(\w+)/g,function(e,t){throw new Error('Param "'.concat(t,'" is missing in params'),i)})},G={ID:"id",SLUG:"slug"},$=[],H={isLoaded:function(e){return $.includes(e)},setLoadCallback:function(e){y=e},getTranslation:function(e){var t=e.translationKey,i=e.code;return n(796)("./".concat(t,".json")).then(function(e){return $.push(i),y&&setTimeout(function(){y(i)}),e})}},X=n(114),z=n(80),j=n(90),q=n(29),W={GTM:"gtm"},Y=n(46),K=function(e){var t=x(),n=t.currentRoute.query.uuid,i=t.currentRoute.query.UUID;return n||(n=i),n&&e.commit(Y.d,n),e.dispatch(Y.a,{uuid:n,offset:0})},Q=n(215),Z=function(e){return new Promise(function(t){H.isLoaded(e.getters.currentLanguage.code)?t():H.setLoadCallback(function(n){n===e.getters.currentLanguage.code&&t()})})},J=function(e){!function(){var e=Object(l.a)(u.b),t=Object.keys(X.b).reduce(function(e,t){return e[t]=X.b[t].replace(/'/g,""),e},{});i.a.use(N.a,{}),i.a.use(F.a),i.a.use(B,{$config:e,$gateway:Object(l.a)(u.d),$http:w.a,$versionRoot:e.getVariable(m.d.VERSIONED_STATIC_ROOT),$staticRoot:e.getVariable(m.d.STATIC_ROOT),$facebookSharer:Object(l.a)(u.c),$twitterSharer:Object(l.a)(u.h),$trackingManager:Object(l.a)(u.g),$appPreloader:Object(l.a)(u.a),$webgl:Object(l.a)(u.i),$soundManager:Object(l.a)(u.f),URLNames:m.c,PropertyNames:m.b,VariableNames:m.d,RouteNames:g.a,Params:G,ButtonType:j.a,LinkType:z.a,Size:q.a,TrackingProvider:W,createPath:V,$deviceStateTracker:new O.a({reverseDeviceStateOrder:!0,mediaQueries:t,deviceState:X.a,showStateIndicator:!1}),DeviceState:X.a})}(),L.DisposableManager.register(Q.a.TIMEOUT,function(e){clearTimeout(e)}),M.a.tablet||M.a.mobile||document.querySelector("html").classList.add("is-desktop"),M.a.chrome&&document.querySelector("html").classList.add("is-chrome"),(M.a.msedge&&parseInt(M.a.version,10)<18||M.a.msie)&&document.querySelector("html").classList.add("no-cssmask");var t=Object(l.a)(u.b);return Promise.all([K(e),t.getVariable(m.d.LOCALE_ENABLED)?Z(e):Promise.resolve(),Promise.resolve()])},ee=n(17),te=n.n(ee),ne=n(490),ie=n.n(ne),re={environments:(E={},te()(E,m.a.PRODUCTION,{variables:{},urls:{}}),te()(E,m.a.STAGING,{extends:m.a.PRODUCTION,variables:{},urls:{}}),te()(E,m.a.DEVELOPMENT,{extends:m.a.STAGING,variables:{},urls:{}}),te()(E,m.a.LOCAL,{extends:m.a.DEVELOPMENT,variables:{},urls:{}}),E),variables:(A={},te()(A,m.d.LOCALE_ENABLED,!0),te()(A,m.d.LOCALE_ROUTING_ENABLED,!1),te()(A,m.d.MOCK_API_ENABLED,!1),te()(A,m.d.VERSIONED_STATIC_ROOT,(window.webpackPublicPath||"/")+"version/1571836555246/static/"),te()(A,m.d.STATIC_ROOT,(window.webpackPublicPath||"/")+""),te()(A,m.d.PUBLIC_PATH,window.webpackPublicPath||"/"),A),urls:(T={},te()(T,m.c.API,"".concat("/","api/")),te()(T,m.c.MOCK_API,"".concat("/","mock-api/")),T),properties:(b={},te()(b,m.b.DEFAULT_LOCALE,"en-gb"),te()(b,m.b.AVAILABLE_LOCALES,["en-gb","en-us"]),te()(b,m.b.PERSIST_QUERY_PARAMS,["uuid","UUID","utm"]),te()(b,m.b.GTM,"GTM-5WW3PD4"),b)},ae=m.a.PRODUCTION;switch(document.location.host.split(":").shift()){case"localhost":ae=m.a.LOCAL;break;default:ae=m.a.PRODUCTION}var oe={config:re,environment:ae},se=n(0),le=n.n(se),ue=n(1),ce=n.n(ue),he=function(){function e(){le()(this,e),this.name="Facebook sharer.php",this.id="facebook"}return ce()(e,[{key:"share",value:function(t){var n=void 0===t.url?window.location.href:t.url,i=void 0===t.window_width?e.DEFAULT_WINDOW_WIDTH:t.window_width,r=void 0===t.window_height?e.DEFAULT_WINDOW_HEIGHT:t.window_height;return window.open("".concat(e.SHARER_API_URL,"?u=").concat(encodeURIComponent(n)),"facebook-sharer","toolbar=0,status=0,width=".concat(i,",height=").concat(r)),!0}}]),e}();he.SHARER_API_URL="https://www.facebook.com/sharer/sharer.php",he.DEFAULT_WINDOW_HEIGHT=450,he.DEFAULT_WINDOW_WIDTH=690;var de=function(){function e(){le()(this,e),this.name="Twitter Tweet Intent",this.id="twitter"}return ce()(e,[{key:"share",value:function(t){var n=[];["text","url","inReplyTo","via","lang"].forEach(function(e){if("string"===typeof t[e]){var i="inReplyTo"===e?"in-reply-to":e;n.push("".concat(i,"=").concat(encodeURIComponent(t[e])))}}),["hashtags","related"].forEach(function(e){"undefined"!==typeof t[e]&&n.push("".concat(e,"=").concat(t[e].map(function(e){return encodeURIComponent(e)}).join(",")))});var i=void 0===t.window_width?e.DEFAULT_WINDOW_WIDTH:t.window_width,r=void 0===t.window_height?e.DEFAULT_WINDOW_HEIGHT:t.window_height;return window.open("".concat(e.WEB_INTENT_URL,"?").concat(n.join("&")),"twitter-tweet-intent","toolbar=0,status=0,width=".concat(i,",height=").concat(r)),!0}}]),e}();de.WEB_INTENT_URL="https://twitter.com/intent/tweet",de.DEFAULT_WINDOW_HEIGHT=450,de.DEFAULT_WINDOW_WIDTH=690;var fe=n(3),pe=n.n(fe),ve=n(2),me=n.n(ve),_e=n(10),ge=n.n(_e),ye=n(4),Ee=n.n(ye),Ae=n(33),Te=n.n(Ae),be=n(491),Re=n.n(be),xe=function(e){function t(e){var n;return le()(this,t),(n=pe()(this,me()(t).call(this))).providers={},n.options=Re()({},e),Object.keys(n.options.providers||{}).forEach(function(e){return n.addProvider(e,n.options.providers[e])}),n}return Ee()(t,e),ce()(t,[{key:"addProvider",value:function(e,t){this.providers[e]=t}},{key:"removeProvider",value:function(e){delete this.providers[e]}},{key:"getTrackingProvider",value:function(e){return this.providers[e]}},{key:"getTrackingProviders",value:function(){return this.providers}},{key:"trackEvent",value:function(e){var t=this;return Promise.all(Object.keys(e).map(function(n){return t.providers[n].trackEvent(e[n])}))}},{key:"trackPageView",value:function(e){var t=this;return Promise.all(Object.keys(e).map(function(n){return t.providers[n].trackPageView(e[n])}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.providers).forEach(function(t){return e.providers[t].dispose()}),this.providers=null,this.options=null,ge()(me()(t.prototype),"dispose",this).call(this)}}]),t}(Te.a);xe.LOG_NAMESPACE="trackingManager";var ke=n(24),Pe=n.n(ke),we=n(136),Se=n.n(we),Me=function(e){function t(e){var n;if(le()(this,t),n=pe()(this,me()(t).call(this)),!Se()(e))throw new Error("The options should be provided in an object");return n.providerOptions=e,n.providerReady=new Promise(function(e,t){n.providerReadyResolveMethod=e,n.providerReadyRejectMethod=t}),n.init(),n}return Ee()(t,e),ce()(t,[{key:"handleApiLoaded",value:function(){this.providerReadyResolveMethod(),this.logger("Loaded")}},{key:"handleApiFailed",value:function(){this.providerReadyRejectMethod(),this.logger("Failed")}}]),t}(Te.a),Ce=n(271),Fe=n.n(Ce),Ne=function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"loadApi",value:function(e){var t=this;this.loadScripTask=new Fe.a({assets:e,cached:!1}),this.loadScripTask.load().then(function(){return t.handleApiLoaded()}).catch(function(){return t.handleApiFailed()})}},{key:"handleApiLoaded",value:function(){var e=this;setTimeout(function(){return e.loadScripTask.dispose()},0),ge()(me()(t.prototype),"handleApiLoaded",this).call(this)}},{key:"handleApiFailed",value:function(){var e=this;setTimeout(function(){return e.loadScripTask.dispose()},0),ge()(me()(t.prototype),"handleApiFailed",this).call(this)}}]),t}(Me),Le=function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){this.logger=Pe()("".concat(xe.LOG_NAMESPACE,":tealium")),window[t.DATA]=window[t.DATA]||{},window[t.DATA].page_category=this.providerOptions.pageCategory,window[t.DATA].page_name=this.providerOptions.pageName,this.loadApi(this.providerOptions.url)}},{key:"trackEvent",value:function(e){var n=this;return this.providerReady.then(function(){return window[t.NAMESPACE].link(Object.assign({},e))}).then(function(){return n.logger("trackEvent: ".concat(JSON.stringify(e)))})}},{key:"trackPageView",value:function(e){var n=this;return this.providerReady.then(function(){return window[t.NAMESPACE].view(Object.assign(window[t.DATA],e))}).then(function(){return n.logger("trackPageView: ".concat(JSON.stringify(e)))})}}]),t}(Ne);Le.NAMESPACE="utag",Le.DATA="utag_data",(function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){var e=this;this.logger=Pe()("".concat(xe.LOG_NAMESPACE,":bingTrackingPixel")),function(t,n,i,r,a){var o,s,l;t[a]=t[a]||[],o=function(){var n={ti:e.providerOptions.trackingPixelId};n.q=t[a],t[a]=new window.UET(n),t[a].push("pageLoad")},(s=n.createElement(i)).src="//bat.bing.com/bat.js",s.async=1,s.onload=s.onreadystatechange=function(){var t=s.readyState;t&&"loaded"!==t&&"complete"!==t||(o(),s.onload=s.onreadystatechange=null),e.handleApiLoaded()},(l=n.getElementsByTagName(i)[0]).parentNode.insertBefore(s,l)}(window,document,"script",0,t._NAMESPACE)}},{key:"trackEvent",value:function(e){var n=this;return this.providerReady.then(function(){return window[t._NAMESPACE].push(e)}).then(function(){return n.logger("trackEvent: ".concat(JSON.stringify(e)))})}},{key:"trackPageView",value:function(){var e=this;return this.providerReady.then(function(){return Promise.resolve()}).then(function(){return e.logger("BingTrackingPixel does not support page views")})}}]),t}(Me))._NAMESPACE="uet";(function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){var e;this.logger=Pe()("".concat(xe.LOG_NAMESPACE,":facebookTrackingPixel")),e=window[t._NAMESPACE]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.callMethod?e.callMethod.apply(e,n):e.queue.push(n)},window[t._NAMESPACE]||(window[t._NAMESPACE]=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[];var n=document.createElement("script");n.async=!0,n.src="https://connect.facebook.net/en_US/fbevents.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),window[t._NAMESPACE]("init",this.providerOptions.trackingPixelId),this.handleApiLoaded()}},{key:"trackEvent",value:function(e){var n=this;return this.providerReady.then(function(){return window[t._NAMESPACE]("track",e.event,e.parameters)}).then(function(){return n.logger("trackEvent: ".concat(JSON.stringify(e)))})}},{key:"trackPageView",value:function(){var e=this;return this.providerReady.then(function(){return window[t._NAMESPACE]("track","PageView")}).then(function(){return e.logger("trackPageView")})}}]),t}(Me))._NAMESPACE="fbq";(function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){var e,n,i,r,a,o,s=this;this.logger=Pe()("".concat(xe.LOG_NAMESPACE,":googleAnalytics")),e=window,n=document,i="script",r=t._NAMESPACE,e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*(new Date).getTime(),a=n.createElement(i),o=n.getElementsByTagName(i)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o),s.handleApiLoaded(),window[t._NAMESPACE]("create",this.providerOptions.trackingId,"auto")}},{key:"trackEvent",value:function(e){var n=this;return this.providerReady.then(function(){var n=window[t._NAMESPACE];isNaN(e.value)&&e.value?n("send","event",e.category,e.action,e.label,e.value):e.label?n("send","event",e.category,e.action,e.label):n("send","event",e.category,e.action)}).then(function(){return n.logger("trackEvent: ".concat(JSON.stringify(e)))})}},{key:"trackPageView",value:function(e){var n=this;return this.providerReady.then(function(){return window[t._NAMESPACE]("send","pageview",e.page)}).then(function(){return n.logger("trackPageView: ".concat(JSON.stringify(e)))})}}]),t}(Me))._NAMESPACE="ga";var Ie=n(35),Oe=n.n(Ie);(function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"loadGoogleGlobalSiteTag",value:function(e){return this.googleGlobalSiteTagPromise||(this.googleGlobalSiteTagPromise=new Promise(function(n){var i=new Ie.LoadScriptTask({assets:"//www.googletagmanager.com/gtag/js?id=".concat(e),cached:!1});i.load().then(function(){window.dataLayer=window.dataLayer||[],window[t.NAMESPACE]=function(){window.dataLayer.push(arguments)},window[t.NAMESPACE]("js",new Date),i.dispose(),n()})})),this.googleGlobalSiteTagPromise}},{key:"init",value:function(){var e=this;this.logger=Pe()("trackingManager:gtag.".concat(this.providerOptions.namespace)),this.loadGoogleGlobalSiteTag(this.providerOptions.trackingId).then(function(){window[t.NAMESPACE]("config",e.providerOptions.trackingId),e.handleApiLoaded()})}},{key:"trackEvent",value:function(e){var n=this;return this.providerReady.then(function(){return window[t.NAMESPACE]("event",e.event,e.data)}).then(function(){return n.logger("trackEvent: ".concat(JSON.stringify(e)))})}},{key:"trackPageView",value:function(e){var n=this;return this.providerReady.then(function(){return window[t.NAMESPACE](e)}).then(function(){return n.logger("trackPageView: ".concat(JSON.stringify(e)))})}}]),t}(Me)).NAMESPACE="gtag",(function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){var e,n,i,r,a=this;this.logger=Pe()("".concat(xe.LOG_NAMESPACE,":hotjar")),e=window,n=document,e[t._NAMESPACE]=e[t._NAMESPACE]||function(){(e[t._NAMESPACE].q=e[t._NAMESPACE].q||[]).push(arguments)},e._hjSettings={hjid:a.providerOptions.trackingId,hjsv:5},i=n.getElementsByTagName("head")[0],(r=n.createElement("script")).async=1,r.src="//static.hotjar.com/c/hotjar-"+e._hjSettings.hjid+".js?sv="+e._hjSettings.hjsv,r.onload=function(){return a.handleApiLoaded()},i.appendChild(r)}},{key:"trackEvent",value:function(){var e=this;return this.providerReady.then(function(){return Promise.resolve()}).then(function(){return e.logger("Hotjar does not support event tracking")})}},{key:"trackPageView",value:function(){var e=this;return this.providerReady.then(function(){return Promise.resolve()}).then(function(){return e.logger("Hotjar does not support page tracking")})}}]),t}(Me))._NAMESPACE="hj",(function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){this.logger=Pe()("".concat(xe.LOG_NAMESPACE,":linkedInTrackingPixel")),window[t._NAMESPACE]=this.providerOptions.trackingPixelId,this.loadApi("https://snap.licdn.com/li.lms-analytics/insight.min.js")}},{key:"trackEvent",value:function(){var e=this;return this.providerReady.then(function(){return Promise.resolve()}).then(function(){return e.logger("LinkedInTrackingPixel does not support event tracking")})}},{key:"trackPageView",value:function(){var e=this;return this.providerReady.then(function(){return Promise.resolve()}).then(function(){return e.logger("LinkedInTrackingPixel does not support page tracking")})}}]),t}(Ne))._NAMESPACE="_linkedin_data_partner_id";(function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){var e,n,i,r,a,o;this.logger=Pe()("trackingManager:twitterTrackingPixel"),e=window,n=document,i="script",e[t.NAMESPACE]||((r=e[t.NAMESPACE]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.exe?r.exe.apply(r,t):r.queue.push(t)}).version="1.1",r.queue=[],(a=n.createElement(i)).async=!0,a.src="//static.ads-twitter.com/uwt.js",(o=n.getElementsByTagName(i)[0]).parentNode.insertBefore(a,o)),window[t.NAMESPACE]("init",this.providerOptions.trackingPixelId),this.handleApiLoaded()}},{key:"trackEvent",value:function(e){var n=this;if(!e.event||!e.parameters)throw new Error("event and parameters are required for event tracking");return this.providerReady.then(function(){return window[t.NAMESPACE]("track",e.event,e.parameters)}).then(function(){return n.logger("trackEvent: ".concat(JSON.stringify(e)))})}},{key:"trackPageView",value:function(){var e=this;return this.providerReady.then(function(){return window[t.NAMESPACE]("track","PageView")}).then(function(){return e.logger("trackPageView")})}}]),t}(Me)).NAMESPACE="twq";var Be=xe,De=function(e){function t(){return le()(this,t),pe()(this,me()(t).apply(this,arguments))}return Ee()(t,e),ce()(t,[{key:"init",value:function(){var e=this;this.logger=Pe()("trackingManager:googleTagManager.".concat(this.providerOptions.namespace)),function(t,n,i,r,a){t[r]=t[r]||[],t[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var o=n.getElementsByTagName(i)[0],s=n.createElement(i),l="dataLayer"!==r?"&l=".concat(r):"";s.async=!0,s.src="https://www.googletagmanager.com/gtm.js?id=".concat(a).concat(l),o.parentNode.insertBefore(s,o),e.logger("Load"),e.handleApiLoaded()}(window,document,"script",t.NAMESPACE,this.providerOptions.trackingId)}},{key:"trackEvent",value:function(e){var n=this;return this.providerReady.then(function(){return window[t.NAMESPACE].push(e)}).then(function(){return n.logger("trackEvent: ".concat(JSON.stringify(e)))})}},{key:"trackPageView",value:function(e){var n=this;return this.providerReady.then(function(){return window[t.NAMESPACE].push(e)}).then(function(){return n.logger("trackPageView: ".concat(JSON.stringify(e)))})}}]),t}(Me);De.NAMESPACE="dataLayer";var Ue=n(27),Ve=n.n(Ue),Ge=n(61),$e=function(e){function t(e){var n;return le()(this,t),(n=pe()(this,me()(t).call(this))).taskLoaderOptions=null,n.versionRoot=Object(l.a)(u.b).getVariable(m.d.VERSIONED_STATIC_ROOT),n.taskLoader=new Oe.a,n.taskLoader.addEventListener(Ie.TaskLoaderEvent.UPDATE,n.onUpdate.bind(Ve()(n))),n}return Ee()(t,e),ce()(t,[{key:"onUpdate",value:function(e){this.taskLoaderOptions&&this.taskLoaderOptions.onUpdate&&this.taskLoaderOptions.onUpdate(e.data.progress)}},{key:"loadTasks",value:function(e,t){return this.taskLoaderOptions=t||null,this.taskLoader.loadTasks(e)}}]),t}(n.n(Ge).a),He=n(105),Xe=n(492),ze=n.n(Xe),je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===t)e.bufferSource.stop(0);else{var n=e.context.currentTime+t;e.gain.gain.linearRampToValueAtTime(0,n),e.bufferSource.stop(n)}qe(e)},qe=function(e){if(e.channel){var t=e.channel.playingSamples.indexOf(e);t>-1&&e.channel.playingSamples.splice(t,1)}},We=window.AudioContext||window.webkitAudioContext,Ye=function(){function e(t,n){le()(this,e),this.channels={},this.context=new We,this.sampleManager=new ze.a(this.context,t,n)}return ce()(e,[{key:"initAudioContext",value:function(){"suspended"===this.context.state&&this.context.resume()}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.sampleManager.getSampleByName(e);if(!r)throw new Error("Cannot find sample '".concat(e));var a=this.getChannelByName(t);if(a&&a.playingSamples.length>0){var o=a.playingSamples.find(function(t){return t.sample.name===e});if(o&&a.isMonophonic&&o.bufferSource.loop&&i)return o}var s=function(e,t,n,i,r){if(!t.audioBuffer)throw new Error("Sample '".concat(t.name,"' is not loaded"));var a=e.createBufferSource(),o=e.createGain();a.connect(o),a.buffer=t.audioBuffer,a.loop=r,o.gain.setValueAtTime(i,0),o.connect(n?n.gain:e.destination);var s={context:e,sample:t,bufferSource:a,gain:o,channel:n||void 0};return a.start(0),s}(this.context,r,a,n,i);return a&&(a.isMonophonic&&a.playingSamples.forEach(function(e){return je(e,a.monophonicFadeOutTime)}),a.playingSamples.push(s),s.bufferSource.onended=function(){qe(s)}),s}},{key:"getChannelByName",value:function(e){var t=e?this.channels[e]:null;if(!t)throw new Error("Channel with name '".concat(e,"' does not exist"));return t}},{key:"stopAllOnChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.playingSamples.forEach(function(e){return je(e,t)})}(this.getChannelByName(e),t)}},{key:"muteChannel",value:function(e,t){var n=this.getChannelByName(e);if(n){var i=t?0:n.initialVolume;n.gain.gain.setValueAtTime(i,0)}}},{key:"muteAllChannels",value:function(e){var t=this;Object.keys(this.channels).forEach(function(n){t.muteChannel(n,e)})}},{key:"createChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(""===e)throw new Error("Channel name cannot be blank");if(this.channels[e])throw new Error("Channel '".concat(e,"' already exists"));if(i<0)throw new Error("monophonicFadeOutTime can not be negative");var r=this.context.createGain();r.gain.setValueAtTime(t,0),r.connect(this.context.destination),r.connect(this.context.destination),this.channels[e]={initialVolume:t,isMonophonic:n,monophonicFadeOutTime:i,name:e,gain:r,playingSamples:[]}}}]),e}(),Ke=n(60),Qe=n.n(Ke),Ze=n(44),Je=function(e){function t(){var e;return le()(this,t),(e=pe()(this,me()(t).call(this))).previousWidth=0,e.inputFocused=!1,e.resizeListener=new s.DisposableEventListener(window,"resize",Qe()(e.handleResize.bind(Ve()(e)),200)),e.focusListener=new s.DisposableEventListener(document,"focus",e.handleFocus.bind(Ve()(e)),!0),e.blurListener=new s.DisposableEventListener(document,"blur",e.handleBlur.bind(Ve()(e)),!0),e.setOrientation(),e}return Ee()(t,e),ce()(t,[{key:"handleResize",value:function(){this.setOrientation()}},{key:"handleFocus",value:function(e){e.target&&e.target.tagName===t.INPUT_NODE&&(this.inputFocused=!0)}},{key:"handleBlur",value:function(e){e.target&&e.target.tagName===t.INPUT_NODE&&(this.inputFocused=!1)}},{key:"setOrientation",value:function(){var e=window.innerHeight?window.innerHeight:screen.availHeight,n=window.innerWidth?window.innerWidth:screen.availWidth;void 0!==this.orientation&&document.body.classList.remove(this.orientation.toLowerCase()),n===this.previousWidth||this.inputFocused||(this.previousWidth=window.innerWidth,e>n?this.orientation=t.PORTRAIT:n>e&&(this.orientation=t.LANDSCAPE)),void 0!==this.orientation&&document.body.classList.add(this.orientation.toLowerCase())}},{key:"dispose",value:function(){this.resizeListener.dispose(),this.focusListener.dispose(),this.blurListener.dispose()}}]),t}(n.n(Ze).a);Je.ORIENTATION_CHANGE="OrientationManager.ORIENTATION_CHANGE",Je.LANDSCAPE="LANDSCAPE",Je.PORTRAIT="PORTRAIT",Je.INPUT_NODE="INPUT";var et=function(){var e=new ie.a;e.init(oe.config,oe.environment);var t=e.getVariable(m.d.MOCK_API_ENABLED);t&&console.warn("%c MOCK-API is enabled instead of real API","background: red; color: white;padding:5px;font-size: 18px");var n=P.create({baseURL:e.getURL(t?m.c.MOCK_API:m.c.API),headers:{Accept:"application/json"},responseType:"json"});n.interceptors.response.use(function(e){return function(e){return e&&e.data&&"undefined"!==typeof e.data.data?U()({},e,e.data):e}(e)},function(e){throw function(e){if(e&&e.response&&e.response.data&&e.response.data.error){var t=U()({config:e.config},e.response,e.response.data);return delete t.data,t}return e}(e)}),Object(l.b)(u.g,new Be({providers:te()({},W.GTM,new De({namespace:"gtm",trackingId:e.getProperty(m.b.GTM)}))})),Object(l.b)(u.h,new de),Object(l.b)(u.c,new he),Object(l.b)(u.b,e),Object(l.b)(u.d,n),Object(l.b)(u.e,new Je),Object(l.b)(u.f,new Ye("".concat(e.getVariable(m.d.VERSIONED_STATIC_ROOT),"audio/sound/"),M.a.safari?"mp3":"ogg")),Object(l.b)(u.i,new He.b),Object(l.b)(u.a,new $e)},tt=n(493).a,nt={},it=n(40);Object.keys(nt).forEach(function(e){return i.a.filter(e,nt[e])}),Object.keys(f).forEach(function(e){return i.a.directive(e,f[e])}),Object.keys(p).forEach(function(e){return i.a.component(e,p[e])}),et(),window.webpackPublicPath&&(n.p=window.webpackPublicPath);var rt=Object(k.a)();rt.state.user.rememberMe||rt.commit(it.a);var at=x(),ot=_();ot.localeEnabled&&(i.a.use(a.a,{store:rt,router:ot.localeRoutingEnabled?at:null,config:ot.config,proxy:H}),i.a.initI18nManager()),Object(o.sync)(rt,at);var st=new i.a({router:at,store:rt,render:function(e){return e(tt)}});J(rt).then(function(){st.$mount("#app")})}]);